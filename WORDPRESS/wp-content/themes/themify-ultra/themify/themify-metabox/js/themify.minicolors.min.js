'use strict';(function(h){function M(a,b){var e=h('<div class="tfminicolors" />'),d=h.tfminicolors.defaults,c;if(!a.data("tfminicolors-initialized")){b=h.extend(!0,{},d,b);e.addClass("tfminicolors-theme-"+b.theme).addClass(b.opacity?"tfminicolors-with-opacity":"tfminicolors-without-opacity");void 0!==b.position&&h.each(b.position.split(" "),function(){e.addClass("tfminicolors-position-"+this)});d="rgb"===b.format?b.opacity?"25":"20":b.keywords?"11":"7";a.addClass("tfminicolors-input").data("tfminicolors-initialized",
!1).data("tfminicolors-settings",b).prop("size",d).attr("autocomplete","off").wrap(e).after('<div class="tfminicolors-panel tfminicolors-slider-'+b.control+'"><div class="tfminicolors-slider tfminicolors-sprite"><div class="tfminicolors-picker"></div></div><div class="tfminicolors-opacity-slider tfminicolors-sprite"><div class="tfminicolors-picker"></div></div><div class="tfminicolors-grid tfminicolors-sprite"><div class="tfminicolors-grid-inner tf_abs tf_w tf_h"></div><div class="tfminicolors-picker"><div></div></div></div></div>');
b.inline||a.after('<span class="tfminicolors-swatch tfminicolors-sprite tfminicolors-input-swatch"><span class="tfminicolors-swatch-color tf_abs"></span></span>');a.on("focus.tfminicolors blur.tfminicolors keydown.tfminicolors keyup.tfminicolors paste.tfminicolors",function(f){var g=f.type;if("focus"===g&&!a.parent().hasClass("tfminicolors-var-input"))k(a);else if("blur"===g){f=a.data("tfminicolors-settings");let q;g=a.val();if(a.data("tfminicolors-initialized")){var u=f.keywords?h.map(f.keywords.split(","),
function(G){return h.trim(G.toLowerCase())}):[];""!==g&&(0===g.indexOf("--")||-1<h.inArray(g.toLowerCase(),u))?q=g:(u=I(g)?x(g,!0):(u=v(g,!0))?K(u):null,q=null===u?f.defaultValue:"rgb"===f.format?f.opacity?x("rgba("+u.r+","+u.g+","+u.b+","+a.attr("data-opacity")+")"):x("rgb("+u.r+","+u.g+","+u.b+")"):O(u));u=f.opacity?a.attr("data-opacity"):1;"transparent"===q.toLowerCase()&&(u=0);a.closest(".tfminicolors").find(".tfminicolors-input-swatch > span").css("opacity",u);a.val(q);""===g&&a.val(N(f.defaultValue,
!0));a.val(w(g,f.letterCase))}}else if("keydown"===g)switch(f.which){case 9:m();break;case 13:case 27:m(),a.blur()}else if("keyup"===g||"paste"===g)"keyup"===g?A(a,!0):setTimeout(function(){A(a,!0)},1)}).closest(".tfminicolors").on("mousedown.tfminicolors touchstart.tfminicolors",".tfminicolors-grid, .tfminicolors-slider, .tfminicolors-opacity-slider",function(f){if(1===f.which){f.preventDefault();const g=h(this),u=document.body.contains(this)?document:top.document;p(g,f,!0);h(u).on("mousemove.tfminicolors touchmove.tfminicolors",
function(q){p(g,q)}).one("mouseup.tfminicolors touchend.tfminicolors",function(){h(u).off("mousemove.tfminicolors touchmove.tfminicolors")})}}).on("click.tfminicolors",".tfminicolors-swatches li",function(f){f.preventDefault();var g=h(this);f=g.parents(".tfminicolors").find(".tfminicolors-input");g=g.data("swatch-color");B(f,g,P(g));A(f)}).find(".tfminicolors-input-swatch").on("click mousedown.tfminicolors touchstart.tfminicolors",function(f){if("click"===f.type)b.inline||a.focus();else if(1===f.which)k(a);
else return;f.preventDefault()});d=a.parent().find(".tfminicolors-panel");d.on("selectstart",function(){return!1}).end();if(b.swatches&&0!==b.swatches.length){d.addClass("tfminicolors-with-swatches");var n=h('<ul class="tfminicolors-swatches tf_scrollbar"></ul>').appendTo(d);for(c=0;c<b.swatches.length;++c){if("object"===typeof b.swatches[c]){d=b.swatches[c].name;var l=b.swatches[c].color}else d="",l=b.swatches[c];var D=l;l=I(l)?x(l,!0):K(v(l,!0));h('<li class="tfminicolors-swatch tfminicolors-sprite"><span class="tfminicolors-swatch-color tf_abs" title="'+
d+'"></span></li>').appendTo(n).data("swatch-color",D).find(".tfminicolors-swatch-color").css({backgroundColor:O(l),opacity:l.a});b.swatches[c]=l}}b.inline&&a.parent().addClass("tfminicolors-inline");A(a,!1);a.data("tfminicolors-initialized",!0)}}function z(a){const b=a.parent();a.removeData("tfminicolors-initialized").removeData("tfminicolors-settings").removeProp("size").removeClass("tfminicolors-input");b.before(a).remove()}function k(a){var b=a.parent(),e=b.find(".tfminicolors-panel"),d=a.data("tfminicolors-settings"),
c=document.body.contains(a[0])?document:top.document;!a.data("tfminicolors-initialized")||a.prop("disabled")||b.hasClass("tfminicolors-inline")||b.hasClass("tfminicolors-focus")||(m(window.top.document),b.addClass("tfminicolors-focus"),e.animate?e.stop(!0,!0).fadeIn(d.showSpeed,function(){d.show&&d.show.call(a.get(0))}):(e.show(),d.show&&d.show.call(a.get(0))),h(c).on("mousedown.tfminicolors touchstart.tfminicolors",function(n){1===n.which&&0===h(n.target).closest(".tfminicolors,.tfminicolors_wrapper").length&&
(h(this).off("mousemove.tfminicolors touchmove.tfminicolors mousedown.tfminicolors touchstart.tfminicolors mouseup.tfminicolors touchend.tfminicolors"),m(this),c=null)}))}function m(a){h(".tfminicolors-focus",a).each(function(){const b=h(this),e=b.find(".tfminicolors-input"),d=b.find(".tfminicolors-panel"),c=e.data("tfminicolors-settings");d.animate?d.fadeOut(c.hideSpeed,function(){c.hide&&c.hide.call(e.get(0));b.removeClass("tfminicolors-focus")}):(d.hide(),c.hide&&c.hide.call(e.get(0)),b.removeClass("tfminicolors-focus"))})}
function p(a,b,e){let d=a.parents(".tfminicolors").find(".tfminicolors-input"),c=d.data("tfminicolors-settings"),n=a.find("[class$=-picker]");var l=a.offset().left,D=a.offset().top;let f=Math.round(b.pageX-l);var g=Math.round(b.pageY-D);e=e?c.animationSpeed:0;b.originalEvent.changedTouches&&(f=b.originalEvent.changedTouches[0].pageX-l,g=b.originalEvent.changedTouches[0].pageY-D);0>f&&(f=0);0>g&&(g=0);f>a.width()&&(f=a.width());g>a.height()&&(g=a.height());a.parent().hasClass("tfminicolors-slider-wheel")&&
n.parent().hasClass("tfminicolors-grid")&&(l=75-f,D=75-g,b=Math.sqrt(l*l+D*D),l=Math.atan2(D,l),0>l&&(l+=2*Math.PI),75<b&&(b=75,f=75-75*Math.cos(l),g=75-75*Math.sin(l)),f=Math.round(f),g=Math.round(g));g={top:g+"px"};a.is(".tfminicolors-grid")&&(g.left=f+"px");n.animate?n.stop(!0).animate(g,e,c.animationEasing,function(){r(d,a)}):(n.css(g),r(d,a))}function r(a,b){function e(C,J){return C.length&&J?{x:C.offset().left-J.offset().left+C.outerWidth()/2,y:C.offset().top-J.offset().top+C.outerHeight()/
2}:null}var d=a.val();var c=a.attr("data-opacity");var n=a.parent();let l=a.data("tfminicolors-settings"),D=n.find(".tfminicolors-input-swatch");var f=n.find(".tfminicolors-grid");let g=n.find(".tfminicolors-slider"),u=n.find(".tfminicolors-opacity-slider");var q=f.find("[class$=-picker]");var G=g.find("[class$=-picker]"),L=u.find("[class$=-picker]");q=e(q,f);G=e(G,g);L=e(L,u);if(b.is(".tfminicolors-grid, .tfminicolors-slider, .tfminicolors-opacity-slider")){switch(l.control){case "wheel":d=f.width()/
2-q.x;n=f.height()/2-q.y;f=Math.sqrt(d*d+n*n);d=Math.atan2(n,d);0>d&&(d+=2*Math.PI);75<f&&(f=75,q.x=69-75*Math.cos(d),q.y=69-75*Math.sin(d));b=t(f/.75,0,100);c=t(180*d/Math.PI,0,360);q=t(100-Math.floor(G.y*(100/g.height())),0,100);d=H({h:c,s:b,b:q});g.css("backgroundColor",H({h:c,s:b,b:100}));break;case "saturation":c=t(parseInt(q.x*(360/f.width()),10),0,360);b=t(100-Math.floor(G.y*(100/g.height())),0,100);q=t(100-Math.floor(q.y*(100/f.height())),0,100);d=H({h:c,s:b,b:q});g.css("backgroundColor",
H({h:c,s:100,b:q}));n.find(".tfminicolors-grid-inner").css("opacity",b/100);break;case "brightness":c=t(parseInt(q.x*(360/f.width()),10),0,360);b=t(100-Math.floor(q.y*(100/f.height())),0,100);q=t(100-Math.floor(G.y*(100/g.height())),0,100);d=H({h:c,s:b,b:q});g.css("backgroundColor",H({h:c,s:b,b:100}));n.find(".tfminicolors-grid-inner").css("opacity",1-q/100);break;default:c=t(360-parseInt(G.y*(360/g.height()),10),0,360),b=t(Math.floor(q.x*(100/f.width())),0,100),q=t(100-Math.floor(q.y*(100/f.height())),
0,100),d=H({h:c,s:b,b:q}),f.css("backgroundColor",H({h:c,s:100,b:100}))}c=l.opacity?parseFloat(1-L.y/u.height()).toFixed(2):1;B(a,d,c)}else D.find("span").css({backgroundColor:d,opacity:c}),E(a,d,c)}function B(a,b,e){let d=a.parent(),c=a.data("tfminicolors-settings"),n=d.find(".tfminicolors-input-swatch");c.opacity&&a.attr("data-opacity",e);if("rgb"===c.format){b=I(b)?x(b,!0):K(v(b,!0));e=""===a.attr("data-opacity")?1:t(parseFloat(a.attr("data-opacity")).toFixed(2),0,1);if(isNaN(e)||!c.opacity)e=
1;b=1>=a.tfminicolors("rgbObject").a&&b&&c.opacity?"rgba("+b.r+", "+b.g+", "+b.b+", "+parseFloat(e)+")":"rgb("+b.r+", "+b.g+", "+b.b+")"}else I(b)&&(b=Q(b)),b=w(b,c.letterCase);a.val(b);n.find("span").css({backgroundColor:b,opacity:e});d.removeClass("tfminicolors-var-input");E(a,b,e)}function A(a,b){let e,d;var c;var n=a.parent();var l=a.data("tfminicolors-settings");var D=n.find(".tfminicolors-input-swatch");const f=n.find(".tfminicolors-grid"),g=n.find(".tfminicolors-slider"),u=n.find(".tfminicolors-opacity-slider"),
q=f.find("[class$=-picker]"),G=g.find("[class$=-picker]"),L=u.find("[class$=-picker]"),C=a.val();I(C)?(e=Q(C),(c=t(parseFloat(P(C)).toFixed(2),0,1))&&a.attr("data-opacity",c)):e=w(v(C,!0),l.letterCase);e||(e=w(N(l.defaultValue,!0),l.letterCase));c=S(e);var J=l.keywords?h.map(l.keywords.split(","),function(T){return h.trim(T.toLowerCase())}):[];const R=""!==C&&0===C.indexOf("--");""!==C&&(!0===R||-1<h.inArray(C.toLowerCase(),J))?(J=w(C),!0===R&&n.addClass("tfminicolors-var-input")):(J=I(C)?x(C):e,
n.removeClass("tfminicolors-var-input"));b||a.val(J);l.opacity&&(d=""===a.attr("data-opacity")?1:t(parseFloat(a.attr("data-opacity")).toFixed(2),0,1),isNaN(d)&&(d=1),a.attr("data-opacity",d),D.find("span").css("opacity",d),b=t(u.height()-u.height()*d,0,u.height()),L.css("top",b+"px"));"transparent"===C.toLowerCase()&&D.find("span").css("opacity",0);D.find("span").css("backgroundColor",e);switch(l.control){case "wheel":n=t(Math.ceil(.75*c.s),0,f.height()/2);D=c.h*Math.PI/180;l=t(75-Math.cos(D)*n,0,
f.width());b=t(75-Math.sin(D)*n,0,f.height());q.css({top:b+"px",left:l+"px"});b=150-c.b/(100/f.height());""===e&&(b=0);G.css("top",b+"px");g.css("backgroundColor",H({h:c.h,s:c.s,b:100}));break;case "saturation":l=t(5*c.h/12,0,150);b=t(f.height()-Math.ceil(c.b/(100/f.height())),0,f.height());q.css({top:b+"px",left:l+"px"});b=t(g.height()-c.s*(g.height()/100),0,g.height());G.css("top",b+"px");g.css("backgroundColor",H({h:c.h,s:100,b:c.b}));n.find(".tfminicolors-grid-inner").css("opacity",c.s/100);break;
case "brightness":l=t(5*c.h/12,0,150);b=t(f.height()-Math.ceil(c.s/(100/f.height())),0,f.height());q.css({top:b+"px",left:l+"px"});b=t(g.height()-c.b*(g.height()/100),0,g.height());G.css("top",b+"px");g.css("backgroundColor",H({h:c.h,s:c.s,b:100}));n.find(".tfminicolors-grid-inner").css("opacity",1-c.b/100);break;default:l=t(Math.ceil(c.s/(100/f.width())),0,f.width()),b=t(f.height()-Math.ceil(c.b/(100/f.height())),0,f.height()),q.css({top:b+"px",left:l+"px"}),b=t(g.height()-c.h/(360/g.height()),0,
g.height()),G.css("top",b+"px"),f.css("backgroundColor",H({h:c.h,s:100,b:100}))}a.data("tfminicolors-initialized")&&E(a,J,d)}function E(a,b,e){let d=a.data("tfminicolors-settings");var c=a.data("tfminicolors-lastChange");let n,l;if(!c||c.value!==b||c.opacity!==e){a.data("tfminicolors-lastChange",{value:b,opacity:e});if(d.swatches&&0!==d.swatches.length){c=I(b)?x(b,!0):K(b);n=-1;for(l=0;l<d.swatches.length;++l)if(c.r===d.swatches[l].r&&c.g===d.swatches[l].g&&c.b===d.swatches[l].b&&c.a===d.swatches[l].a){n=
l;break}a.parent().find(".tfminicolors-swatches .tfminicolors-swatch").removeClass("selected");-1!==n&&a.parent().find(".tfminicolors-swatches .tfminicolors-swatch").eq(l).addClass("selected")}d.change&&(d.changeDelay?(clearTimeout(a.data("tfminicolors-changeTimeout")),a.data("tfminicolors-changeTimeout",setTimeout(function(){d.change.call(a.get(0),b,e)},d.changeDelay))):d.change.call(a.get(0),b,e));a.trigger("change").trigger("input")}}function F(a){var b=h(a);a=b.attr("data-opacity");b=b.val();
b=I(b)?x(b,!0):K(v(b,!0));if(!b)return null;void 0!==a&&h.extend(b,{a:parseFloat(a)});return b}function y(a,b){a=h(a);var e=a.val();e=I(e)?x(e,!0):K(v(e,!0));a=a.attr("data-opacity");if(!e)return null;void 0===a&&(a=1);return b?"rgba("+e.r+", "+e.g+", "+e.b+", "+parseFloat(a)+")":"rgb("+e.r+", "+e.g+", "+e.b+")"}function w(a,b){return"uppercase"===b?a.toUpperCase():a.toLowerCase()}function v(a,b){a=a.replace(/^#/g,"");if(!a.match(/^[A-F0-9]{3,6}/ig)||3!==a.length&&6!==a.length)return"";3===a.length&&
b&&(a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]);return"#"+a}function x(a,b){a=a.replace(/[^\d,.]/g,"").split(",");a[0]=t(parseInt(a[0],10),0,255);a[1]=t(parseInt(a[1],10),0,255);a[2]=t(parseInt(a[2],10),0,255);void 0!==a[3]&&(a[3]=t(parseFloat(a[3],10),0,1));return b?void 0!==a[3]?{r:a[0],g:a[1],b:a[2],a:a[3]}:{r:a[0],g:a[1],b:a[2]}:"undefined"!==typeof a[3]&&1>=a[3]?"rgba("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")":"rgb("+a[0]+", "+a[1]+", "+a[2]+")"}function N(a,b){return I(a)?x(a):v(a,b)}function t(a,b,e){a<
b?a=b:a>e&&(a=e);return a}function I(a){a=a.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);return!(!a||4!==a.length)}function P(a){return(a=a.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+(\.\d{1,2})?|\.\d{1,2})[\s+]?/i))&&6===a.length?a[4]:"1"}function Q(a){return(a=a.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===a.length?"#"+("0"+parseInt(a[1],10).toString(16)).slice(-2)+("0"+parseInt(a[2],
10).toString(16)).slice(-2)+("0"+parseInt(a[3],10).toString(16)).slice(-2):""}function O(a){var b=[a.r.toString(16),a.g.toString(16),a.b.toString(16)];h.each(b,function(e,d){1===d.length&&(b[e]="0"+d)});return"#"+b.join("")}function H(a){var b=O,e,d;var c=Math.round(a.h);var n=Math.round(255*a.s/100);a=Math.round(255*a.b/100);if(0===n)c=e=d=a;else{n=(255-n)*a/255;var l=c%60*(a-n)/60;360===c&&(c=0);60>c?(c=a,d=n,e=n+l):120>c?(e=a,d=n,c=a-l):180>c?(e=a,c=n,d=n+l):240>c?(d=a,c=n,e=a-l):300>c?(d=a,e=
n,c=n+l):360>c?(c=a,e=n,d=a-l):d=e=c=0}return b({r:Math.round(c),g:Math.round(e),b:Math.round(d)})}function S(a){a=K(a);var b={h:0,s:0,b:0},e=Math.max(a.r,a.g,a.b),d=e-Math.min(a.r,a.g,a.b);b.b=e;b.s=0!==e?255*d/e:0;b.h=0!==b.s?a.r===e?(a.g-a.b)/d:a.g===e?2+(a.b-a.r)/d:4+(a.r-a.g)/d:-1;b.h*=60;0>b.h&&(b.h+=360);b.s*=100/255;b.b*=100/255;0===b.s&&(b.h=360);return b}function K(a){a=parseInt(-1<a.indexOf("#")?a.substring(1):a,16);return{r:a>>16,g:(a&65280)>>8,b:a&255}}h.tfminicolors={defaults:{animationSpeed:50,
animationEasing:"swing",change:null,changeDelay:0,control:"hue",defaultValue:"",format:"hex",hide:null,hideSpeed:100,inline:!1,keywords:"",letterCase:"lowercase",opacity:!1,position:"bottom",show:null,showSpeed:100,theme:"default",swatches:[]}};h.extend(h.fn,{tfminicolors:function(a,b){switch(a){case "destroy":return h(this).each(function(){z(h(this))}),h(this);case "hide":return m(),h(this);case "opacity":if(void 0===b)return h(this).attr("data-opacity");h(this).each(function(){A(h(this).attr("data-opacity",
b))});return h(this);case "rgbObject":return F(h(this),"rgbaObject"===a);case "rgbString":case "rgbaString":return y(h(this),"rgbaString"===a);case "settings":if(void 0===b)return h(this).data("tfminicolors-settings");h(this).each(function(){var e=h(this).data("tfminicolors-settings")||{};z(h(this));h(this).tfminicolors(h.extend(!0,e,b))});return h(this);case "show":return k(h(this).eq(0)),h(this);case "value":if(void 0===b)return h(this).val();h(this).each(function(){"object"===typeof b&&null!==
b?(void 0!==b.opacity&&h(this).attr("data-opacity",t(b.opacity,0,1)),b.color&&h(this).val(b.color)):h(this).val(b);A(h(this))});return h(this);default:return"create"!==a&&(b=a),h(this).each(function(){M(h(this),b)}),h(this)}}})})(jQuery);
(function(h,M,z){M.themifyColorManager={colorSwatches:{},initilized:!1,init(){if(!this.initilized&&"undefined"!==typeof themifyCM){this.initilized=!0;for(let k=Object.keys(themifyCM.colors),m=0,p=k.length;m<p;++m)this.colorSwatches[k[m]]=themifyCM.colors[k[m]]}},toRgba(k){return k.color.replace("rgb","rgba").replace(")",","+k.opacity+")")},toColorsArray(){let k=[];for(let m=Object.keys(this.colorSwatches),p=m.length-1;-1<p;--p)k.push(this.toRgba(this.colorSwatches[m[p]]));k.length||(k=["#FFF"]);return k},
initColorPicker(k){k=k.closest(".tfminicolors").querySelector(".tfminicolors-focus .tfminicolors-panel");if(!k.getElementsByClassName("tf_swatches_container")[0]){var m=z.createElement("div"),p=m.getElementsByClassName("tfminicolors-swatch"),r=Object.keys(this.colorSwatches).reverse(),B=z.createElement("div"),A=z.createElement("span"),E=z.createElement("span"),F=z.createElement("div");m.className="tf_swatches_container";m.addEventListener("click",this.initClick.bind(this));m.appendChild(k.getElementsByClassName("tfminicolors-swatches")[0]);
for(let y=p.length-1;-1<y;--y){if(!r.length){p[y].parentNode.removeChild(p[y]);break}let w=z.createElement("span"),v="undefined"!==typeof this.colorSwatches[r[y]].uid?this.colorSwatches[r[y]].uid:this.UID()+y;w.className="tf_delete_swatch tf_close";p[y].appendChild(w);p[y].dataset.uid=this.colorSwatches[r[y]].uid=v}E.className=A.className="tf_cm_tooltip";A.innerText=themifyCM.labels.save;B.appendChild(A);B.className="tf_add_swatch tf_plus_icon";B.setAttribute("tabIndex","-1");m.appendChild(B);E.innerText=
themifyCM.labels.ie;F.appendChild(E);F.className="tf_cm_dropdown_icon";F.appendChild(this.getIcon("ti-import"));F.setAttribute("tabIndex","-1");F.appendChild(this.makeImportExportDropdown());m.appendChild(F);k.appendChild(m)}},makeImportExportDropdown(){const k=z.createElement("div"),m=z.createElement("ul"),p=z.createElement("li"),r=z.createElement("li");k.className="tf_cm_dropdown";p.className="tb_cm_import";p.textContent=themifyCM.labels.import;p.appendChild(this.getIcon("ti-import"));m.appendChild(p);
r.className="tb_cm_export";r.textContent=themifyCM.labels.export;r.appendChild(this.getIcon("ti-export"));m.appendChild(r);k.appendChild(m);return k},getIcon(k,m){k="tf-"+k.trim().replace(" ","-");const p=z.createElementNS("http://www.w3.org/2000/svg","use"),r=z.createElementNS("http://www.w3.org/2000/svg","svg");let B="tf_fa "+k;m&&(B+=" "+m);r.setAttribute("class",B);p.setAttributeNS(null,"href","#"+k);r.appendChild(p);return r},UID(){return(Math.random().toString(36).substring(2)+(new Date).getTime().toString(36)).substring(0,
5)},initClick(k){k.preventDefault();const m=k.target,p=m.classList;p.contains("tf_delete_swatch")?this.deleteSwatch(k):p.contains("tf_add_swatch")?this.addSwatch(m.ownerDocument):p.contains("tb_cm_export")?(m.parentNode.parentNode.parentNode.blur(),z.location.assign(themifyCM.exportColorsURL)):p.contains("tb_cm_import")&&(m.parentNode.parentNode.parentNode.blur(),this.importColors("colors",m.ownerDocument))},importColors(k,m){m=m||z;let p=m.getElementsByClassName("themify_cm_input")[0];if(p)p.dataset.type=
k;else{p=z.createElement("input");p.type="file";p.dataset.type=k;p.className="themify_cm_input";const r=this;p.addEventListener("change",function(B){const A=B.target.files[0],E=new FormData,F=B.target.dataset.type;E.append("file",A,A.name);E.append("action","themify_import_colors");E.append("tb_load_nonce",themifyCM.nonce);E.append("type",F);h.ajax({url:themifyCM.ajax_url,type:"POST",data:E,cache:!1,dataType:"json",processData:!1,contentType:!1,success:function(y){if("SUCCESS"===y.status)if("colors"===
F){r.colorSwatches=y.colors;for(let w=m.querySelectorAll(".tf_swatches_container .tfminicolors-swatch"),v=w.length-1;-1<v;--v)w[v].parentNode.removeChild(w[v]);for(let w=Object.keys(r.colorSwatches),v=w.length,x=0;x<v;x++)r.addSwatchHtml(m,r.colorSwatches[w[x]].color,r.colorSwatches[w[x]].opacity,w[x])}else if("gradients"===F){const w=ThemifyBuilderCommon.Lightbox.$lightbox.find(".tb_gradient_container").first().data("themifyGradient");for(let v=Object.keys(themifyCM.gradients),x=v.length-1;-1<x;--x)w.removeSwatch(v[x]);
themifyCM.gradients=y.colors;for(let v=Object.keys(themifyCM.gradients),x=0,N=v.length;x<N;++x)w.addSwatch(themifyCM.gradients[v[x]])}alert(y.msg)}})})}p.click()},deleteSwatch(k){k.preventDefault();k.stopPropagation();const m=k.target.parentNode.dataset.uid;for(let p=k.target.ownerDocument.querySelectorAll('[data-uid="'+m+'"]'),r=p.length-1;-1<r;--r)p[r].parentNode.removeChild(p[r]);delete this.colorSwatches[m];this.updateColorSwatches("colors")},updateColorSwatches(k){h.ajax({type:"POST",url:themifyCM.ajax_url,
dataType:"json",data:{action:"themify_save_colors",type:k,tb_load_nonce:themifyCM.nonce,colors:"colors"===k?this.colorSwatches:themifyCM.gradients}})},addSwatch(k){var m=k.querySelector(".tfminicolors-focus .tfminicolors-input");const p=this.hex2Rgb(m.value);m=m.dataset.opacity;if(null===p)return!1;for(let B=Object.keys(this.colorSwatches),A=B.length-1;-1<A;--A)if(this.colorSwatches[B[A]].color.replace(/\s/g,"")===p&&parseFloat(this.colorSwatches[B[A]].opacity)===parseFloat(m))return!1;const r=this.UID();
this.addSwatchHtml(k,p,m,r);this.colorSwatches[r]={color:p,opacity:m,uid:r};this.updateColorSwatches("colors")},addSwatchHtml(k,m,p,r){for(let E=k.querySelectorAll(".tf_swatches_container .tfminicolors-swatches"),F=E.length-1;-1<F;--F){k=E[F];var B=k.insertBefore,A=r;const y=z.createElement("li"),w=z.createElement("span"),v=z.createElement("span");y.className="tfminicolors-swatch tfminicolors-sprite";y.dataset.uid=A;y.dataset.swatchColor=m.replace(")",", "+p+")").replace("rgb","rgba");w.className=
"tfminicolors-swatch-color tf_abs";w.style.backgroundColor=m;w.style.opacity=p;y.appendChild(w);v.className="tf_delete_swatch tf_close";y.appendChild(v);B.call(k,y,E[F].firstChild)}},hex2Rgb(k){return(k=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(k))?"rgb("+parseInt(k[1],16)+","+parseInt(k[2],16)+","+parseInt(k[3],16)+")":null}};M.themifyColorManager.init()})(jQuery,window,document);
