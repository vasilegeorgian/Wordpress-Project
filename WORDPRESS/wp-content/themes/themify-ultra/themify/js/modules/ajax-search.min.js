'use strict';((m,l)=>{m.on("themify_overlay_search_init",v=>{let h,c=v.closest(".tf_search_form");if(!c){c=l.getElementById("searchform");if(!c)return;c=c.closest(".tf_search_form")}const n=c.getElementsByTagName("form")[0];var q=!!n.closest(".tf_search_overlay");const k=n.querySelector('input[name="s"]'),r=(new URL(n.getAttribute("action"))).searchParams,w=r.get("term"),x=r.get("post_type"),t={},f=l.createElement("div"),y=l.createElement("div"),B=new Headers({Accept:"application/json","X-Requested-With":"XMLHttpRequest"}),
p=new FormData;f.className="tf_search_result tf_w tf_box tf_hide";y.className="tf_loader tf_hide";if(q){c=l.createElement("div");q=l.createElement("div");const a=l.createElement("a"),d=l.createElement("span"),e=function(){c.classList.toggle("search-active",0<k.value.length)};v.addEventListener("click",function(b){b.preventDefault();e();c.classList.add("tf_fd_in");k.focus();m.body[0].style.overflowY="hidden";m.body[0].classList.add("searchform-slidedown")});a.addEventListener("click",function(b){b.preventDefault();
e();h&&h.abort();h=null;c.classList.remove("tf_fd_in");m.body[0].style.overflowY="";m.body[0].classList.remove("searchform-slidedown")});c.className="tf_search_lightbox tf_hide tf_w tf_box tf_opacity tf_h tf_scrollbar";q.className="tf_searchform_inner tf_opacity";a.className="tf_close_search tf_close";d.className="screen-reader-text";a.appendChild(d);c.appendChild(q);c.appendChild(a);n.after(c);q.appendChild(n)}else f.className+=" tf_scrollbar",f.setAttribute("tabindex","-1");k.after(f);k.before(y);
const z=a=>{let d=a.getAttribute("href").replace("#","");"all"===d&&(d="item");a=a.closest("li");const e=f.getElementsByClassName("tf_search_item");for(let b=e.length-1;-1<b;--b)e[b].classList.remove("tf_fd_in"),e[b].classList.add("tf_fd_out");for(let b=a.parentNode.children,g=b.length-1;-1<g;--g)"LI"===b[g].tagName&&b[g].classList.remove("active");a.classList.add("active");setTimeout(()=>{var b=f.getElementsByClassName("tf_view_button"),g=f.querySelector("#tf_result_link_"+d);for(let u=b.length-
1;-1<u;--u)b[u].classList.add("tf_hide");g&&g.classList.remove("tf_hide");for(b=e.length-1;-1<b;--b)g=e[b].classList,g.contains("tf_search_"+d)?(g.remove("tf_hide","tf_fd_out"),g.add("tf_fd_in")):g.add("tf_hide")},401)},A=()=>{var a=f.querySelector(".tf_search_tab .active a");a&&(a=a.getAttribute("href"))&&(a=f.querySelector('.tf_search_tab a[href="'+a+'"]'))&&z(a)};f.addEventListener("click",function(a){const d=a.target;"A"===d.tagName&&d.closest(".tf_search_tab")&&(a.preventDefault(),z(d))});p.append("action",
"themify_search_autocomplete");p.append("post_type",x?x:"");w&&(p.append("term",w),p.append("tax",r.get("tax")));k.autocomplete="off";k.addEventListener("keyup",function(a){setTimeout(()=>{const d=this.value.trim();h&&h.abort();d?(c.classList.add("search-active"),t[d]?(f.innerHTML=t[d],A()):(c.classList.add("tf_search_loading"),p.set("s",d),h=new AbortController,fetch(themify_vars.ajax_url,{signal:h.signal,method:"POST",headers:B,body:p}).then(e=>e.text()).then(e=>{e&&(f.innerHTML=e,A(),t[d]=e)}).catch(e=>
{"AbortError"!==e.name&&console.error("Uh oh, an error!",e)}).finally(()=>{c.classList.remove("tf_search_loading");h=null}))):(c.classList.remove("search-active"),f.innerHTML="")},100)},{passive:!0});n.classList.remove("tf_hide");k.value.trim()&&m.triggerEvent(k,"keyup")})})(Themify,document);
