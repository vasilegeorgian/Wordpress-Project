'use strict';((z,f)=>{const u=z.isTouch?window.PointerEvent?"pointerdown":"touchstart":"click",I=/iPhone|iPad|iPod|Mac OS/i.test(window.navigator.userAgent),C=a=>{a=Infinity===a?0:a;a=(new Date(1E3*a)).toISOString().substr(11,8).split(":");"00"===a[0]&&a.splice(0,1);return a.join(":")},K=(a,g)=>{const c=a.tracks,t=!!a.artists,h=!!a.images;a=!!a.tracknumbers;const l=f.createElement("div"),y=f.createElement("div");y.className="tf_audio_playlist";l.className="tf_playlist_current";for(let b=0,e=c.length;b<
e;++b)if(c[b].src){c[b].src=c[b].src.trim();let m=f.createElement("div"),v=f.createElement("a"),n=new Audio(c[b].src),k=f.createElement("div"),p=f.createElement("span");if(!c[b].type||n.canPlayType(c[b].type)){m.className="tf_playlist_item tf_w tf_rel";v.href=c[b].src;v.className="tf_playlist_caption tf_w";k.className="tf_playlist_length";!isNaN(n.duration)||c[b].meta&&c[b].meta.length_formatted?(k.textContent=isNaN(n.duration)?c[b].meta.length_formatted:C(n.duration),n=null):(m.className+=" tf_lazy",
n.addEventListener("durationchange",function(){k.textContent=C(this.duration);n=null;m.classList.remove("tf_lazy")},{passive:!0,once:!0}));!0===a&&(v.textContent=b+1+".");p.className="tf_playlist_title";c[b].caption?p.textContent=c[b].caption:c[b].title&&(p.textContent=c[b].title);if(!0===t&&c[b].meta&&c[b].meta.artists){let B=f.createElement("span");B.className="tf_playlist_artist";B.textContent="-"+c[b].meta.artists;v.appendChild(B)}v.appendChild(p);m.appendChild(v);m.appendChild(k);y.appendChild(m)}else c.slice(b,
1)}else c.slice(b,1);let A=!0;y.addEventListener(u,function(b){var e=b.target.closest(".tf_playlist_caption"),m=e.parentNode.classList.contains("tf_audio_current");if(e){b.preventDefault();b.stopPropagation();if(!m||g.paused)if(m)g.play();else{const v=this.getElementsByClassName("tf_audio_current")[0],n=z.convert(this.children).indexOf(e.parentNode);b=f.createElement("div");m=f.createElement("span");b.className="tf_playlist_caption";m.className="tf_playlist_title";!1===A&&(g.pause(),g.addEventListener("loadedmetadata",
function(){this.play()},{passive:!0,once:!0}),g.setAttribute("src",e.getAttribute("href")),g.load());v&&v.classList.remove("tf_audio_current");e.parentNode.classList.add("tf_audio_current");l.innerHTML="";if(c[n]){e=c[n];if(h&&e.thumb&&e.thumb.src){const k=new Image;void 0!==e.thumb.width&&(k.width=e.thumb.width);void 0!==e.thumb.height&&(k.height=e.thumb.height);k.decode="async";k.src=e.thumb.src;const p=f.createElement("div");p.className="post-image";k.decode().then(()=>{p.appendChild(k)});l.appendChild(p)}m.textContent=
e.title?e.title:e.caption?e.caption:"";b.appendChild(m);c.meta&&(c.meta.album&&(e=f.createElement("span"),e.className=" tf_playlist_album",e.textContent=c.meta.album,b.appendChild(e)),t&&c.meta.artists&&(e=f.createElement("span"),e.className=" tf_playlist_artist",e.textContent=c.meta.artists,b.appendChild(e)));l.appendChild(b)}}A=!1}});g.parentNode.insertBefore(l,g);z.triggerEvent(y.getElementsByClassName("tf_playlist_caption")[0],u);return y},J=(a,g)=>{if(!a.previousElementSibling||!a.previousElementSibling.classList.contains("tf_audio_container")){var c=
f.createElement("div"),t=f.createElement("div"),h=f.createElement("div"),l=f.createElement("div"),y=f.createElement("div");f.createElement("div");var A=f.createElement("div"),b=f.createElement("input"),e=f.createElement("input"),m=f.createElement("div"),v=f.createElement("div"),n=f.createElement("div"),k=f.createElement("button"),p=f.createElement("button"),B=f.createElement("div"),D=a.parentNode.closest(".track"),E=f.createElement("div"),L=g&&g.tracks&&!0,F=!0,G=!1;c.className="tf_audio_container tf_w tf_rel tf_box";
t.className="tf_audio_wrap tf_w tf_rel tf_box";n.className="tf_audio_controls";h.className="tf_audio_progress_wrap tf_rel tf_textl";l.className="tf_audio_progress_loaded tf_w tf_h tf_abs";y.className="tf_audio_progress_current tf_w tf_h tf_abs";b.className="tf_audio_progress_range tf_h tf_abs";e.min=b.min=0;e.max=b.max=100;e.type=b.type="range";b.value=0;e.value="50%";m.className="tf_audio_volumn_wrap";v.className="tf_audio_volumn_inner";e.className="tf_audio_volumn_range tf_h tf_overflow";k.className=
"tf_audio_mute";p.className="tf_auido_play";p.tabIndex=k.tabIndex=0;p.type=k.type="button";a.muted&&(k.className+=" tf_muted");B.className="tf_audio_current_time";E.className="tf_audio_total_time";A.className="tf_audio_hover tf_abs tf_hide tf_box tf_textc";B.textContent=C(a.currentTime);E.textContent=C(a.duration);p.addEventListener(u,function(d){"click"===d.type&&(d.preventDefault(),d.stopPropagation());a.paused?a.play():a.pause()},{passive:"click"!==u});D&&(D=D.getElementsByClassName("track-title")[0])&&
D.addEventListener(u,function(d){d.preventDefault();z.triggerEvent(p,u)});k.addEventListener(u,function(d){"click"===d.type&&(d.preventDefault(),d.stopPropagation());a.muted=!a.muted},{passive:"click"!==u});z.isTouch||h.addEventListener("mouseenter",function(){if(!isNaN(a.duration)){A.classList.remove("tf_hide");const d=this.clientWidth,r=parseFloat(A.clientWidth/2),w=a.duration,q=function(x){const H=void 0!==x.layerX?x.layerX:x.offsetX;0<H-r&&x.layerX<=d&&(A.style.transform="translateX("+(H-r)+"px)",
A.textContent=C(parseFloat(H/d)*w))};this.addEventListener("mouseleave",function(){A.classList.add("tf_hide");this.removeEventListener("mousemove",q,{passive:!0})},{passive:!0,once:!0});this.addEventListener("mousemove",q,{passive:!0})}},{passive:!0});b.addEventListener("input",function(d){d.preventDefault();d.stopPropagation();isNaN(a.duration)||(a.paused||!0!==F||a.pause(),G=!0,d=parseInt(this.value),a.currentTime=100===d?a.duration-1:parseFloat(d*a.duration/100).toFixed(4))});b.addEventListener("change",
function(d){d.preventDefault();d.stopPropagation();isNaN(a.duration)||(G=F=!1,a.paused&&a.play().then(r=>{F=!0}).catch(r=>{F=!0}))});a.addEventListener("progress",function(){0<this.buffered.length&&(l.style.transform="scaleX("+parseFloat(this.buffered.end(0)/this.duration).toFixed(4)+")")},{passive:!0});a.addEventListener("durationchange",function(){E.textContent=C(this.duration)},{passive:!0});a.addEventListener("waiting",function(){h.classList.add("tf_audio_waiting");this.addEventListener("playing",
function(){h.classList.remove("tf_audio_waiting")},{passive:!0,once:!0})},{passive:!0});a.addEventListener("emptied",function(){h.classList.add("tf_audio_waiting");this.addEventListener("playing",function(){h.classList.remove("tf_audio_waiting")},{passive:!0,once:!0})},{passive:!0});a.addEventListener("pause",function(){p.classList.remove("tf_audio_playing")},{passive:!0});a.addEventListener("play",function(){p.classList.add("tf_audio_playing");const d=f.getElementsByTagName("audio");for(let r=d.length-
1;-1<r;--r)d[r]!==this&&d[r].pause()},{passive:!0});a.addEventListener("timeupdate",function(){if(!isNaN(this.duration)){B.textContent=C(this.currentTime);let d=parseFloat(this.currentTime/this.duration);y.style.transform="scaleX("+d.toFixed(4)+")";!1===G&&(b.value=parseInt(100*d))}},{passive:!0});a.addEventListener("volumechange",function(){0!==this.volume&&k.classList.remove("tf_mute_disabled");!0===this.muted||0===this.volume?(0===this.volume&&k.classList.add("tf_mute_disabled"),k.classList.add("tf_muted")):
k.classList.remove("tf_muted")},{passive:!0});h.appendChild(l);h.appendChild(y);h.appendChild(b);h.appendChild(A);m.appendChild(k);!1===I&&(e.addEventListener("input",function(d){d.preventDefault();d.stopPropagation();a.volume=parseFloat(this.value/100).toFixed(3)}),v.appendChild(e),m.appendChild(v));t.appendChild(n);t.appendChild(B);t.appendChild(h);t.appendChild(E);t.appendChild(m);c.appendChild(t);if(L){const d=c.appendChild(K(g,a)),r=f.createElement("button"),w=f.createElement("button");r.className=
"tf_playlist_prev tf_play_disabled";w.className="tf_playlist_next";1>=d.children.length&&(w.className+=" tf_play_disabled");r.tabIndex=w.tabIndex=0;r.type=w.type="button";n.addEventListener(u,function(q){const x=q.target.classList;!x.contains("tf_play_disabled")&&(x.contains("tf_playlist_prev")||x.contains("tf_playlist_next"))&&("click"===q.type&&(q.preventDefault(),q.stopPropagation()),q=d.getElementsByClassName("tf_audio_current")[0])&&(q=x.contains("tf_playlist_prev")?q.previousElementSibling:
q.nextElementSibling)&&(z.triggerEvent(q.getElementsByClassName("tf_playlist_caption")[0],u),x.contains("tf_playlist_prev")?(w.classList.remove("tf_play_disabled"),x.toggle("tf_play_disabled",!q.previousElementSibling)):(r.classList.remove("tf_play_disabled"),x.toggle("tf_play_disabled",!q.nextElementSibling)))},{passive:"click"!==u});a.addEventListener("ended",function(){if(!w.classList.contains("tf_play_disabled"))z.triggerEvent(w,u);else if(this.hasAttribute("data-loop")||this.hasAttribute("loop")){const q=
d.getElementsByClassName("tf_playlist_caption")[0];q&&(r.classList.add("tf_play_disabled"),w.classList.toggle("tf_play_disabled",1>=d.children.length),z.triggerEvent(q,u))}},{passive:!0});n.appendChild(r);n.appendChild(p);n.appendChild(w)}else n.appendChild(p);a.parentNode.classList.remove("tf_lazy");a.parentNode.insertBefore(c,a)}},M=(a,g)=>{for(let t=a.length-1;-1<t;--t){let h=a[t];if(!g){var c=h.parentNode.parentNode;if(c.classList.contains("wp-audio-playlist")){let l=c.getElementsByClassName("tf-playlist-script")[0];
l||(l=c.getElementsByClassName("wp-playlist-script")[0]);l&&(g=JSON.parse(l.textContent),"audio"!==g.type&&(g=!1))}}if(!h.hasAttribute("src")&&!h.getElementsByTagName("source")[0]){if(!g||!g.tracks)continue;c=g.tracks[0].src;if(!c)for(let l=1,y=g.tracks.length;l<y;++l)if(g.tracks[l].src){c=g.tracks[l].src;break}if(!c)continue;h.setAttribute("src",c)}4===h.readyState?J(h,g):z.requestIdleCallback(()=>{h.addEventListener("loadedmetadata",function(){J(this,g)},{passive:!0,once:!0});h.setAttribute("preload",
"metadata");!0===I&&h.load()},200)}};z.on("tf_audio_init",(a,g)=>{a instanceof jQuery?a=a.get():void 0===a.length&&(a=[a]);M(a,g)})})(Themify,document);
