'use strict';((P,n,u,F)=>{let v=null,B=null,G=null,H=!1,M=null;const C=[],Q={"list-post":100,"list-large-image":100,"list-thumb-image":100,grid2:48.4,"grid2-thumb":48.4,grid3:31.2,grid4:22.6,grid5:17.44,grid6:14},D={},R=a=>{u.ResizeObserver?(null===G&&(G=new ResizeObserver((b,d)=>{setTimeout(()=>{!0!==H&&(null!==B&&cancelAnimationFrame(B),H=!0,B=requestAnimationFrame(()=>{for(let f=b.length-1;-1<f;--f)if(F.contains(b[f].target)){var e=b[f].target.closest(".masonry-done");e&&(e=u.Isotope.data(e))&&
!0!==e.isWorking&&(e.isWorking=!0,e.once("layoutComplete",function(){this.isWorking=!1}),e.layout())}else d.unobserve(b[f].target);H=!1}))},800)})),setTimeout(()=>{G.observe(a)},300)):(null===G&&(G=new MutationObserver(b=>{if(b[0]&&b[0].target&&b[0].target.nodeType!==Node.TEXT_NODE){const d=b[0].target.closest(".masonry-done");d&&setTimeout(()=>{n.imagesLoad(d,()=>{const e=u.Isotope.data(d);e&&(null!==B&&cancelAnimationFrame(B),B=requestAnimationFrame(()=>{e.layout()}))})},1200)}})),G.observe(a,{attributes:!0,
attributeOldValue:!1,characterDataOldValue:!1,childList:!0,subtree:!0,attributeFilter:["data-lazy","src","class"]}))},N=()=>{!0!==H&&(H=!0,null!==B&&cancelAnimationFrame(B),B=requestAnimationFrame(()=>{for(let a=C.length-1;-1<a;--a)try{C[a].element.classList.contains("masonry-done")?!0!==C[a].isWorking&&(C[a].isWorking=!0,C[a].once("layoutComplete",function(){this.isWorking=!1}),C[a].layout()):C.splice(a,1)}catch(b){C.splice(a,1)}H=!1}))},S=(a,b)=>{b&&"object"===typeof b||(b={layoutMode:a.getAttribute("data-layout"),
gutter:a.getAttribute("data-gutter"),columnWidth:a.getAttribute("data-column"),itemSelector:a.getAttribute("data-selector"),fitWidth:"1"===a.getAttribute("data-fit"),percentPosition:"0"!==a.getAttribute("data-percent")},"0"===b.gutter&&(b.gutter=!1),"0"===b.columnWidth&&(b.columnWidth=!1));b.layoutMode||(a.classList.contains("packery-gallery")?(b.layoutMode="packery",b.columnWidth=b.gutter=!1):a.classList.contains("masonry-fit-rows")&&(b.layoutMode="fitRows"));const d={originLeft:!n.isRTL,resize:!1,
containerStyle:null,onceLayoutComplete:b.onceLayoutComplete,layoutComplete:b.layoutComplete,arrangeComplete:b.arrangeComplete,removeComplete:b.removeComplete,filterCallback:b.filterCallback},e=b.layoutMode?b.layoutMode:"masonry";d.layoutMode=e;d[e]={};d[e].columnWidth=b.columnWidth;d[e].gutter=b.gutter;d.itemSelector=b.itemSelector?b.itemSelector:a.classList.contains("products")?".products>.product":a.classList.contains("gallery-wrapper")?".item":".loops-wrapper > .post";d.stagger=b.stagger?b.stagger:
30;!0===b.fitWidth&&(d[e].fitWidth=!0);b.stamp&&(d.stamp=b.stamp);d.percentPosition=!0===b.fitWidth?!1:void 0===b.percentPosition?!0:b.percentPosition;n.imagesLoad(a,f=>{const p=f.previousElementSibling;var l="",k=0,r=!1===d[e].gutter?!1:!f.classList.contains("no-gutter"),g=f.getElementsByClassName("gutter-sizer")[0];const x=Isotope.data(f);x&&(x.destroy(),g&&(g.remove(),g=!1));if(f.classList.contains("auto_tiles"))null!==p&&p.classList.contains("post-filter")&&n.trigger("themify_isotop_filter",[p,
void 0,d.filterCallback]);else{for(let E=f.classList,y=E.length-1;-1<y;--y)if(void 0!==Q[E[y].trim()]){l=E[y].trim();break}if("list-post"===l||"list-large-image"===l||"list-thumb-image"===l){if(null===p||!p.classList.contains("post-filter")){g&&g.remove();return}r=!1}D.masonry_done||(D.masonry_done=!0,null===v?(v=F.createElement("style"),v.innerText=".masonry>.post,.products.masonry>.product{animation-fill-mode:backwards;transition:none;animation:none;clear:none!important;margin-right:0!important;margin-left:0!important}.masonry-done{opacity:1}",
F.head.prepend(v)):v.innerText+=".masonry>.post,.products.masonry>.product{animation-fill-mode:backwards;transition:none;animation:none;clear:none!important;margin-right:0!important;margin-left:0!important}.masonry-done{opacity:1}");!0===r?(g?k=g:(k=F.createElement("div"),k.className="gutter-sizer",f.insertBefore(k,f.firstChild)),f.classList.contains("tf_fluid")||(l="",g=f.classList.contains("products"),r=f.classList.contains("gutter-narrow")?1.6:3.2,D[r+g]||(D[r+g]=!0,g=g?".products":"",1.6===r&&
(g+=".gutter-narrow"),""!==g&&(g+=">"),l+=g+".gutter-sizer{width:"+r+"%}"),D.contain||(D.contain=!0,l+=".gutter-sizer{contain:paint style size}@media (max-width:680px){.gutter-sizer{width:0}}"),l&&(v.innerText=l+v.innerText))):g&&g.remove();d[e].gutter=k;f.classList.add("masonry-done","tf_rel");k=new Isotope(f,d);C.push(k);R(f);null!==p&&p.classList.contains("post-filter")&&n.trigger("themify_isotop_filter",[p,k,d.filterCallback]);k.revealItemElements(k.items);if(d.onceLayoutComplete)k.once("layoutComplete",
d.onceLayoutComplete);if(d.layoutComplete)k.on("layoutComplete",d.layoutComplete);if(d.arrangeComplete)k.on("arrangeComplete",d.arrangeComplete);if(d.removeComplete)k.on("removeComplete",d.removeComplete);k.layout()}})};n.on("tf_isotop_init",(a,b)=>{void 0===a.length&&(a=[a]);for(let d=a.length-1;-1<d;--d)n.requestIdleCallback(()=>{S(a[d],b)},500)}).on("themify_isotop_filter",(a,b,d)=>{if(!a.hasAttribute("data-done")){a.setAttribute("data-done",1);var e=a.children,f=e.length,p=a.nextElementSibling,
l=a.hasAttribute("data-ajax"),k=!0===l&&a.hasAttribute("data-sort"),r=0;D.post_filter||(D.post_filter=!0,null===v?(v=F.createElement("style"),v.innerText=".post-filter{transition:opacity .2s ease-in-out}",F.head.prepend(v)):v.innerText+=".post-filter{transition:opacity .2s ease-in-out}");if(!1===l)for(let x=f-1;-1<x;--x){var g=e[x].getAttribute("class").replace(/(current-cat)|(cat-item)|(-)|(active)/g,"").replace(" ","");g=p.querySelector(".cat-"+g);null===g||g.parentNode!==p?(e[x].style.display=
"none",++r):e[x].style.display=""}1<f-r?(a.classList.remove("tf_opacity"),a.style.display=""):a.style.display="none";if(b||p.classList.contains("auto_tiles")){let x;const E=function(y){y.preventDefault();a.parentNode.classList.remove("tb_hide_loadmore");const h=y.target.closest(".cat-item");if(h){let w="*";const t=this.nextElementSibling;if(h.classList.contains("active")){if(h.classList.remove("active"),!0===k){n.triggerEvent(a.querySelector(".cat-item-all"),"click");return}}else{var c=this.querySelector(".cat-item.active");
c&&c.classList.remove("active");h.classList.contains("cat-item-all")||(w=h.getAttribute("class").replace(/(current-cat)|(cat-item)|(-)|(active)/g,"").replace(" ",""));h.dataset.p||(h.dataset.p=1);!0===l&&(h.dataset.done&&a.parentNode.classList.add("tb_hide_loadmore"),h.dataset.empty?a.parentNode.classList.add("tb_empty_filter"):a.parentNode.classList.remove("tb_empty_filter"));if(!0!==l||h.dataset.done||h.dataset.loading||h.dataset.init)!0===l&&h.dataset.loading&&delete h.dataset.loading;else{h.dataset.init=
!0;h.dataset.loading=!0;t.parentNode.classList.contains("tf_ajax_filter_loading")?x.abort():t.parentNode.classList.add("tf_ajax_filter_loading");x=new AbortController;const J=this;c=new FormData;c.append("action","themify_ajax_load_more");c.append("type","module");c.append("module",a.dataset.el);c.append("id",a.dataset.id);c.append("page",h.dataset.p);"*"!==w&&c.append("tax",w);if(!0===k){var z=a.querySelector(".tf_ajax_sort_order.active"),A=a.querySelector(".tf_ajax_sort_order_by .active");z&&c.append("order",
z.dataset.type);A&&c.append("orderby",A.dataset.orderBy)}fetch(themify_vars.ajax_url,{signal:x.signal,headers:new Headers({"X-Requested-With":"XMLHttpRequest"}),method:"POST",body:c}).then(q=>q.text()).then(q=>{q=(new DOMParser).parseFromString(q,"text/html");var m=q.querySelector("."+a.dataset.el+" .loops-wrapper");const O=q.querySelector(".load-more-button");if(null!==m){m=n.convert(m.children);var I=q.createDocumentFragment();const T=m.length;if(void 0!==m[0]){for(let K=0;K<T;++K)m[K].className+=
" tf_opacity",I.appendChild(m[K]);if(a.dataset.reload){var L=t.querySelectorAll(".post");delete a.dataset.reload}t.appendChild(I)}null===O?(h.dataset.done=!0,a.parentNode.className+=" tb_hide_loadmore"):"*"===w&&(I=t.parentNode.querySelector(".load-more-button"))&&(I.href=I.dataset.url,I.dataset.page=O.dataset.page);0<m.length?(h.dataset.p=parseInt(h.dataset.p)+1,n.trigger("tf_isotop_append",[{"new":m,remove:L},t,()=>{t.parentNode.classList.remove("tf_ajax_filter_loading");E.bind(J)(y)}])):(h.dataset.empty=
!0,null===t.parentNode.querySelector(".tb_empty_filter_msg")&&(L=q.createElement("span"),L.className="tb_empty_filter_msg tf_hide",L.innerText=themify_vars.nop,t.parentNode.appendChild(L)),t.parentNode.classList.remove("tf_ajax_filter_loading"),E.bind(J)(y))}}).catch(q=>{console.warn("Ajx filter error!",q)});return}h.className+=" active"}if(null!==t){a.hasAttribute("data-hash")&&(h.classList.contains("active")&&h.dataset.id?location.hash=h.dataset.id:-1<u.location.hash.indexOf(a.dataset.hash)&&(u.history&&
u.history.pushState?u.history.pushState("","",u.location.pathname):u.location.href=u.location.href.replace(/#.*$/,"#")));c=u.Isotope.data(t);if(t.classList.contains("auto_tiles")){z=t.children;for(A=z.length-1;-1<A;--A)z[A].classList.contains("post")&&!z[A].style.width&&(z[A].style.width=z[A].offsetWidth+"px",z[A].style.height=z[A].offsetHeight+"px");t.classList.add("masonry-done");c||(680>n.w?c=0:(c=u.getComputedStyle(t).getPropertyValue("grid-row-gap"))?c=parseFloat(c):"0"!=c&&(c=5),c=new Isotope(t,
{layoutMode:"packery",packery:{gutter:c},resize:!1}));if("*"===w){const J=function(){this.off("arrangeComplete",J);setTimeout(()=>{if("*"===w){const q=this.element.children;for(let m=q.length-1;-1<m;--m)q[m].classList.contains("post")&&(q[m].style.width=q[m].style.height=q[m].style.position=q[m].style.left=q[m].style.top="");this.element.classList.remove("masonry-done");this.element.style.height=this.element.style.position=""}},20)};c.once("arrangeComplete",J)}}c&&(w=!0===l?"*"===w?".initial-cat":
".ajax-cat-"+w:"*"===w?w:".cat-"+w.trim()+",.cat-all",c.arrange({filter:w}),d&&d.call(c,h,w))}}else if(!0===k&&(c=y.target.closest(".tf_ajax_sort_order")||y.target.closest("[data-order-by]")?y.target:null,null!==c&&!c.classList.contains("active"))){(z=c.parentNode.querySelector(".active"))&&z.classList.remove("active");c.className+=" active";for(c=f-1;-1<c;--c)delete e[c].dataset.init,delete e[c].dataset.done,delete e[c].dataset.p;a.dataset.reload=!0;if(c=a.querySelector(".cat-item.active")||a.querySelector(".cat-item-all"))c.classList.remove("active"),
n.triggerEvent(c,"click")}};a.addEventListener("click",E);b=u.location.hash.replace("#","");""!==b&&"#"!==b&&(b=a.querySelector('[data-id="'+b+'"]'))&&b.click()}}}).on("tf_isotop_layout",N).on("tfsmartresize",N).on("tf_isotop_append",(a,b,d)=>{const e=a["new"].length,f=P(b),p=void 0!==u.Isotope?u.Isotope.data(b):null;null===M&&(M=/^((?!chrome|android).)*safari/i.test(navigator.userAgent));let l=0;for(let k=0;k<e;++k)a["new"][k].style.display="none",n.imagesLoad(a["new"][k],r=>{if(M){const g=r.querySelector("img[srcset]");
null!==g&&(g.outerHTML=g.outerHTML)}++l;p&&p.appended(r);a["new"][k].classList.remove("tf_opacity");if(l===e){if(p||f[0].classList.contains("auto_tiles"))f[0].classList.contains("auto_tiles")&&n.autoTiles(f[0]),p&&a.remove&&p.remove(a.remove);for(r=0;r<e;++r)n.lazyScroll(n.convert(n.selectWithParent("[data-lazy]",a["new"][r])).reverse(),!0);n.fontAwesome();d()}})})})(jQuery,Themify,window,document);
