'use strict';((p,e,n,r)=>{let u=null,v=null;const w=[],A=a=>new IntersectionObserver((b,c)=>{for(let d=b.length-1;-1<d;--d)!0===b[d].isIntersecting&&(null===a.button?c.disconnect():z(a))},{threshold:.1}),x=(a,b)=>{null===v&&(v=new IntersectionObserver((c,d)=>{for(d=c.length-1;-1<d;--d)!0===c[d].isIntersecting&&n.history.replaceState(null,null,c[d].target.getAttribute("data-tf-history"))},{rootMargin:"100% 0px -100% 0px"}));a.setAttribute("data-tf-history",e.UpdateQueryString("tf-scroll",null,b));
v.observe(a)},B=(a,b,c)=>{e.lazyScroll(e.selectWithParent("[data-lazy]",a),!0);const d=p(a);!c&&void 0!==n.Isotope&&n.Isotope.data(a)&&(a=a.previousElementSibling,null!==a&&a.classList.contains("post-filter")&&(a=a.querySelector(".cat-item.active:not(.cat-item-all)"),void 0!==a&&p(a).trigger("click.tf_isotop_filter")));d.triggerHandler("infinitebeforeloaded.themify",b);e.trigger("infinitebeforeloaded.themify",[d,b]);setTimeout(()=>{e.trigger("tf_isotop_layout")},1500)},C=(a,b,c)=>{const d=a.length,
f=p(b),k=void 0!==n.Isotope?n.Isotope.data(b):null;null===u&&(u=/^((?!chrome|android).)*safari/i.test(navigator.userAgent));a[0].className+=" tf_firstitem";var m=0;for(b=0;b<d;++b)a[b].style.opacity=0,e.imagesLoad(a[b],g=>{if(u){var l=g.querySelector("img[srcset]");null!==l&&(l.outerHTML=l.outerHTML)}++m;k&&k.appended(g);g.style.opacity="";if(m===d){if(k||f[0].classList.contains("auto_tiles"))c.ajax_loading||(g=f[0].previousElementSibling,null!==g&&g.classList.contains("post-filter")&&e.body.triggerHandler("themify_isotop_filter",
[g])),f[0].classList.contains("auto_tiles")&&e.autoTiles(f[0]);g=p(a);for(l=0;l<d;++l)e.lazyScroll(e.convert(e.selectWithParent("[data-lazy]",a[l])).reverse(),!0);f.triggerHandler("infiniteloaded.themify",[g]);e.trigger("infiniteloaded.themify",[f,g]);if("scroll"===c.scrollToNewOnLoad){g=f[0].getElementsByClassName("tf_firstitem");g=g[g.length-1];g=p(g).offset().top;l=800<=g?800+Math.abs(g/1E3*100):800;const h=r.getElementById("headerwrap");null!==h&&(h.classList.contains("fixed-header")||e.body[0].classList.contains("fixed-header"))&&
(g-=p(h).outerHeight(!0));(!1===c.scrollThreshold||g-r.docElement.scrollTop>c.scrollThreshold)&&e.scrollTo(g,l)}e.fontAwesome();e.loadWPEmbed(r.getElementsByClassName("wp-embedded-content"));e.checkLargeImages()}})},z=a=>{if(!0!==a.isWorking){a.isWorking=!0;a.status.classList.add("tf_scroll_request");var b={headers:new Headers({"X-Requested-With":"XMLHttpRequest"})};if(a.filter){var c=a.filter.hasAttribute("data-sort"),d=a.filter.querySelector(".cat-item.active");if(d){a.ajax_loading=d;var f=new FormData;
f.append("action","themify_ajax_load_more");f.append("module",a.filter.dataset.el);f.append("id",a.filter.dataset.id);f.append("page",d.dataset.p);d.classList.contains("cat-item-all")||(d=d.getAttribute("class").replace(/(current-cat)|(cat-item)|(-)|(active)/g,"").replace(" ",""),f.append("tax",d.trim()));c&&(c=a.filter.querySelector(".tf_ajax_sort_order.active"),d=a.filter.querySelector(".tf_ajax_sort_order_by .active"),c&&f.append("order",c.dataset.type),d&&f.append("orderby",d.dataset.orderBy));
b.method="POST";b.body=f;f=themify_vars.ajax_url}}a.ajax_loading||(f=e.UpdateQueryString("tf-scroll",1,a.button.href));fetch(f,b).then(k=>k.text()).then(k=>{var m=(new DOMParser).parseFromString(k,"text/html");k=m.querySelector(a.id);const g=e.UpdateQueryString("tf-scroll",null,a.button.href);var l=a.container;let h=null;if(null!==k){B(l,m,!!a.ajax_loading);const t=m.createDocumentFragment(),q=e.convert(k.children);h=k.getElementsByClassName("load-more-button")[0];h||(h=k.nextElementSibling);null!==
h&&(h.classList.contains("load-more-button")||(h=h.children[0]),h&&h.classList.contains("load-more-button")||(h=null));h&&"A"!==h.tagName&&((h=h.children[0])&&"A"===h.tagName||(h=null));if(void 0!==q[0]){for(let y=0,D=q.length;y<D;++y)t.appendChild(q[y]);l.appendChild(t);a.history&&x(q[0],g);C(q,l,a)}else h=null;a.ajax_loading&&null===h&&(a.ajax_loading.dataset.done=!0,a.filter.parentNode.classList.add("tb_hide_loadmore"))}a.ajax_loading?(a.ajax_loading.dataset.p=parseInt(a.ajax_loading.dataset.p)+
1,a.isWorking=null):(null===h?(a.button.remove(),a.button=null):(l=e.UpdateQueryString("tf-scroll",1,h.href),void 0!==a.prefetchBtn&&void 0===w[l]&&(w[l]=!0,a.prefetchBtn.setAttribute("href",l)),a.button.href=l,n.addEventListener("scroll",function(t,q){t.isWorking=null}.bind(null,a),{passive:!0,once:!0})),void 0!==n.ga&&(m=m.createElement("a"),m.href=g,ga("set","page",m.pathname),ga("send","pageview")),a.history&&n.history.replaceState(null,null,g));a.status.classList.remove("tf_scroll_request");
return k}).catch(k=>{console.warn("InfiniteScroll error.",k)})}};e.on("tf_infinite_init",(a,b)=>{a instanceof jQuery&&(a=a[0]);let c=a.getElementsByClassName("load-more-button")[0];c||(c=a.nextElementSibling);if(c){var d=c;if(!c.classList.contains("load-more-button")&&(c=c.children[0],!c||!c.classList.contains("load-more-button"))||"A"!==c.tagName&&(c=c.children[0],!c||"A"!==c.tagName)||!b.id&&(b.id=a.getAttribute("id"),b.id=b.id?"#"+b.id:"."+a.className.split(" ").join("."),!b.id))return;e.cssLazy.tf_infinite||
(e.cssLazy.tf_infinite=!0,e.LoadCss(e.url+"/css/modules/infinite.css"));var f=r.createElement("div");f.className="tf_load_status tf_loader tf_clear tf_hide";a.parentNode.insertBefore(f,a.nextSibling);b.status=f;b.button=c;b.container=a;a.classList.contains("tb_ajax_pagination")&&(f=a.previousElementSibling)&&f.classList.contains("post-filter")&&(b.filter=f);!1!==b.scrollThreshold?n.addEventListener("scroll",()=>{const k=r.createElement("link"),m=e.UpdateQueryString("tf-scroll",1,b.button.getAttribute("href"));
k.setAttribute("as","document");k.setAttribute("rel","prefetch");k.setAttribute("href",m);b.button.parentNode.insertBefore(k,b.button.nextSibling);b.prefetchBtn=k;w[m]=!0;x(b.container.children[0],n.location.href);A(b).observe(d)},{passive:!0,once:!0}):(x(a.children[0],n.location.href),c.style.display="inline-block",c.addEventListener("click",k=>{k.preventDefault();delete b.ajax_loading;z(b)}))}})})(jQuery,Themify,window,document);
