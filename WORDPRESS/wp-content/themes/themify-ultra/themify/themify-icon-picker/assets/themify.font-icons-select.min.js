'use strict';var Themify_Icons={};
(function(c){const n={};Themify_Icons={target:"",ajaxurl:tfIconPicker.ajaxurl,top:c(window.top.document),loader:null,init(){const b=Themify_Icons;b.top.on("click",".themify_fa_toggle",function(a){a.preventDefault();a.stopPropagation();a=c(this);b.target=a.attr("data-target")?c(a.attr("data-target"),b.top):a.prev();b.showLightbox(b.target.val())}).on("click","#themify_lightbox_fa .lightbox_container a:not(.external-link)",function(a){a.preventDefault();a.stopPropagation();b.setIcon(c(this).data("icon"))}).on("click",
"#themify_lightbox_overlay, #themify_lightbox_fa .close_lightbox",function(a){a.preventDefault();a.stopPropagation();b.closeLightbox()}).on("change",".tf-icon-group-select input",function(a){a=c(this);const e=this.value;c("#themify_lightbox_fa .tf-font-group",b.top).hide().filter('[data-group="'+e+'"]').show();"fontawesome"===e&&"true"!==a.attr("data-icons")&&a.attr("data-icons",!0);b.getByCategory()});b.Category();b.Search()},getByCategory(b){const a=this,e=c("#themify_lightbox_fa",a.top),f=e.find(".tf-icon-group-select input:checked").val();
n[f]?(b&&b(),a.Loader("spinhide")):(a.Loader("show"),n[f]=!0,c.ajax({url:a.ajaxurl,data:{action:"tf_icon_get_by_type",type:f},type:"POST",success:function(d){var k=a.top[0],g=k.createElement("div");g.innerHTML=d;var h=g.getElementsByClassName("tf_icons_groups"),l=g.querySelector("#tf_svg");g=k.getElementById("tf_svg");if(0<h.length){for(d=h.length-1;-1<d;--d){var m=e[0].querySelector("#"+h[d].id+" .row");m&&(m.innerHTML=h[d].innerHTML)}if(l){if(g){h=g.getElementsByTagName("symbol");l=l.getElementsByTagName("symbol");
k=k.createDocumentFragment();d={};for(m=h.length-1;-1<m;--m)d[h[m].id]=!0;for(h=l.length-1;-1<h;--h)d[l[h].id]||k.appendChild(l[h]);g.firstChild.appendChild(k)}else k.appendChild(l);if(window.top!==window.self)if(k=document.getElementById("tf_svg")){h={};l=document.createDocumentFragment();d=k.getElementsByTagName("symbol");g=g.getElementsByTagName("symbol");for(m=d.length-1;-1<m;--m)h[d[m].id]=!0;for(d=g.length-1;-1<d;--d)h[g[d].id]||l.appendChild(g[d].cloneNode(!0));k.firstChild.appendChild(l)}else document.appendChild(g.cloneNode(!0))}}else if(g=
e[0].querySelector('.tf-font-group[data-group="'+f+'"]'))g.innerHTML=d;b&&b();a.Loader("spinhide")}}))},showLightbox(b){const a=this;a.Loader("show");a.loadIconsList(function(){a.getByCategory(function(){const e=a.top.scrollTop()+80,f=c("#themify_lightbox_fa",a.top),d=c("#themify_lightbox_overlay",a.top);b&&c("a",f).removeClass("selected").filter('[data-icon="'+b+'"]').addClass("selected");0===d.length&&c("body",a.top).hasClass("themify_builder_active")&&c("body",a.top).append(d);if(0<f.find("a.selected").length){const k=
f.find("a.selected").closest(".tf-font-group").data("group");f.find('.tf-icon-group-select input[value="'+k+'"]').click()}else f.find(".tf-icon-group-select input:first").change();c("#themify-search-icon-input",f).val("").trigger("keyup");c(".themify-lightbox-icon".$lightbox).find(".selected").trigger("click");d.show();f.css("top",a.top.height()).show().animate({top:e},600)})})},loadIconsList(b){const a=this;if(0<c("#themify_lightbox_fa",a.top).length)b();else{let e=!1,f=!1;window.top.Themify.LoadCss(tfIconPicker.url+
"styles.css",null,null,null,function(){e=!0;!0===f&&b()});c.ajax({url:a.ajaxurl,data:{action:"tf_icon_picker_lightbox"},type:"POST",success:function(d){c("body",a.top).append(d);f=!0;!0===e&&b()}})}},setIcon(b){Themify_Icons.target.val(b).trigger("change");"undefined"!==typeof Themify&&Themify.triggerEvent(Themify_Icons.target[0],"change");let a=c(".fa:not(.icon-close)",Themify_Icons.target.parent().parent());0>=a.length&&(a=c(".font-icon-preview i",Themify_Icons.target.parent().parent()));0<a.length&&
c.ajax({url:Themify_Icons.ajaxurl,data:{action:"tf_get_icon",tf_icon:b},success:function(e){e.match(/<svg/)?a.empty().html(e):a.removeClass().addClass(e)}});Themify_Icons.closeLightbox()},closeLightbox(){c("#themify_lightbox_fa",Themify_Icons.top).animate({top:Themify_Icons.top.height()},400,function(){c("#themify_lightbox_overlay",Themify_Icons.top).hide();c(this).hide()})},Category(){const b=this;b.top.on("click",".themify-lightbox-icon li",function(a){a.preventDefault();a.stopPropagation();a=c(this).hasClass("selected");
c(this).closest(".themify-lightbox-icon").find(".selected").removeClass("selected");if(a)c(this).closest(".lightbox_container").find("section").fadeIn("fast",function(){c("#themify-search-icon-input",b.top).trigger("keyup")});else{a=c(this).data("id");const e=c("#"+a,b.top);c(this).addClass("selected");0<e.length&&c(this).closest(".lightbox_container").find("section").not("#"+a).fadeOut("fast",function(){e.fadeIn("normal")})}b.getByCategory()})},Search(){c.expr.pseudos.contains=c.expr.createPseudo(function(b){return function(a){return 0<=
c(a).text().toUpperCase().indexOf(b.toUpperCase())}});Themify_Icons.top.on("keyup","#themify-search-icon-input",function(){var b=this.value.trim(),a=c("#themify_lightbox_fa",Themify_Icons.top).find(".tf-font-group a"),e=c("#themify_lightbox_fa",Themify_Icons.top).find("section");b?(e.hide(),a.hide().filter(":contains("+b.toUpperCase()+")").show().each(function(){c(this).closest("section").show()})):(e.show(),a.show())})},Loader(b){"undefined"!==typeof ThemifyBuilderCommon?ThemifyBuilderCommon.showLoader(b):
(null===this.loader&&(this.loader=c(".tb_alert",this.top)),0>=this.loader.length||("show"===b?this.loader.addClass("busy").fadeIn(800):"spinhide"===b&&this.loader.removeClass("busy").fadeOut(800)))}};Themify_Icons.init()})(jQuery);
