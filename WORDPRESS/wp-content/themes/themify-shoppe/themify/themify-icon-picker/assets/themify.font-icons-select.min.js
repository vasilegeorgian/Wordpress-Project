var Themify_Icons={};!function($){'use strict';const t={};(Themify_Icons={target:'',ajaxurl:tfIconPicker.ajaxurl,top:$(window.top.document),loader:null,init(){const i=Themify_Icons;i.top.on('click','.themify_fa_toggle',function(t){t.preventDefault(),t.stopPropagation();const e=$(this);i.target=e.attr('data-target')?$(e.attr('data-target'),i.top):e.prev(),i.showLightbox(i.target.val())}).on('click','#themify_lightbox_fa .lightbox_container a:not(.external-link)',function(t){t.preventDefault(),t.stopPropagation(),i.setIcon($(this).data('icon'))}).on('click','#themify_lightbox_overlay, #themify_lightbox_fa .close_lightbox',function(t){t.preventDefault(),t.stopPropagation(),i.closeLightbox()}).on('change','.tf-icon-group-select input',function(t){const e=$(this),o=this.value;$('#themify_lightbox_fa .tf-font-group',i.top).hide().filter('[data-group="'+o+'"]').show(),'fontawesome'===o&&"true"!==e.attr('data-icons')&&e.attr('data-icons',!0),i.getByCategory()}),i.Category(),i.Search()},getByCategory(y){const m=this,_=$('#themify_lightbox_fa',m.top),x=_.find('.tf-icon-group-select input:checked').val();t[x]?(y&&y(),m.Loader('spinhide')):(m.Loader('show'),t[x]=!0,$.ajax({url:m.ajaxurl,data:{action:'tf_icon_get_by_type',type:x},type:'POST',success:function(t){const e=m.top[0],o=e.createElement('div'),i=(o.innerHTML=t,o.getElementsByClassName('tf_icons_groups')),n=o.querySelector('#tf_svg'),s=e.getElementById('tf_svg');if(0<i.length){for(let o=i.length-1;-1<o;--o){let t=i[o].id,e=_[0].querySelector('#'+t+' .row');e&&(e.innerHTML=i[o].innerHTML)}if(n){if(s){const a=s.getElementsByTagName('symbol'),l=n.getElementsByTagName('symbol'),c=e.createDocumentFragment(),h={};for(let t=a.length-1;-1<t;--t)h[a[t].id]=!0;for(let t=l.length-1;-1<t;--t)h[l[t].id]||c.appendChild(l[t]);s.firstChild.appendChild(c)}else e.appendChild(n);if(window.top!==window.self){const r=document.getElementById('tf_svg');if(r){const f={},d=document.createDocumentFragment(),g=r.getElementsByTagName('symbol'),p=s.getElementsByTagName('symbol');for(let t=g.length-1;-1<t;--t)f[g[t].id]=!0;for(let t=p.length-1;-1<t;--t)f[p[t].id]||d.appendChild(p[t].cloneNode(!0));r.firstChild.appendChild(d)}else document.appendChild(s.cloneNode(!0))}}}else{const u=_[0].querySelector('.tf-font-group[data-group="'+x+'"]');u&&(u.innerHTML=t)}y&&y(),m.Loader('spinhide')}}))},showLightbox(n){const s=this;s.Loader('show'),s.loadIconsList(function(){s.getByCategory(function(){const t=s.top.scrollTop()+80,e=$("#themify_lightbox_fa",s.top),o=$('#themify_lightbox_overlay',s.top);if(n&&$('a',e).removeClass('selected').filter('[data-icon="'+n+'"]').addClass('selected'),0===o.length&&$('body',s.top).hasClass('themify_builder_active')&&$('body',s.top).append(o),0<e.find('a.selected').length){const i=e.find('a.selected').closest('.tf-font-group').data('group');e.find('.tf-icon-group-select input[value="'+i+'"]').click()}else e.find('.tf-icon-group-select input:first').change();$('#themify-search-icon-input',e).val('').trigger('keyup'),$('.themify-lightbox-icon'.$lightbox).find('.selected').trigger('click'),o.show(),e.css('top',s.top.height()).show().animate({top:t},600)})})},loadIconsList(i){const n=this;if(0<$('#themify_lightbox_fa',n.top).length)i();else{let e=!1,o=!1;window.top.Themify.LoadCss(tfIconPicker.url+'styles.css',null,null,null,function(){(e=!0)===o&&i()}),$.ajax({url:n.ajaxurl,data:{action:'tf_icon_picker_lightbox'},type:'POST',success:function(t){$('body',n.top).append(t),(o=!0)===e&&i()}})}},setIcon(t){Themify_Icons.target.val(t).trigger('change'),'undefined'!=typeof Themify&&Themify.triggerEvent(Themify_Icons.target[0],'change');let e=$('.fa:not(.icon-close)',Themify_Icons.target.parent().parent());0<(e=e.length<=0?$('.font-icon-preview i',Themify_Icons.target.parent().parent()):e).length&&$.ajax({url:Themify_Icons.ajaxurl,data:{action:'tf_get_icon',tf_icon:t},success:function(t){t.match(/<svg/)?e.empty().html(t):e.removeClass().addClass(t)}}),Themify_Icons.closeLightbox()},closeLightbox(){$('#themify_lightbox_fa',Themify_Icons.top).animate({top:Themify_Icons.top.height()},400,function(){$('#themify_lightbox_overlay',Themify_Icons.top).hide(),$(this).hide()})},Category(){const n=this;n.top.on('click','.themify-lightbox-icon li',function(t){t.preventDefault(),t.stopPropagation();let e=$(this).hasClass('selected');if($(this).closest('.themify-lightbox-icon').find('.selected').removeClass('selected'),e)$(this).closest('.lightbox_container').find('section').fadeIn('fast',function(){$('#themify-search-icon-input',n.top).trigger('keyup')});else{const o=$(this).data('id'),i=$('#'+o,n.top);$(this).addClass('selected'),0<i.length&&$(this).closest('.lightbox_container').find('section').not('#'+o).fadeOut('fast',function(){i.fadeIn('normal')})}n.getByCategory()})},Search(){$.expr.pseudos.contains=$.expr.createPseudo(function(e){return function(t){return 0<=$(t).text().toUpperCase().indexOf(e.toUpperCase())}}),Themify_Icons.top.on('keyup','#themify-search-icon-input',function(){var t=this.value.trim(),e=$('#themify_lightbox_fa',Themify_Icons.top).find('.tf-font-group a'),o=$('#themify_lightbox_fa',Themify_Icons.top).find('section');t?(o.hide(),e.hide().filter(':contains('+t.toUpperCase()+')').show().each(function(){$(this).closest('section').show()})):(o.show(),e.show())})},Loader(t){"undefined"!=typeof ThemifyBuilderCommon?ThemifyBuilderCommon.showLoader(t):(null===this.loader&&(this.loader=$('.tb_alert',this.top)),this.loader.length<=0||('show'===t?this.loader.addClass('busy').fadeIn(800):'spinhide'===t&&this.loader.removeClass('busy').fadeOut(800)))}}).init()}(jQuery);