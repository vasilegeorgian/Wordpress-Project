!function($,s,e){'use strict';const t=function(){this.form=e.getElementById('tb_admin_new_gs'),this.loadAddNewForm(),this.addNew(),this.deleteStyle(),this.restore(),this.scalePreview()},n=themifyGlobalStylesVars;t.prototype.addNew=function(){const t=e.getElementsByClassName('tb_admin_save_gs')[0],a=this;t&&t.addEventListener('click',function(e){e.preventDefault(),a.validateForm()?(e.target.text=n.messages.creating,$.ajax({type:'POST',url:n.ajaxurl,dataType:'json',data:{action:'tb_save_custom_global_style',nonce:n.nonce,form_data:$(a.form).serialize()},success(t){'failed'===t.status?(alert(t.msg),e.target.text=n.messages.create):'success'===t.status?s.location=t.url:e.target.text=n.messages.create}})):alert(n.messages.formValid)})},t.prototype.validateForm=function(){let a=!0;return $.each($(this.form).serializeArray(),function(t,e){if(''==e.value)return a=!1}),a},t.prototype.loadAddNewForm=function(){const t=$('.tb_add_new_gs');0!==t.length&&t.magnificPopup({type:'inline',midClick:!0,callbacks:{close(){e.getElementById("tb_admin_new_gs").reset()}}})},t.prototype.deleteStyle=function(){const t=$('.tb_remove_gs');0!==t.length&&t.on('click',function(t){t.preventDefault();const e=$(this),a=e.parents('.tb_admin_gs_list').data('list'),s='publish'===a?themifyGlobalStylesVars.messages.deleteConfirm:themifyGlobalStylesVars.messages.deleteConfirm2;confirm(s)&&(e.parents('.tb_gs_element').fadeOut(),$.ajax({type:'POST',url:n.ajaxurl,dataType:'json',data:{action:'tb_delete_global_style',nonce:n.nonce,status:a,id:e.attr('data-id')},success(t){'failed'===t.status&&(alert(t.msg),e.parents('.tb_gs_element').fadeIn())}}))})},t.prototype.restore=function(){const t=$('.tb_gs_restore');0!==t.length&&t.on('click',function(t){t.preventDefault();const e=$(this);e.parents('.tb_gs_element').fadeOut(),$.ajax({type:'POST',url:n.ajaxurl,dataType:'json',data:{action:'tb_restore_global_style',nonce:n.nonce,id:e.attr('data-id')},success(t){'failed'===t.status&&(alert(t.msg),e.parents('.tb_gs_element').fadeIn())}})})},t.prototype.scalePreview=function(){$(".themify_builder_content").each(function(){let t=$(this),e=t.parent(),a=Math.min(e.width()/t.outerWidth(),e.height()/t.outerHeight());t.css({transform:"translate(-50%, -50%) scale("+a+")"})})},new t}(jQuery,window,document);