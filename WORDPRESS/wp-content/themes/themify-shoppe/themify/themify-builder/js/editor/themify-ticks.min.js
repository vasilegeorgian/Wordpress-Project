var TB_Ticks;!function($){'use strict';TB_Ticks={interval:null,time:2e4,$el:null,options:null,request:null,iframe:null,init(e,t){var i=TB_Ticks;return i.options=e,i.time=1e3*parseInt(e.tick),i.$el=$('#tmpl-builder-restriction'),i.iframe=t,i},ticks(){var r=TB_Ticks;function e(e){var t;e&&1!==Number(e)&&(r.request.abort(),clearInterval(r.interval),document.body.insertAdjacentHTML('beforeend',e),r.$el=$('#tmpl-builder-restriction'),r.show(),r.iframe.ThemifyBuilderCommon.showLoader('show'),(t=r.iframe.tb_app).Views.Toolbar.prototype.Revisions.saveRevision(r.$el.find('.tb_locked_revision').text(),function(){r.iframe.ThemifyBuilderCommon.showLoader('hide'),t.Models.Registry.destroy()}))}return null!==r.interval&&clearInterval(r.interval),r.interval=setInterval(function(){r.ajax(e,null)},r.time),$(document).off('heartbeat-tick',e).on('heartbeat-tick',function e(t,i){void 0!==i['wp-refresh-post-lock'].lock_error&&(r.request.abort(),clearInterval(r.interval),$(document).off('heartbeat-tick',e))}),r},ajax(e,t){var i=TB_Ticks;i.request=$.ajax({type:'POST',url:themify_vars.ajax_url,data:{action:'tb_update_tick',postID:i.options.postID,take:t},success:e})},isEditing(){return document.body.classList.contains('tb_restriction')},show(){var e=TB_Ticks;e.$el.show(),e.close(),e.takeOver()},hide(){TB_Ticks.$el.hide()},takeOver(){var t=TB_Ticks;Themify.body.one('click','.tb_locked_btn',function(e){e.preventDefault(),e.stopPropagation(),t.ajax(function(){Themify.is_builder_active||Themify.body.hasClass('wp-admin')?t.ticks():(Themify.body.removeClass('tb_restriction'),$('.js-turn-on-builder').first().trigger('click')),t.$el.remove()},1)})},close(){this.$el.one('click','.tb_locked_close',this.hide)}}}(jQuery);