((v,E,C)=>{'use strict';let $,a=!1;const e=()=>{let l;if($=jQuery,!E.wp||!wp.customize){let n=C.getElementsByClassName('themify_builder_content'),e=C.getElementsByClassName('toggle_tb_builder')[0],r=!1;l=!!e&&e.getElementsByClassName('tb_front_icon')[0].getAttribute('data-id');for(let a=n.length-1;-1<a;--a){let e=n[a].getAttribute('data-postid'),t=C.createElement('a'),i=C.createElement('span');e===l&&(r=!0),t.href='javascript:void(0);',t.className='tb_turn_on js-turn-on-builder',i.className='dashicons dashicons-edit',i.setAttribute('data-id',e),t.appendChild(i);const o=n[a].dataset.label||n[a].parentNode.dataset.label,s=C.createElement('span');s.innerHTML=o||tbLoaderVars.turnOnBuilder,t.appendChild(s),n[a].insertAdjacentElement(o?'beforeBegin':'afterEnd',t)}if(!e&&!(e=C.getElementsByClassName('js-turn-on-builder')[0])){const t=C.getElementsByClassName('dashicons-edit');l=t[0]?t[0].getAttribute('data-id'):null}e&&(!1===r?(l=null,e.classList.add('tb_disabled_turn_on')):e.classList.remove('tb_disabled_turn_on'))}let g=0<E.location.href.indexOf('?')?'&':'?';g=E.location.href.replace(E.location.hash,'').replace('#','')+g+'tb-preview=1&ver='+E.themify_vars.version,v.body.on('click.tb_loading','.toggle_tb_builder:not(.tb_disabled_turn_on) > a, a.js-turn-on-builder',function(e){e.preventDefault(),e.stopPropagation(),a=!0;const t=this.classList.contains('tb_restriction');if(v.LoadAsync(tbLocalScript.builder_url+'/js/editor/themify-ticks.js',()=>{t&&(TB_Ticks.init(tbLocalScript.ticks).show(),init())},null,null,()=>!!E.TB_Ticks),v.body.off('click.tb_loading'),!t){const d=this.classList.contains('js-turn-on-builder')?this.childNodes[0].getAttribute('data-id'):l;if(d&&!this.parentNode.classList.contains('tb_disabled_turn_on')){v.lazyDisable=v.lazyScrolling=!0,null!==v.observer&&v.observer.disconnect();let l,o=[],a=$(C).scrollTop(),s=v.convert(C.head.getElementsByTagName('link')).concat(v.convert(C.head.getElementsByTagName('style')));const c=v.body.children(),m=C.createElement('div'),i=C.createElement('div'),n=C.createElement('div'),r=C.createElement('div'),_=C.createElement('div'),b=C.createElement('iframe'),p=new Date;if(m.className='tb_workspace_container',i.className='tb_vertical_bars',n.id='tb_left_bar',r.id='tb_right_bar',n.className=r.className='tb_middle_bar',_.className='tb_vertical_change_tooltip',b.className='tb_iframe',b.id=b.name='tb_iframe',b.scrolling=v.isTouch?'no':'yes',b.src=g+'&tb-id='+d,v.off('builder_load_module_partial'),$(C).off('ajaxComplete'),null!==tbLoaderVars.styles)for(let e in tbLoaderVars.styles)''!==tbLoaderVars.styles[e]&&(v.LoadCss(e,tbLoaderVars.styles[e]),o[e+'?ver='+tbLoaderVars.styles[e]]=1);l=C.createElement('div');const u=C.createElement('div'),h=C.createElement('div'),f=C.getElementsByClassName('tb_front_icon')[0];l.id='tb_alert',l.className='tb_busy',u.id='tb_fixed_bottom_scroll',u.className='tb_fixed_scroll',h.id='builder_progress',h.appendChild(C.createElement('div')),C.body.insertAdjacentElement('afterbegin',u),C.body.appendChild(l),f&&f.parentNode.appendChild(h),v.on('tb_load_iframe',()=>{i.appendChild(n),i.appendChild(b),i.appendChild(r),i.appendChild(_),m.appendChild(i),b.addEventListener('load',function(){const n=this.contentWindow;let r;v.on('themify_builder_ready',()=>{$(l).fadeOut(100,function(){this.classList.remove('tb_busy')});const e=v.body[0].classList.contains('archive');let t='themify_builder_active builder-breakpoint-desktop page-loaded';v.isTouch&&(t+=' tb_touch'),e&&(t+=' archive'),'1'===tbLoaderVars.isGlobalStylePost&&(t+=' gs_post'),v.body[0].className=t,v.body[0].removeAttribute('style'),m.style.display='block';const i=n.tb_app.Instances.Builder[0].$el.offset().top;i>a&&(a=i),n.scrollTo(0,a),v.iframe=b,v.is_builder_active=!0,setTimeout(()=>{c.hide();for(let i=s.length-1;-1<i;--i)if(s[i]&&s[i].parentNode){let e=s[i].href,t=s[i].id;e?o[e]&&'tf_base-css'!==s[i].id||-1!==e.indexOf('wp-includes')||-1!==e.indexOf('admin-bar')||(s[i].setAttribute('disabled',!0),s[i].parentNode.removeChild(s[i])):'tf_fonts_style'!==t&&'tf_lazy_common'!==t&&s[i].parentNode.removeChild(s[i])}s=o=tbLoaderVars=l=null,$('.themify_builder_content,#wpadminbar,header').remove(),c.filter('ul,a,video,audio').filter(':not(:has(link))').remove();const t=['scroll','tfsmartresize','debouncedresize','throttledresize','resize','mouseenter','keydown','keyup','mousedown','assignVideo'],i=$(E),a=$(C);for(let e=t.length-1;-1<e;--e)i.off(t[e]),a.off(t[e]),v.body.off(t[e]);C.documentElement.removeAttribute('style'),C.documentElement.removeAttribute('class');const e=n.tbLocalScript.ticks;e.postID=d,r.hasClass('tb_restriction')?setTimeout(()=>{C.body.appendChild(r.find('#tmpl-builder-restriction')[0]),TB_Ticks.init(e,n).show()},1e3):setTimeout(()=>{TB_Ticks.init(e,n).ticks()},5e3),setTimeout(()=>{const t=['ThemifyBuilderModuleJs','c','_wpemojiSettings','twemoji','themifyScript','tbLocalScript','tbScrollHighlight','google','ThemifyGallery','Animation','$f','Froogaloop','SliderProSlide','SliderProUtils','ThemifySlider','FixedHeader','LayoutAndFilter','WOW','Waypoint','$slidernav','google','Microsoft','Rellax','module$contents$MapsEvent_MapsEvent','module$contents$mapsapi$overlay$OverlayView_OverlayView','wc_add_to_cart_params','woocommerce_params','wc_cart_fragments_params','wc_single_product_params','tf_mobile_menu_trigger_point','themifyMobileMenuTrigger'];for(let e=t.length-1;-1<e;--e)E[t[e]]&&(E[t[e]]=null);v.events={},E.wp.emoji=null,E.ajaxurl=themify_vars.ajax_url,v.cssLazy=[];for(let e=n.document.querySelectorAll('[data-lazy]'),t=e.length-1;-1<t;--t)e[t].removeAttribute('data-lazy')},3e3)},800)});const e=()=>{n.themifyBuilder.post_ID=d,(r=n.jQuery('body')).trigger('builderiframeloaded.themify',this)};if('__rocketLoaderLoadProgressSimulator'in n){const t=setInterval(()=>{'complete'===n.__rocketLoaderLoadProgressSimulator.simulatedReadyState&&(clearInterval(t),e())},10)}else e()},{once:!0,passive:!0}),p.setTime(p.getTime()+3e3),C.cookie='tb_active='+d+';expires='+p.toUTCString()+';SameSite=strict;path='+g,C.body.appendChild(m),setTimeout(()=>{C.cookie='tb_active=;path='+g+';Expires=Thu, 01 Jan 1970 00:00:01 GMT;'},600)},!0);{const y=new FormData;y.append('action','tb_load_editor'),v.fetch(y,'text').then(e=>{const t=C.createElement('div'),a={},n={},r=C.createDocumentFragment(),l=(C.createDocumentFragment(),v.body[0]),o=function(){a[this.src]=!0,$.ui&&$.fn.mouse&&$.fn.sortable&&v.trigger('tb_load_iframe');for(let e in n)if(!0!==a[e])return!1;const i=C.createDocumentFragment();for(let e=0,t=d.length;e<t;++e)i.appendChild(d[e]);l.appendChild(i),E.tinymce&&tinyMCE&&(tinyMCEPreInit.mceInit.tb_lb_hidden_editor.schema='html5',tinyMCEPreInit.mceInit.tb_lb_hidden_editor.element_format='html',tinyMCEPreInit.mceInit.tb_lb_hidden_editor.wp_autoresize_on=!1,tinyMCEPreInit.mceInit.tb_lb_hidden_editor.plugins='charmap,colorpicker,hr,lists,media,paste,tabfocus,textcolor,fullscreen,wordpress,wpautoresize,wpeditimage,wpemoji,wpgallery,wpdialogs,wptextpattern,wpview,wplink',tinyMCEPreInit.mceInit.tb_lb_hidden_editor.indent='simple',tinyMCEPreInit.mceInit.tb_lb_hidden_editor.ie7_compat=!1,tinyMCEPreInit.mceInit.tb_lb_hidden_editor.root_name='div',tinyMCEPreInit.mceInit.tb_lb_hidden_editor.relative_urls=!0,tinyMCE.execCommand('mceRemoveEditor',!0,'tb_lb_hidden_editor'),$('#wp-tb_lb_hidden_editor-editor-container,#wp-tb_lb_hidden_editor-editor-tools').remove())},s=(t.innerHTML=e,t.querySelector('#tb_tinymce_wrap').children),d=[];for(let e=0,t=s.length;e<t;++e)if('SCRIPT'!==s[0].tagName||s[0].getAttribute('type')&&'text/javascript'!==s[0].getAttribute('type'))r.appendChild(s[0]);else{let i=C.createElement('script');for(let e=s[0].attributes,t=e.length-1;-1<t;--t)i.setAttribute(e[t].name,e[t].value);let e=s[0].getAttribute('src');if(e)void 0===n[e]&&-1===e.indexOf('themify/js/main')&&null===C.querySelector('script[src="'+e+'"]')&&(i.async=!1,n[e]=!0,i.addEventListener('load',o,{once:!0,passive:!0}),i.addEventListener('error',o,{once:!0,passive:!0}),r.appendChild(i));else{let e=s[0].id;if(!e||-1===e.indexOf('themify-main-script')){let e=s[0].innerHTML;-1===(i.innerHTML=e).indexOf('tinyMCEPreInit.')&&-1===e.indexOf('.addI18n')&&-1===e.indexOf('.i18n')&&-1===e.indexOf('wp.editor')?r.appendChild(i):d.push(i)}}s[0].remove()}try{l.appendChild(r)}catch(e){}})}}}}),v.body[0].classList.contains('tb_restriction')||-1!==E.location.href.indexOf('tb-id')||('#builder_active'===E.location.hash?($('.toggle_tb_builder > a').first().click(),E.location.hash=''):setTimeout(()=>{if(!1===a){const e=C.createElement('link');e.href=g+(l?'&tb-id='+l:''),e.rel='prefetch',e.setAttribute('as','doc'),C.head.appendChild(e)}},2e3))};!0===E.loaded?e():v.on('tf_init',e,!0)})(Themify,window,document);