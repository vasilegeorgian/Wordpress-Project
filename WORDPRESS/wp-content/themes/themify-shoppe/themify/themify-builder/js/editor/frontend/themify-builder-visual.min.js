!function($,T,l,N,I,M,D){'use strict';const n=[],d=[],s={},o={};function P(t,i){for(let e=t.length-1;-1<e;--e)if(i===t[e].selectorText.replace(/\s*>\s*/g,'>').replace(/\,\s/g,','))return e;return!1}function A(e){if(void 0!==s[e])return s[e];{const t=e;if(-1!==e.indexOf('-')){const i=e.toLowerCase().split('-');e=i[0]+i[1].charAt(0).toUpperCase()+i[1].slice(1),void 0!==i[2]&&(e+=i[2].charAt(0).toUpperCase()+i[2].slice(1)),void 0!==i[3]&&(e+=i[3].charAt(0).toUpperCase()+i[3].slice(1))}return s[t]=e}}M.mode='visual',M.iframe='',M.id='',M.is_ajax_call=!1,M.Mixins.Frontend={render_visual(e){const i={},s=T.convert(this.el.querySelectorAll('[data-cid]'));s.unshift(this.el);for(let t=0,e=s.length;t<e;++t){let e=M.Models.Registry.lookup(s[t].getAttribute('data-cid'));e&&(i[e.cid]=e.toJSON())}M.bootstrap(i,e)},change_callback(){const t=this.$el;t[0].insertAdjacentHTML('afterbegin','<span class="tf_lazy tb_preview_component"></span>'),this.render_visual(function(){t.find('.tb_preview_component').remove(),M.Utils.setCompactMode(t[0].getElementsByClassName('module_column'));const e=('row'===M.eventName?t:M.beforeEvent).data('cid');M.undoManager.push(e,M.beforeEvent,t,M.eventName),M.Utils.runJs(t,null,!0)})},createEl(e){const t=this.model.get('elType'),i=I.createElement('div'),s=(i.innerHTML=e,i.getElementsByClassName('module_'+t)[0]),l=s.classList,o=s.attributes,a='subrow'===t?this.el.getElementsByClassName('module_subrow')[0]:this.el,n='subrow'===t?$(a):this.$el;for(var r=l.length-1;-1<r;--r)a.classList.add(l[r]);for(r=o.length-1;-1<r;--r){let e=o[r].name;'class'!==e&&(a.setAttribute(e,o[r].value),0===e.indexOf('data-')&&n.data(e.replace('data-',''),o[r].value))}const d=s.getElementsByClassName('builder_row_cover')[0],c=s.getElementsByClassName('tbp_dc_styles')[0],u=s.getElementsByClassName(t+'-slider')[0],m=s.getElementsByClassName('tb_row_frame_wrap')[0];if(void 0!==m&&m.parentNode===s){const h=a.getElementsByClassName('tb_row_frame_wrap')[0];void 0!==h?a.replaceChild(m,h):a.insertBefore(m,a.firstChild)}if(void 0!==c&&c.parentNode===s){const g=a.getElementsByClassName('tbp_dc_styles')[0];void 0!==g?a.replaceChild(c,g):a.appendChild(c)}if(void 0!==d&&d.parentNode===s){const _=a.getElementsByClassName('builder_row_cover')[0];void 0!==_?a.replaceChild(d,_):a.insertAdjacentElement('afterbegin',d)}if(void 0!==u&&u.parentNode===s){const p=a.getElementsByClassName(t+'-slider')[0];void 0!==p?a.replaceChild(u,p):a.insertAdjacentElement('afterbegin',u)}},restoreHtml(s){const e=I.createElement('div');e.innerHTML=s,s=e.firstChild,M.ActionBar.clear(),M.ActionBar.clearClicked(),M.ActionBar.clearSelected();for(let e=s.getElementsByClassName('tb_action_wrap'),t=e.length-1;-1<t;--t)for(;null!==e[t].firstChild;)e[t].removeChild(e[t].lastChild);for(let t=T.selectWithParent('[contenteditable]',s),i=t.length-1;-1<i;--i){t[i].setAttribute('contenteditable','false');let e=t[i].closest('.tb_editor_on');e&&e.classList.remove('tb_editor_on','tb_editor_clicked')}for(let e=T.selectWithParent('tb_element_clicked',s),t=e.length-1;-1<t;--t)e[t].classList.remove('tb_element_clicked');for(let t=T.selectWithParent('[data-cid]',s),i=t.length-1;-1<i;--i){let e=M.Models.Registry.lookup(t[i].getAttribute('data-cid'));e&&e.trigger('change:view',t[i])}M.liveStylingInstance.$liveStyledElmt[0].replaceWith(s),M.Utils.runJs($(s),null,!0)}},M.previewVisibility=function(){const e=this.el,t=e.classList,i='row'===this.model.get('elType')?this.model.get('styling'):this.model.get('mod_settings');M.isPreview?('hide_all'===i.visibility_all?t.add('hide-all'):('hide'===i.visibility_desktop&&t.add('hide-desktop'),'hide'===i.visibility_tablet&&t.add('hide-tablet'),'hide'===i.visibility_tablet_landscape&&t.add('hide-tablet_landscape'),'hide'===i.visibility_mobile&&t.add('hide-mobile')),_.isEmpty(i.custom_parallax_scroll_reverse)||(e.dataset.parallaxElementReverse=!0),_.isEmpty(i.custom_parallax_scroll_fade)||(e.dataset.parallaxFade=!0),_.isEmpty(i.custom_parallax_scroll_speed)||(e.dataset.parallaxElementSpeed=parseInt(i.custom_parallax_scroll_speed))):t.remove('hide-desktop','hide-tablet','hide-tablet_landscape','hide-mobile','hide-all')},Object.assign(M.Views.BaseElement.prototype,M.Mixins.Frontend),M.Views.register_row({initialize(){this.listenTo(this.model,'create:element',this.createEl),this.listenTo(this.model,'visual:change',this.change_callback),this.listenTo(this.model,'custom:restorehtml',this.restoreHtml),M.vent.on('dom:preview',M.previewVisibility.bind(this))}}),M.Views.register_subrow({initialize(){this.listenTo(this.model,'create:element',this.createEl),this.listenTo(this.model,'visual:change',this.change_callback),this.listenTo(this.model,'custom:restorehtml',this.restoreHtml)}}),M.Views.register_column({initialize(){this.listenTo(this.model,'create:element',this.createEl),this.listenTo(this.model,'visual:change',this.change_callback),this.listenTo(this.model,'custom:restorehtml',this.restoreHtml)}}),M.Views.register_module({_jqueryXhr:!1,templateVisual(e){const t=wp.template('builder-'+this.model.get('mod_name')+'-content');return t(e)},initialize(){this.listenTo(this.model,'create:element',this.createEl),this.listenTo(this.model,'visual:change',this.change_callback),this.listenTo(this.model,'custom:restorehtml',this.restoreHtml),this.listenTo(this.model,'custom:preview:live',this.previewLive),this.listenTo(this.model,'custom:preview:refresh',this.previewReload),M.vent.on('dom:preview',M.previewVisibility.bind(this))},createEl(e){const t=I.createElement('div'),i=I.createDocumentFragment(),s=I.createElement('div'),l=I.createElement('div'),o=I.createElement('div'),a=I.createElement('div'),n=this.model.get('mod_name'),r=(t.innerHTML=e,t.getElementsByClassName('module')[0]),d=t.querySelector('#tb_module_styles');if(void 0===r)return M.is_ajax_call||(M.Models.Registry.remove(this.model.cid),this.model.destroy()),!1;if(null!==d){const c=JSON.parse(d.innerText);for(let e in c)!T.cssLazy[e]&&c[e].s&&(T.cssLazy[e]=!0,T.LoadCss(c[e].s,c[e].v))}for(;null!==this.el.firstChild;)this.el.firstChild.remove();if(a.className='tb_visibility_hint',a.appendChild(M.Utils.getIcon('ti-eye')),M.Utils.visibilityLabel(a,this.model),s.className='tb_data_mod_name',s.innerHTML=themifyBuilder.modules[n].name,l.className='tf_plus_icon tb_column_btn_plus tb_module_btn_plus tb_disable_sorting',o.className='tb_action_wrap tb_module_action',r.classList.add('module-'+n,'tb_'+this.model.get('element_id')),r.appendChild(s),i.appendChild(o),i.appendChild(r),i.appendChild(a),i.appendChild(l),this.el.appendChild(i),'image'===n&&!0===T.is_builder_loaded&&!1===M.id){this.el;let e;setTimeout(function(){M.Utils.calculateHeight(),e=null},500)}},shortcodeToHTML(i){const l=[],s=themifyBuilder.available_shortcodes;let o=!1;for(let e=0,t=s.length;e<t;++e)i=wp.shortcode.replace(s[e],i,function(e){let t=wp.shortcode.string(e),i=T.hash(t),s;return s=void 0===n[i]?(l.push(t),'<span class="tmp'+i+'">[loading shortcode...]</span>'):n[i],o=!0,s});if(o&&0<l.length){const a=this;void 0!==a._shortcodeXhr&&4!==a._shortcodeXhr&&a._shortcodeXhr.abort(),a._shortcodeXhr=$.ajax({type:'POST',url:themifyBuilder.ajaxurl,dataType:'json',data:{action:'tb_render_element_shortcode',shortcode_data:JSON.stringify(l),tb_load_nonce:themifyBuilder.tb_load_nonce},success(e){if(e.success){const i=e.data.shortcodes,s=e.data.styles;if(s)for(let e=0,t=s.length;e<t;++e)s[e].s&&T.LoadCss(s[e].s,s[e].v,null,s[e].m);for(let t=0,e=i.length;t<e;++t){let e=T.hash(i[t].key);a.$el.find('.tmp'+e).replaceWith(i[t].html),n[e]=i[t].html,T.is_builder_loaded&&M.Utils.runJs(a.$el,'module',!0)}}}})}return{content:i,found:o}},previewLive(e,t,i,s,l){M.is_ajax_call=!1,this._jqueryXhr&&4!==this._jqueryXhr&&this._jqueryXhr.abort();let o=null!==M.activeModel&&s,a,n=300;if(e.cid=i||M.activeModel.cid,!o||!0===t){if(a=this.templateVisual(e),M.is_ajax_call)return;if(!0===t){const r=this.shortcodeToHTML(a);r.found&&(n=1e3,a=r.content,o=null)}}if(T.trigger('tbDisableInline'),o){const d=s.length;if(void 0===d)s.innerHTML=l;else for(let e=d-1;-1<e;--e)s[e].innerHTML=l;M.Utils.calculateHeight()}else if(this.createEl(a),!0===T.is_builder_loaded)if(i)M.Utils.calculateHeight(),M.Utils.runJs(this.$el,'module');else{M.liveStylingInstance.$liveStyledElmt=this.$el;const c=this;this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(function(){M.Utils.runJs(c.$el,'module'),M.Utils.calculateHeight()},n)}},previewReload(e,t,i){if(t&&M.activeModel.cid&&i){const l=t.length;if(void 0===l)t.innerHTML=i;else for(let e=0;e<l;++e)t[e].innerHTML=i;M.Utils.calculateHeight()}else{const o=this,a=(this._jqueryXhr&&4!==this._jqueryXhr&&this._jqueryXhr.abort(),M.is_ajax_call=!0,T.trigger('tbDisableInline'),this.model.get('mod_name')),n=e.unsetKey,r=(o.el.insertAdjacentHTML('afterbegin','<span class="tb_preview_component tf_lazy"></span>'),delete e.cid,delete e.unsetKey,delete e.element_id,(e=M.Utils.clear(e))['module_'+a+'_slug']=1,e=JSON.stringify(e),T.hash(e));if(void 0===d[r]||n)return this._jqueryXhr=$.ajax({type:'POST',url:themifyBuilder.ajaxurl,data:{action:'tb_load_module_partial',tb_post_id:themifyBuilder.post_ID,tb_cid:this.model.cid,element_id:this.model.get('element_id'),tb_module_slug:a,tb_module_data:e,tb_load_nonce:themifyBuilder.tb_load_nonce},success(e){s(d[r]=e),M.is_ajax_call=o._jqueryXhr=!1},error(){o.$el.removeClass('tb_preview_loading')}}),this;function s(e){o.createEl(e),M.liveStylingInstance.$liveStyledElmt=o.$el,M.Utils.runJs(o.$el,'module',!0),o.$el.find('.tb_preview_component').remove(),M.Utils.calculateHeight()}s(d[r])}}}),M.bootstrap=function(e,t,i){const a=[];let n=!0;e||(n=!1,e=M.Models.Registry.items);for(let o in e){let e=M.Models.Registry.items[o],t=e.toJSON(),i=t.elType,s='module'===i?'mod_settings':'styling',l=t[s];if(l&&0<Object.keys(l).length)!0===n&&M.liveStylingInstance.setCss([t],'module'===i?t.mod_name:i);else if('module'!==i)continue;if('module'===i&&'tile'!==t.mod_name&&void 0===t.mod_settings.__dc__&&'ajax'!==themifyBuilder.modules[t.mod_name].type){const r='accordion'===t.mod_name||'box'===t.mod_name||'feature'===t.mod_name||'tab'===t.mod_name||'text'===t.mod_name||'plain-text'===t.mod_name||'pointers'===t.mod_name||'pro-image'===t.mod_name||'countdown'===t.mod_name||'button'===t.mod_name||'pro-slider'===t.mod_name||'timeline'===t.mod_name;e.trigger('custom:preview:live',t.mod_settings,r,o)}else{if('column'===i)delete t.modules;else if('row'===i||'module'===i||'subrow'===i){if('row'===i&&'tb-page-break'===l.custom_css_row)continue;delete t.cols}a.push({jobID:o,data:t})}}e=null,this.batch_rendering(a,0,360,t,i)},M.batch_rendering=function(e,t,i,s,l){if(t>=e.length)'function'==typeof s&&s.call(this),M.toolbar.pageBreakModule.countModules(),T.trigger('tb_css_visual_modules_load');else{const o=e.slice(t,t+i);this.render_element(o,l).done(function(){M.batch_rendering(e,t+=i,i,s)})}},M.render_element=function(e,t){const i={action:'tb_render_element',tmpGS:t?JSON.stringify(t):'',batch:JSON.stringify(e),tb_load_nonce:themifyBuilder.tb_load_nonce,tb_post_id:themifyBuilder.post_ID};return $.ajax({type:'POST',url:themifyBuilder.ajaxurl,dataType:'json',data:i,success(t){for(let e in t)'tb_module_styles'!==e&&'gs'!==e&&M.Models.Registry.lookup(e).trigger('create:element',t[e]);if(t.tb_module_styles){const i=t.tb_module_styles;for(let t in i){let e=i[t].s;!T.cssLazy[t]&&e&&(T.cssLazy[t]=!0,o[e]=!0,T.LoadCss(e,i[t].v,null,null,function(){delete o[e],0===Object.keys(o).length&&T.trigger('tb_css_visual_modules_load')}))}}else T.trigger('tb_css_visual_modules_load')}})},M.render=function(){var e=function(){const t=I.getElementsByClassName('themify_builder_content'),i=themifyBuilder.post_ID;let s=null;for(let e=t.length-1;-1<e;--e)t[e].getAttribute('data-postid')!=i?t[e].classList.add('not_editable_builder'):null===s&&((s=t[e]).setAttribute('id','themify_builder_content-'+i),s.setAttribute('data-postid',i),s.classList.remove('not_editable_builder'),s.classList.add('tb_active_builder'));let e=l['builderdata_'+i]?l['builderdata_'+i].data:[];e=Array.isArray(e)&&0!==e.length?e.filter(function(e){return e&&0<Object.keys(e).length}):{},l['builderdata_'+i]=null,M.id=i,M.Instances.Builder[M.builderIndex]=new M.Views.Builder({el:s,collection:new M.Collections.Rows(e),type:M.mode}),M.Instances.Builder[M.builderIndex].render(),e=null,M.bootstrap(null,function(){ThemifyStyles.init(ThemifyConstructor.data,ThemifyConstructor.breakpointsReverse,i),M.liveStylingInstance=new a,M.liveStylingInstance.setCss(M.Mixins.Builder.toJSON(M.Instances.Builder[0].el)),setTimeout(r,2e3),T.on('tb_css_visual_modules_load',function(){const e=N.document.getElementById('tf_svg'),t=I.getElementById('tf_svg');e.parentNode.replaceChild(t,e),M.toolbar.el.style.display='block',N.Themify.trigger('themify_builder_ready'),N.jQuery('body').trigger('themify_builder_ready'),M.Utils.runJs(null,null,!0),M.Instances.Builder[M.builderIndex].$el.triggerHandler('tb_init'),T.is_builder_loaded=!0,M.id=!1,setTimeout(function(){T.fontAwesome(),M.EdgeDrag.init()},500)},!0)})};if(M.Forms.LayoutPart.init)e&&e();else{const s='tb_visual_templates',i=function(){if(themifyBuilder.debug)return!1;try{let e=localStorage.getItem(s),t=themify_vars.version;if(!e)return!1;e=JSON.parse(e);for(let e in themifyBuilder.modules)t+=e;return themifyBuilder.cache_data&&(t+=themifyBuilder.cache_data),e.h===T.hash(t)&&e.val}catch(e){return!1}}();function t(t){let i='';for(let e in t)i+=t[e];I.body.insertAdjacentHTML('beforeend',i),e&&e()}i?t(i):$.ajax({type:'POST',url:themifyBuilder.ajaxurl,dataType:'json',data:{action:'tb_load_visual_templates',tb_load_nonce:themifyBuilder.tb_load_nonce},success(e){if(e){t(e);try{let t=themify_vars.version;for(let e in themifyBuilder.modules)t+=e;themifyBuilder.cache_data&&(t+=themifyBuilder.cache_data);const i={val:e,h:T.hash(t)};localStorage.setItem(s,JSON.stringify(i))}catch(e){}}}})}},T.body.one('builderiframeloaded.themify',function(e,t){T.w=l.innerWidth,T.h=l.innerHeight,M.iframe=$(t),setTimeout(function(){T.loadAnimateCss()},1),D.setToolbar(),M.toolbar=new M.Views.Toolbar({el:'#tb_toolbar'}),M.toolbar.render(),M.GS.init(),T.LoadAsync(tbLocalScript.builder_url+'/js/editor/themify-constructor.js',function(){l.wp.media=l.top.wp.media,l.MediaElementPlayer=l.top.MediaElementPlayer,jQuery.fn.mediaelementplayer=l.top.jQuery(l.top.document).mediaelementplayer,l.wp.mediaelement=l.top.wp.mediaelement,l.tinyMCE=l.top.tinyMCE,l.tinyMCEPreInit=l.top.tinyMCEPreInit,l.tinymce=l.top.tinymce,l.switchEditors=l.top.switchEditors,l.wpApiSettings=l.top.wpApiSettings,ThemifyConstructor.getForms(M.render)},null,null,function(){return'undefined'!=typeof ThemifyConstructor}),I.addEventListener('submit',function(e){e.preventDefault()}),I.addEventListener('click',function(e){const t=e.target,i='A'===t.tagName?t:t.closest('a');!i||'_blank'===i.target||'#'!==i.href&&i.href&&i.href.replace(new URL(i.href).hash,'')===l.top.location.href.replace(location.hash,'')||e.preventDefault()})});const a=function(){this.$context=$('#tb_lightbox_parent',N.document),this.$liveStyledElmt=null,this.module_rules={},this.rulesCache={},this.currentStyleObj={}};function r(){const t=N.document.getElementsByClassName('tb_middle_bar'),c=M.Utils.getMouseEvents(),i=function(e){if('touchstart'===e.type||1===e.which){e.stopPropagation();let l=e.clientX,o='tb_right_bar'===this.id?'right':'left',a=tbLocalScript.breakpoints,n=M.toolbar.$el.width(),r=M.iframe.css('transition','none').width(),d=N.document.getElementsByClassName('tb_vertical_change_tooltip')[0],t=N.document.getElementsByClassName('tb_vertical_bars')[0],i=I.createElement('div');i.className='tb_mousemove_cover',d&&d.parentNode.removeChild(d),(d=I.createElement('div')).className='tb_vertical_change_tooltip',this.appendChild(d),t.appendChild(i),t.className+=' tb_resizing_start',M.iframe[0].classList.add('tb_resizing_start');const s=function(e){e.stopPropagation();let t=e.clientX-l,i=(t*=2,void('left'===o&&(t=-t))),s=r+t<320?320:r+t;s<=a.mobile?i='mobile':s<=a.tablet[1]?i='tablet':s<=a.tablet_landscape[1]?i='tablet_landscape':(i='desktop',s>n-17&&(s=n)),d.textContent=s+'px',M.iframe.css('width',s),M.activeBreakPoint!==i&&ThemifyConstructor.lightboxSwitch(i)};i.addEventListener(c.mouseup,function(e){e.stopPropagation(),this.removeEventListener(c.mousemove,s,{passive:!0}),this.parentNode.removeChild(this),d.parentNode.removeChild(d),M.iframe.css('transition',''),t.classList.remove('tb_resizing_start'),M.iframe[0].classList.remove('tb_resizing_start'),I.body.classList.remove('tb_start_animate','tb_start_change_mode'),M.Utils._onResize(!0),i=t=d=r=a=o=l=n=null},{once:!0,passive:!0}),i.addEventListener(c.mousemove,s,{passive:!0}),I.body.classList.add('tb_start_animate','tb_start_change_mode')}};for(let e=t.length-1;-1<e;--e)t[e].addEventListener(c.mousedown,i,{passive:!0})}a.prototype.init=function(e,t){let i,s=M.activeModel.get('element_id');if(this.type=M.activeModel.get('elType'),this.group='module'===this.type?M.activeModel.get('mod_name'):this.type,!0===t&&null!==M.GS.previousModel){const l=M.Models.Registry.lookup(M.GS.previousModel);'module'===(i=l.get('elType'))&&(i=l.get('mod_name')),s=l.get('element_id')}else i=this.group;this.prefix=ThemifyStyles.getBaseSelector(i,s),this.$liveStyledElmt=t?$(I.querySelector(this.prefix)):M.Instances.Builder[M.builderIndex].$el.find('.tb_element_cid_'+M.activeModel.cid).first(),this.currentStyleObj={},this.tempData={},this.undoData={},this.undoData[M.activeBreakPoint]={},this.tempData[M.activeBreakPoint]={},void 0===this.rulesCache[M.activeBreakPoint]&&(this.rulesCache[M.activeBreakPoint]={}),this.currentSheet=this.getSheet(M.activeBreakPoint,t),!0!==e&&('column'!==this.type&&'subrow'!==this.type&&this.bindAnimation(),this.bindTabsSwitch(),this.initModChange())},a.prototype.setCss=function(e,t,l){const o=M.GS.createCss(e,t,void 0),i=[];for(let s in o)if('fonts'===s||'cf_fonts'===s)for(let t in o[s]){let e=t;0<o[s][t].length&&(e+=':'+o[s][t].join(',')),i.push(e)}else if('gs'===s){let l=o[s];for(let s in l){let t=this.getSheet(s,!0),i=t.cssRules||t.rules;for(let e in l[s])!1===P(i,e)&&t.insertRule(e+'{'+l[s][e].join('')+';}',i.length)}}else if('bg'!==s){let t=this.getSheet(s,l),i=t.cssRules||t.rules;for(let e in o[s])!1===P(i,e)&&t.insertRule(e+'{'+o[s][e].join('')+';}',i.length)}return ThemifyConstructor.font_select.loadGoogleFonts(i.join('|')),o},a.prototype.setLiveStyle=function(e,t,s){s?'string'==typeof s&&(s=[s]):s=[''],s=ThemifyStyles.getNestedSelector(s);let l='';const i=this.currentSheet.cssRules||this.currentSheet.rules;for(let t=0,i=s.length;t<i;++t){let e='h'!==this.styleTabId||s[t].endsWith(':after')||s[t].endsWith(':before');!1===e&&-1===s[t].indexOf(':hover')&&(s[t]+=':hover'),l+=this.prefix+s[t],!1===e&&(l+=','+this.prefix+s[t].replace(':hover','.tb_visual_hover')),t!==i-1&&(l+=',')}if(!0===this.isChanged){let i;if('h'===this.styleTabId){const d=l.split(',');for(let t=d.length-1;-1<t;--t)if(-1===d[t].indexOf('tb_visual_hover'))for(let e=(i=I.querySelectorAll(d[t].split(':hover')[0])).length-1;-1<e;--e)i[e].classList.add('tb_visual_hover')}else{this.$liveStyledElmt[0].classList.remove('tb_visual_hover');for(let e=(i=this.$liveStyledElmt[0].getElementsByClassName('tb_visual_hover')).length-1;-1<e;--e)i[e].classList.remove('tb_visual_hover')}}l=l.replace(/\s{2,}/g,' ').replace(/\s*>\s*/g,'>').replace(/\,\s/g,',');const o=T.hash(l),a=t,n=e;let r=void 0!==this.rulesCache[M.activeBreakPoint][o]?this.rulesCache[M.activeBreakPoint][o]:P(i,l);!1===t&&(t=''),e=A(e),!1!==r&&i[r]?(void 0===this.tempData[M.activeBreakPoint][r]&&(this.tempData[M.activeBreakPoint][r]={}),void 0===this.tempData[M.activeBreakPoint][r][e]&&(this.tempData[M.activeBreakPoint][r][e]=i[r].style[e]),i[r].style[e]=t):(r=i.length,this.currentSheet.insertRule(l+'{'+n+':'+t+';}',r),void 0===this.tempData[M.activeBreakPoint][r]&&(this.tempData[M.activeBreakPoint][r]={}),this.tempData[M.activeBreakPoint][r][e]=''),this.rulesCache[M.activeBreakPoint][o]=r,void 0===this.undoData[M.activeBreakPoint][r]&&(this.undoData[M.activeBreakPoint][r]={}),this.undoData[M.activeBreakPoint][r][e]={a:t,b:this.tempData[M.activeBreakPoint][r][e]},T.body.triggerHandler('tb_'+this.type+'_styling',[this.group,e,t,a,this.$liveStyledElmt]),'desktop'===M.activeBreakPoint||0!==e.indexOf('padding')&&0!==e.indexOf('margin')&&'height'!==e&&'width'!==e||M.Utils.calculateHeight()},a.prototype.initModChange=function(e){if(!0===e)T.body.off('themify_builder_change_mode.tb_visual_mode');else{const s=this;T.body.on('themify_builder_change_mode.tb_visual_mode',function(e,t,i){s.setMode(i,null!==M.GS.activeGS)})}},a.prototype.setMode=function(e,t){void 0===this.tempData[e]&&(this.tempData[e]={}),void 0===this.rulesCache[e]&&(this.rulesCache[e]={}),void 0===this.undoData[e]&&(this.undoData[e]={}),this.currentSheet=this.getSheet(e,t)},a.prototype.revertRules=function(t){for(let s in this.tempData){let e=this.getSheet(s,t),i=e.cssRules||e.rules;for(let t in this.tempData[s])if(i[t])for(let e in this.tempData[s][t])i[t].style[e]=this.tempData[s][t][e]}this.undoData={},this.tempData={}},a.prototype.getSheet=function(e,t){return ThemifyStyles.getSheet(e,t)},a.prototype.reset=function(){this.rulesCache={},this.tempData={},this.undoData={};const l=ThemifyConstructor.breakpointsReverse;for(let s=l.length-1;-1<s;--s){let t=this.getSheet(l[s]),i=t.cssRules;for(let e=i.length-1;-1<e;--e)t.deleteRule(e);for(let e=(t=this.getSheet(l[s],!0)).cssRules.length-1;-1<e;--e)t.deleteRule(e)}},a.prototype.clear=function(){const e=this,t=this.$liveStyledElmt[0];if(void 0!==t&&t.classList.remove('animated','hover-wow','tb_visual_hover'),e.module_rules={},this.styleTab=this.styleTabId=this.currentField=this.isChanged=null,!M.saving&&M.hasChanged){if(e.revertRules(null!==M.GS.activeGS),e.type&&'module'!==e.type&&null===M.GS.activeGS){const i=M.activeModel.get('styling');i&&'slider'===i.background_type&&i.background_slider&&e.bindBackgroundSlider()}}else{const s=t.getElementsByClassName('tb_visual_hover');for(let e=s.length-1;-1<e;--e)s[e].classList.remove('tb_visual_hover')}e.bindAnimation(!0),e.bindTabsSwitch(!0),e.initModChange(!0),e.undoData={},e.tempData={},this.$liveStyledElmt=this.currentStyleObj=this.currentSheet=null},a.prototype.addOrRemoveFrame=function(n,r){if('module'!==this.type){let t=this,e=this.$liveStyledElmt.hasClass('active_subrow')?this.$liveStyledElmt.find('> .module_subrow'):this.$liveStyledElmt,i='string'==typeof n,s=i?n:n.closest('.tb_tab').id.split('_').pop(),l,o=e.children('.tb_row_frame_wrap')[0],a=(T.cssLazy.tf_frames||(T.cssLazy.tf_frames=!0,T.LoadCss(themifyBuilder.builder_url+'/css/modules/frames.css')),o||((o=I.createElement('div')).className='tb_row_frame_wrap tf_overflow tf_abs',e.children('.tb_action_wrap').after(o)),o.querySelector('.tb_row_frame_'+s));if(void 0===r){r={},l=this.getValue(s+'-frame_type').selector;const d=['custom','location','width','height','width_unit','height_unit','repeat','type','layout','color','sh_x','sh_y','sh_b','sh_c'];for(let i=0,e=d.length;i<e;++i){let e=N.document.getElementById(s+'-frame_'+d[i]),t;if('type'===d[i])t=e.querySelector('input:checked').value;else if('layout'===d[i])t=e.getElementsByClassName('selected')[0].id;else if('color'===d[i]||'sh_c'===d[i]){if(''===(t=M.Utils.getColor(e)))continue}else t=e.value;r[d[i]]=t}}if(r.type===s+'-presets'||r.type===s+'-custom'){if(r.type===s+'-presets'&&(!r.layout||'none'===r.layout)||r.type===s+'-custom'&&!r.custom)return void('desktop'===M.activeBreakPoint?i||this.setLiveStyle('background-image','',l):'none'===r.layout&&this.setLiveStyle('background-image','none',l));a?(a.classList.remove('behind_content','in_front'),void 0!==r.location&&a.classList.add(r.location)):((a=I.createElement('div')).className='tf_abs tf_overflow tb_row_frame tb_row_frame_'+s,a.className+='left'===s||'right'===s?' tf_h':' tf_w',void 0!==r.location&&(a.className+=' '+r.location),o.appendChild(a))}if(!i){if(r.type===s+'-presets'){const c='left'===s||'right'===s?r.layout+'-l':r.layout,u=T.hash(c),m=function(e){r.color&&(e=e.replace(/\#D3D3D3/gi,r.color)),t.setLiveStyle('background-image','url("data:image/svg+xml;utf8,'+encodeURIComponent(e)+'")',l)};if(void 0!==ThemifyStyles.fields.frameCache[u])m(ThemifyStyles.fields.frameCache[u]);else{const h=I.getElementById('tmpl-frame_'+c);null!==h?(ThemifyStyles.fields.frameCache[u]=h.textContent.trim(),m(ThemifyStyles.fields.frameCache[u])):$.ajax({dataType:'text',url:tbLocalScript.builder_url+'/img/row-frame/'+c+'.svg',success(e){ThemifyStyles.fields.frameCache[u]=e,m(e)}})}}else t.setLiveStyle('background-image','url("'+r.custom+'")',l);if(t.setLiveStyle('width',r.width?r.width+r.width_unit:'',l),t.setLiveStyle('height',r.height?r.height+r.height_unit:'',l),r.repeat?'left'===s||'right'===s?t.setLiveStyle('background-size','100% '+100/r.repeat+'%',l):t.setLiveStyle('background-size',100/r.repeat+'% 100%',l):t.setLiveStyle('background-size','',l),r.sh_b&&r.sh_c){let e=[r.sh_x?r.sh_x+'px':0,r.sh_y?r.sh_y+'px':0,r.sh_b+'px',r.sh_c];t.setLiveStyle('filter','drop-shadow('+e.join(' ')+')',l)}else t.setLiveStyle('filter','',l)}}},a.prototype.overlayType=function(e){if('module'!==this.type){const t='color'===e||'hover_color'===e,i=t?'tfminicolors-input':'themify-gradient-type',s=this.styleTab.getElementsByClassName('tb_group_element_'+e)[0].getElementsByClassName(i)[0];if(t){let e=s.value;e=e&&M.Utils.getColor(s),T.triggerEvent(s,'themify_builder_color_picker_change',{val:e})}else T.triggerEvent(s,'change')}},a.prototype.addOrRemoveComponentOverlay=function(t,i,s){if('module'!==this.type){let e=this.getComponentBgOverlay(this.type);const l=this.getValue(i),o=l.selector,a=0!==e.length;this.$liveStyledElmt[0].classList.toggle('tb_visual_hover','h'===this.styleTabId),''===s&&i?(this.setLiveStyle('backgroundImage','',o),this.setLiveStyle('backgroundColor','',o)):(a||((e=I.createElement('div')).className='builder_row_cover tf_abs',this.$liveStyledElmt.find('.tb_action_wrap').first().before(e)),l&&('color'===t?this.setLiveStyle('backgroundImage','none',o):this.setLiveStyle('backgroundColor',!1,o),this.setLiveStyle(l.prop,s,o)))}},a.prototype.outline=function(e){const t=this.getValue(e.id),i=e.closest('.tb_multi_fields'),s=M.Utils.getColor(i.getElementsByClassName('outline_color')[0]),l=parseFloat(i.getElementsByClassName('outline_width')[0].value),o=i.getElementsByClassName('outline_style')[0].value;'none'===o?this.setLiveStyle('outline','none',t):isNaN(l)||''===l||''===s||this.setLiveStyle('outline',l+'px '+o+' '+s,t)},a.prototype.bindMultiFields=function(e,t){const i=this;if(t=i.getValue(e.id)){var s=e.closest('.tb_seperate_items'),l=void 0!==(c=t.prop.split('-'))[3],a=!1==l&&'border'===c[0],o=s.hasAttribute('data-checked'),n=s.getElementsByClassName('tb_multi_field'),r=function(e){let t='';if(!0===a){const i=e.closest('li'),s=parseFloat(i.getElementsByClassName('border_width')[0].value.trim()),l=i.getElementsByClassName('border_style')[0].value,o=M.Utils.getColor(i.getElementsByClassName('tfminicolors-input')[0]);'none'===l?t=l:isNaN(s)||''===s||''===o||(t=s+'px '+l+' '+o)}else''!==(t=e.value.trim())&&(t=parseFloat(t),isNaN(t)?t='':t+=e.closest('.tb_input').querySelector('#'+e.id+'_unit').value);return t},d=!0===o?r(e):null,c=c[0];for(let e=n.length-1;-1<e;--e){!1===o&&(d=r(n[e])),c=i.getValue(n[e].id).prop,i.setLiveStyle(c,d,t.selector);var u=m=void 0,m=d,u=c;if(!1===a&&!1==l){if('row'===i.type&&void 0!==tbLocalScript.fullwidth_support&&(o&&('padding'===u||'margin'===u)||'padding-left'===u||'padding-right'===u||'margin-left'===u||'margin-right'===u)){const h=u.split('-'),g=M.activeBreakPoint+'-'+h[0];if(o)m=m+','+m;else{let e=i.$liveStyledElmt.data(g);e=e?e.split(','):[],'left'===h[1]?e[0]=m:e[1]=m,m=e.join(',')}i.$liveStyledElmt.attr('data-'+g,m).data(g,m),ThemifyBuilderModuleJs.loadOnAjax(i.$liveStyledElmt,i.type,!0)}(o&&'padding'===u||0===u.indexOf('padding'))&&setTimeout(function(){T.trigger('tfsmartresize')},600)}}!1===a&&(M.ActionBar.hoverCid=null),n=null}},a.prototype.bindRowWidthHeight=function(e,t,i){i=i||this.$liveStyledElmt,'row_height'===e?'fullheight'===t?i[0].classList.add(t):i[0].classList.remove('fullheight'):'fullwidth'===t?(i.removeClass('fullwidth').addClass('fullwidth_row_container'),ThemifyBuilderModuleJs.loadOnAjax(i,this.type,!0)):'fullwidth-content'===t?(i.removeClass('fullwidth_row_container').addClass('fullwidth'),ThemifyBuilderModuleJs.loadOnAjax(i,this.type,!0)):i.removeClass('fullwidth fullwidth_row_container').css({'margin-left':'','margin-right':'','padding-left':'','padding-right':'',width:''}),T.trigger('tfsmartresize')},a.prototype.bindAnimation=function(e){const r=this;!0===e?this.$context.off('change.tb_animation'):this.$context.on('change.tb_animation','#animation_effect,#animation_effect_delay,#animation_effect_repeat,#hover_animation_effect',function(){const e='hover_animation_effect'===this.id,t=e?'hover_animation_effect':'animation_effect',i=e?this.value:r.$context.find('#animation_effect').val(),s=(void 0!==r.currentStyleObj[t]?r.currentStyleObj:ThemifyConstructor.values)[t],l=r.$liveStyledElmt;if(s&&l.removeClass(s+' wow').css({'animation-name':'','animation-delay':'','animation-iteration-count':''}),l.removeClass('animated tb_hover_animate'),r.currentStyleObj[t]=i){const o=e?'':parseFloat(r.$context.find('#animation_effect_delay').val()),a=e?'':parseInt(r.$context.find('#animation_effect_repeat').val()),n=tbLocalScript.is_animation;l.css({'animation-delay':0<o&&!isNaN(o)?o+'s':'','animation-iteration-count':0<a&&!isNaN(a)?a:''}).addClass('wow').attr('data-tf-animation',i),tbLocalScript.is_animation=!0,ThemifyBuilderModuleJs.wowInit(l,null,!1),tbLocalScript.is_animation=n}})},a.prototype.getRowAnchorClass=function(e){return 0<e.length?'tb_has_section tb_section-'+e:''},a.prototype.getStylingVal=function(e){return void 0!==this.currentStyleObj[e]?this.currentStyleObj[e]:''},a.prototype.setStylingVal=function(e,t){this.currentStyleObj[e]=t},a.prototype.bindBackgroundMode=function(s,l){const o={repeat:'repeat','repeat-x':'repeat-x','repeat-y':'repeat-y','repeat-none':'no-repeat','no-repeat':'no-repeat',fullcover:'cover','best-fit-image':'contain','builder-parallax-scrolling':'cover','builder-zoom-scrolling':'100%','builder-zooming':'100%'},a=this.$liveStyledElmt[0];if(void 0!==o[s]){let t={},i=this.getValue(l),e=N.document.getElementById(i.origId);if(null!==e&&''===e.value.trim()?(s=null,t={'background-repeat':'','background-size':'','background-position':'','background-attachment':''}):-1!==s.indexOf('repeat')?(t['background-repeat']=o[s],t['background-size']='auto'):(t['background-size']=o[s],t['background-repeat']='no-repeat','best-fit-image'===o[s]||'builder-zooming'===o[s]?t['background-position']='center center':'builder-zoom-scrolling'===o[s]&&(t['background-position']='50%')),a.classList.remove('builder-parallax-scrolling','builder-zooming','builder-zoom-scrolling'),a.style.backgroundSize=a.style.backgroundPosition='','module'!==this.type||'builder-parallax-scrolling'!==s&&'builder-zooming'!==s&&'builder-zoom-scrolling'!==s&&'best-fit-image'!==s){'builder-parallax-scrolling'===s?a.classList.add('builder-parallax-scrolling'):'builder-zooming'===s?a.classList.add('builder-zooming'):'builder-zoom-scrolling'===s&&a.classList.add('builder-zoom-scrolling');for(let e in t)this.setLiveStyle(e,t[e],i.selector);'builder-zoom-scrolling'!==s&&'builder-zooming'!==s&&'builder-parallax-scrolling'!==s||ThemifyBuilderModuleJs.loadOnAjax(this.$liveStyledElmt,null,!0)}}},a.prototype.position=function(e,t){if(e&&0<e.length){const i=this.getValue(t);if(i){const s=e.split(',');this.setLiveStyle(i.prop,s[0]+'% '+s[1]+'%',i.selector)}}},a.prototype.bindBackgroundSlider=function(e){if('module'!==this.type){const s=this,i=s.$context.find('#'+e.id).val().trim();if(s.removeBgSlider(),i){void 0===this.cahce&&(this.cahce={});const l={shortcode:encodeURIComponent(i),mode:s.$context.find('#background_slider_mode').val(),speed:s.$context.find('#background_slider_speed').val(),size:s.$context.find('#background_slider_size').val()},o=function(e){const t=$(e),i=s.getComponentBgOverlay(s.type);0<i.length?i.after(t):s.$liveStyledElmt.prepend(t),ThemifyBuilderModuleJs.loadOnAjax(t.parent(),s.type,!0)};let t='';for(let e in l)t+=T.hash(e+l[e]);void 0!==this.cahce[t]?o(this.cahce[t]):(l.type=s.type,$.post(themifyBuilder.ajaxurl,{nonce:themifyBuilder.tb_load_nonce,action:'tb_slider_live_styling',tb_background_slider_data:l},function(e){e.length<10||(s.cahce[t]=e,o(e))}))}}},a.prototype.videoOptions=function(l,o){if('module'!==this.type){let e=this.$liveStyledElmt.find('.big-video-wrap').first(),t='',i=!0===l.checked,s='';void 0!==e[0]&&(e[0].classList.contains('themify_ytb_wrapper')?(t=this.$liveStyledElmt,s='ytb'):e[0].classList.contains('themify-video-vmieo')?(t=$f(e.children('iframe')[0]))&&(s='vimeo'):(t=this.$liveStyledElmt.data('plugin_ThemifyBgVideo'),s='local'),'mute'===o?i?('ytb'===s?t.ThemifyYTBMute():'vimeo'===s?t.api('setVolume',0):'local'===s&&t.muted(!0),this.$liveStyledElmt.data('mutevideo','mute')):('ytb'===s?t.ThemifyYTBUnmute():'vimeo'===s?t.api('setVolume',1):'local'===s&&t.muted(!1),this.$liveStyledElmt.data('mutevideo','')):'unloop'===o&&(i?('vimeo'===s?t.api('setLoop',0):'local'===s&&t.loop(!1),this.$liveStyledElmt.data('unloopvideo','')):('vimeo'===s?t.api('setLoop',1):'local'===s&&t.loop(!0),this.$liveStyledElmt.data('unloopvideo','loop'))))}},a.prototype.bindBackgroundTypeRadio=function(e){let t='tb_uploader_input';'module'!==this.type&&('slider'!==e?'n'===this.styleTabId&&this.removeBgSlider():t='tb_shortcode_input','video'!==e&&'n'===this.styleTabId&&this.removeBgVideo()),'gradient'!==e?this.setLiveStyle('backgroundImage','none'):t='themify-gradient-type';const i=this.styleTab.getElementsByClassName('tb_group_element_'+e)[0];T.triggerEvent(i.getElementsByClassName(t)[0],'change'),'image'===e&&'module'===this.type&&(t=i.getElementsByClassName('tfminicolors-input')[0])&&T.triggerEvent(t,'themify_builder_color_picker_change',{val:t.value})},a.prototype.bindFontColorType=function(i,s,l){if('radio'===l){const e=-1!==i.indexOf('_solid'),t=1==e?i.replace(/_solid$/gi,''):i.replace(/_gradient$/gi,'-gradient-type'),o=N.document.getElementById(t);if(1==e){let e=M.Utils.getColor(o);void 0!==e&&''!==e||(e=''),T.triggerEvent(o,'themify_builder_color_picker_change',{val:e})}else T.triggerEvent(o,'change')}else{let e=l,t=this.getValue(s).selector;'color'===e?void 0===i||''===i?(this.setLiveStyle('WebkitBackgroundClip',i='',t),this.setLiveStyle('backgroundClip','',t),this.setLiveStyle('backgroundImage','',t)):(this.setLiveStyle('WebkitBackgroundClip','border-box',t),this.setLiveStyle('backgroundClip','border-box',t),this.setLiveStyle('backgroundImage','none',t)):''!==i&&(e='backgroundImage',this.setLiveStyle('color','transparent',t),this.setLiveStyle('WebkitBackgroundClip','text',t),this.setLiveStyle('backgroundClip','text',t)),''===i&&'color'!==e||this.setLiveStyle(e,i,t)}},a.prototype.shadow=function(e,t,i){const a=this.getValue(t);if(a){let i=e.closest('.tb_seperate_items').getElementsByClassName('tb_shadow_field'),s='',l=!0,o='';for(let t=0,e=i.length;t<e;++t)if(i[t].classList.contains('tb-checkbox'))s=i[t].checked?'inset ':'';else{let e=i[t].value.trim();'color'===ThemifyConstructor.styles[i[t].id].type?e=M.Utils.getColor(i[t]):''===e?e=0:(l=!1,e+=i[t].closest('.tb_input').querySelector('#'+i[t].id+'_unit').value),o+=e+' '}o=!0===l?'':s+o,this.setLiveStyle(a.prop,o,a.selector)}},a.prototype.filters=function(e,t){let i=e.closest('.tb_filters_fields').getElementsByClassName('tb_filters_field'),s='',l;for(let t=0,e=i.length;t<e;++t){let e=i[t].value.trim();''!==e&&(e+='hue-rotate'===(l=this.getValue(i[t].id)).prop?'deg':i[t].closest('.tb_seperate_items').querySelector('#'+i[t].id+'_unit').textContent,e=l.prop+'('+e+')',s+=e+' ')}l=this.getValue(t),this.setLiveStyle('filter',s,l.selector)},a.prototype.transform=function(e,t){let i='',s;const l=e.closest('.tb_transform_fields'),o=this.getValue(t),a=['scale','translate','rotate','skew'],n=t.split('_')[0];for(let t=0,e=a.length;t<e;++t)switch(a[t]){case'scale':case'translate':case'skew':const r=l.querySelector('#'+n+'_'+a[t]+'_top').value.trim(),d=l.querySelector('#'+n+'_'+a[t]+'_bottom').value.trim();s='translate'===a[t]?{x:l.querySelector('#'+n+'_'+a[t]+'_top_unit').value,y:l.querySelector('#'+n+'_'+a[t]+'_bottom_unit').value}:'skew'===a[t]?'deg':'',''===r&&''===d||(''!==r&&l.querySelector('#'+n+'_'+a[t]+'_opp_bottom .style_apply_oppositive').checked?i+=a[t]+'('+r+('translate'===a[t]?s.x:s)+') ':i+=''!==r&&''!==d?a[t]+'('+r+('translate'===a[t]?s.x:s)+','+d+('translate'===a[t]?s.y:s)+') ':''!==r?a[t]+'X('+r+('translate'===a[t]?s.x:s)+') ':a[t]+'Y('+d+('translate'===a[t]?s.y:s)+') ');break;case'rotate':const c=['x','y','z'];for(let e in c)if(c.hasOwnProperty(e)){const u=l.querySelector('#'+n+'_'+a[t]+'_'+c[e]).value.trim();''!==u&&(i+=a[t]+c[e].toUpperCase()+'('+u+'deg) ')}break}this.setLiveStyle('transform',i.trim(),o.selector)},a.prototype.setData=function(e,t,i){const s=this.getValue(e);s&&(''===t&&(t=s.prop),this.setLiveStyle(t,i,s.selector))},a.prototype.bindEvents=function(e,B){if(!e.classList.contains('style_apply_all')){const k=this;{let v,C=B.type,S=B.prop,E=B.id;v='color'===C?'themify_builder_color_picker_change':'gradient'===C?'themify_builder_gradient_change':'text'===C||'range'===C||'textarea'===C?'keyup':'change',e.addEventListener(v,function(e){var s,t=this.classList,i='SELECT'===this.tagName,l=!i&&'radio'===this.type,o=this;if(k.currentField!==o.id||''===k.currentField){k.currentField='radio'!==o.type&&o.id,k.isChanged=!0,k.styleTab=null,k.styleTabId='n';let e=o.closest('.tb_tab');null===e?null===(e=o.closest('.tb_expanded_opttions'))&&(e=N.document.getElementById('tb_options_styling')):k.styleTabId=e.id.split('_').pop(),k.styleTab=e}else k.isChanged=!1;if(M.hasChanged=!0,s=void 0!==(s=e.detail&&e.detail.val?e.detail.val:'frame'===C?this.id:this.value)&&'undefined'!==s?s.trim():'',t.contains('outline_color')||t.contains('outline_width')||t.contains('outline_style'))k.outline(this,B);else if(t.contains('tb_transform_field'))k.transform(this,E);else if('color'===C&&t.contains('border_color')||1==i&&t.contains('border_style')||'keyup'==v&&(t.contains('border_width')||t.contains('tb_multi_field')))k.bindMultiFields(this);else if('frame-custom'===S||'frame'===C||t.contains('tb_frame'))'module'!==k.type&&k.addOrRemoveFrame(this);else if(t.contains('tb_shadow_field'))k.shadow(this,E);else if(t.contains('tb_filters_field'))k.filters(this,E);else if('keyup'==v){if(''!==s)if('column-rule-width'===S){s+='px';const a=E.replace('_width','_style'),n=N.document.getElementById(a);null!==n&&k.setData(a,'',n.value)}else if('column-gap'===S)s+='px';else{const r=N.document.getElementById(E+'_unit');null!==r&&(s+=r.value||'px')}k.setData(E,'',s)}else if(!0===B.isFontColor)k.bindFontColorType(s,E,C);else{if(1==i)if('font-weight'===S){const d=this.getAttribute('data-selected'),c=k.styleTab.getElementsByClassName('tb_multi_fonts')[0];if(null!==d&&''!==d&&'default'!==d&&void 0===ThemifyConstructor.font_select.safe[d]&&ThemifyConstructor.font_select.loadGoogleFonts(d+':'+s),c){let e;'regular'===s?s='400':'italic'===s&&(s='400italic'),(e=-1!==s.indexOf('italic')?(s=parseInt(s.replace('italic','')),c.querySelector('[data-value="italic"]')):c.querySelector('[data-value="normal"]'))&&!1===e.checked&&e.parentNode.click()}}else if('font_select'===C){if(''!==s&&'default'!==s&&void 0===ThemifyConstructor.font_select.safe[s]){let e=this.closest('.tb_tab').getElementsByClassName('font-weight-select')[0],t;t=s,void 0!==e?t+=':'+e.value:k.setLiveStyle('font-weight','',B.selector),ThemifyConstructor.font_select.loadGoogleFonts(t)}else'default'===s&&(s='');''!==s&&(s=ThemifyStyles.parseFontName(s))}else{if(t.contains('tb_unit'))return void T.triggerEvent(k.$context.find('#'+E.replace('_unit',''))[0],'keyup');if('background-mode'===S)return void k.bindBackgroundMode(s,E);if('column-count'===S&&0==s)s='';else if(t.contains('tb_position_field')){const u=['top','right','bottom','left'],m=this.closest('.tb_input');for(let i=u.length-1;-1<i;--i){let t='';if('absolute'===s||'fixed'===s){let e='#'+B.id+'_'+u[i];t='auto',m.querySelector(e+'_auto input').checked||(t=m.querySelector(e).value.trim()+m.querySelector(e+'_unit').value.trim())}k.setLiveStyle(u[i],t,B.selector)}}else if('display'===S){if('none'===s)return!1;'inline-block'===s?k.setLiveStyle('width','auto',B.selector):k.setLiveStyle('width','100%',B.selector)}else if('vertical-align'===S&&''!==s){let e;e='top'===s?'flex-start':'middle'===s?'center':'flex-end',k.setLiveStyle('align-self',e,B.selector)}}else{if('gallery'===C&&'module'!==k.type)return void k.bindBackgroundSlider(B);if(1==l){if(E=this.closest('.tb_lb_option').id,!1===this.checked&&(s=''),'imageGradient'===C||!0===B.is_background)return void k.bindBackgroundTypeRadio(s);if(!0===B.is_overlay)return void('module'!==k.type&&k.overlayType(s))}else if('color'===C||'gradient'===C){if('gradient'===C&&(E=this.dataset.id),!0===B.is_overlay)return void('module'!==k.type&&k.addOrRemoveComponentOverlay(C,E,s));if('color'===C){let e=null;'module'===k.type&&void 0!==B.colorId&&void 0!==B.origId?null!==(e=N.document.getElementById(B.origId))&&'image'!==e.closest('.tb_input').querySelector('input:checked').value&&(e=null):'module'!==k.type&&'h'===k.styleTabId&&(e=k.styleTab.getElementsByClassName('tb_uploader_input')[0]),e&&''===e.value.trim()&&k.setLiveStyle('background-image',''!==s?'none':'',B.selector)}}else if('image'===C||'video'===C){if('video'===C)return 0<s.length?'module'!==k.type&&(k.$liveStyledElmt.data('tbfullwidthvideo',s).attr('data-tbfullwidthvideo',s),_.isEmpty(k.$liveStyledElmt.data('mutevideo'))&&k.$context.find('#background_video_options_mute').is(':checked')&&k.$liveStyledElmt.data('mutevideo','mute'),ThemifyBuilderModuleJs.fullwidthVideo(k.$liveStyledElmt)):k.removeBgVideo(),!1;{if(s)s='url('+s+')';else if(s='',void 0!==B.colorId&&'h'===k.styleTabId){const g=N.document.getElementById(B.colorId);null!==g&&''!==g.value.trim()&&(s='none')}const h=k.styleTab.getElementsByClassName('tb_image_options');for(let e=h.length-1;-1<e;--e){let t=h[e].getElementsByClassName('tb_lb_option');for(let e=t.length-1;-1<e;--e)T.triggerEvent(t[e],'change')}}}else{if('position_box'===C)return void k.position(s,E);if('checkbox'===C){if(null!==this.closest('#background_video_options'))return void k.videoOptions(this,s);if('height'===S&&-1!==E.indexOf('_auto_height')||'width'===S&&-1!==E.indexOf('_auto_width')){const p='height'===S?B.heightID:B.widthID;if(this.checked)k.setData(p,S,'auto');else{const y=k.styleTab.querySelector('#'+p).value.trim();''!==y?k.setData(p,S,y+$(k.styleTab).find('#'+p+'_unit').val()):k.setData(p,S,'')}return}if(!0===B.is_position){const f='#'+B.posId,b=this.closest('.tb_input');return s=this.checked?'auto':''===(s=b.querySelector(f).value.trim())||isNaN(s)?'':s+b.querySelector(f+'_unit').value,void k.setLiveStyle(B.prop,s,B.selector)}if('background-image'===S)return this.checked||(s=!1),void k.setLiveStyle(B.prop,s,B.selector)}}}k.setData(E,'',s)}},{passive:!0})}}},a.prototype.getValue=function(e){return void 0!==this.module_rules[e]&&this.module_rules[e]},a.prototype.bindTabsSwitch=function(e){const a=this;!0===e?T.body.off('themify_builder_tabsactive.hoverTabs'):T.body.on('themify_builder_tabsactive.hoverTabs',function(e,t,o){if('styling'===ThemifyConstructor.clicked){let l;if('h'!==t.split('_').pop()){a.$liveStyledElmt[0].classList.remove('tb_visual_hover');for(let e=(l=a.$liveStyledElmt[0].getElementsByClassName('tb_visual_hover')).length-1;-1<e;--e)l[e].classList.remove('tb_visual_hover')}else{if('module'!==a.type){let e=o.previousElementSibling.getElementsByClassName('background_type')[0];e&&('image'===(e=e.querySelector('input:checked').value)||'gradient'===e?o.classList.remove('tb_disable_hover'):o.classList.add('tb_disable_hover'))}setTimeout(function(){let s=[];for(let i=(l=o.getElementsByClassName('tb_lb_option')).length-1;-1<i;--i){let e=l[i].id,t=l[i].classList.contains('themify-gradient');if(!0===t&&(e=l[i].dataset.id),void 0!==a.module_rules[e]&&(t||null!==l[i].offsetParent)){void 0!==a.module_rules[e].is_overlay&&a.$liveStyledElmt[0].classList.add('tb_visual_hover');let i=Array.isArray(a.module_rules[e].selector)?a.module_rules[e].selector:[a.module_rules[e].selector];for(let t=i.length-1;-1<t;--t){let e=i[t].split(':hover')[0];s[e]=1}}}if(0<(s=Object.keys(s)).length)for(let t=s.length-1;-1<t;--t)for(let e=(l=I.querySelectorAll(a.prefix+s[t])).length-1;-1<e;--e)l[e].classList.add('tb_visual_hover')},10)}}})},a.prototype.getComponentBgOverlay=function(e){const t='subrow'===(e=e||this.type)?'> .module_subrow > .builder_row_cover':'> .builder_row_cover';return this.$liveStyledElmt.find(t)},a.prototype.getComponentBgSlider=function(){const e='colum'===this.type&&'sub-column'===M.activeModel.get('component_name')?'sub-col':'colum'===this.type?'col':this.type;return this.$liveStyledElmt.children('.'+e+'-slider')},a.prototype.removeBgSlider=function(){this.getComponentBgSlider().add(this.$liveStyledElmt.children('.tb_backstretch')).remove(),this.$liveStyledElmt.css({position:'',background:'','z-index':''})},a.prototype.removeBgVideo=function(){this.$liveStyledElmt.removeAttr('data-tbfullwidthvideo').data('tbfullwidthvideo','').children('.big-video-wrap').remove()},M.EdgeDrag={undoData:{},_onDrag:null,init(){const e=M.Utils.getMouseEvents();null===this._onDrag&&(this._onDrag=M.EdgeDrag.drag.bind(this)),localStorage.getItem('tb_disable_padding_dragging')?(T.body[0].classList.add('tb_disable_padding_dragging'),M.Instances.Builder[M.builderIndex].el.removeEventListener(e.mousedown,this._onDrag,{passive:!0}),M.toolbar.el.getElementsByClassName('tb_padding_dragging_mode')[0].checked=!1):(M.Instances.Builder[M.builderIndex].el.addEventListener(e.mousedown,this._onDrag,{passive:!0}),T.body[0].classList.remove('tb_disable_padding_dragging'))},addEdgesOptions(e){const t=e.closest('.tb_dragger');if(!t.getElementsByClassName('tb_dragger_lightbox')[0]){const l=t.classList.contains('tb_dragger_margin')?'margin':'padding',o=M.Models.Registry.lookup(t.closest('[data-cid]').getAttribute('data-cid')),i=o.get('elType'),a='margin'==l&&('column'===i||'row'===i),s=['%','em','px'],n=a?['opposite']:['all','opposite'],r=t.classList.contains('tb_dragger_top')||t.classList.contains('tb_dragger_bottom')?'s':'e',d=a?'margin-top_opp_top':'checkbox_#id#_apply_all',c='1'===this.getCurrentStyling(d,o,l),u=t.dataset.u||'px',m=I.createElement('div'),h=I.createElement('ul'),g=I.createElement('ul');m.className='tb_dragger_lightbox',g.className='tb_dragger_units',h.className='tb_dragger_types';for(let t=s.length-1;-1<t;--t){let e=I.createElement('li');e.textContent=s[t],s[t]===u&&(e.className='current'),g.appendChild(e)}for(let s=n.length-1;-1<s;--s){let e=I.createElement('li'),t=I.createElement('span'),i=!1;if(e.className='tb_apply tb_apply_'+n[s],a||'opposite'!==n[s])i=c;else if(!c){let e='#id#_opp_';e+='s'==r?'top':'left',i='1'==this.getCurrentStyling(e,o,l)}i&&(e.className+=' current'),e.appendChild(t),h.appendChild(e)}m.appendChild(g),m.appendChild(h),t.getElementsByClassName('tb_dragger_options')[0].appendChild(m)}},clearEdges(){},addEdges(i,m,s){if(!('divider'===i||'row'===i&&s.classList.contains('tb-page-break'))){const l=['padding','margin'],h=['right','bottom','left','top'],o=m.get('elType'),g=[],_=h.length;for(let t=l.length-1;-1<t;--t){let a=I.createDocumentFragment(),n=l[t],r='module'===o&&'padding'===n?s.getElementsByClassName('module')[0]:s,d,c='margin'===n&&('column'===i||'row'===i),e,u;(r='subrow'===o&&'padding'===n?s.getElementsByClassName('module_subrow')[0]:r)&&(r=r.children,d=r.length-1),c?'1'==this.getCurrentStyling('margin-top_opp_top',m,n)&&(e=this.getCurrentStyling('margin-top',m,n),u=this.getCurrentStyling('margin-top_unit',m,n)||'px'):'1'==this.getCurrentStyling('checkbox_#id#_apply_all',m,n)&&(e=this.getCurrentStyling('#id#_top',m,n),u=this.getCurrentStyling('#id#_top_unit',m,n)||'px');for(let o=_-1;-1<o;--o)if('margin'!==n||'column'!==i&&'row'!==i||'right'!==h[o]&&'left'!==h[o]){let i,s,t=u,l=e;if(r)for(let e=d;-1<e;--e)if(r[e]&&r[e].classList.contains('tb_dragger_'+h[o])&&r[e].classList.contains('tb_dragger_'+n)){i=r[e];break}if(i)s=i.getElementsByClassName('tb_dragger_value')[0];else{i=I.createElement('div'),s=I.createElement('span'),i.className='tb_dragger tb_dragger_'+h[o]+' tb_dragger_'+n,s.className='tb_dragger_value';let e=I.createElement('div'),t=I.createElement('span');t.className='tb_dragger_arrow',e.className='tb_dragger_options',e.tabIndex=-1,e.appendChild(s),e.appendChild(t),i.appendChild(e),a.appendChild(i)}if(!t){let e=c?'#id#-'+h[o]:'#id#_'+h[o];l=this.getCurrentStyling(e,m,n),t=this.getCurrentStyling(e+'_unit',m,n)||'px'}if(void 0!==l&&null!==l&&''!==l){let e=i.dataset.u||'px';e===t&&i.dataset.v===l||(i.dataset.u=t,i.dataset.v=l,s.textContent=l+t,'padding'!==n&&g.push(i))}}if('margin'===n||'module'!==o&&'subrow'!==o)s.appendChild(a);else{const p='subrow'===o?'module_subrow':'module',y=s.getElementsByClassName(p)[0];y&&y.appendChild(a)}if('padding'!==n)for(let e=g.length-1;-1<e;--e)this.setValueByType(g[e],i,g[e].dataset.v,g[e].dataset.u);if('row'!==o){let e='module'===o||'subrow'===o?'column':s.classList.contains('sub_column')?'subrow':'row',t=s.closest('.module_'+e);'subrow'==e&&(t=t.parentNode),this.addEdges(e,M.Models.Registry.lookup(t.dataset.cid),t)}}}},optionsClick(e){e.preventDefault(),e.stopPropagation(),M.ActionBar.disable=!0,this.addEdgesOptions(e.target.closest('.tb_dragger_options'));const t='LI'===e.target.nodeName?e.target:e.target.parentNode;'LI'===t.nodeName&&(!t.classList.contains('current')&&t.parentNode.classList.contains('tb_dragger_units')?this.changeUnit(t):t.parentNode.classList.contains('tb_dragger_types')&&this.changeApply(t)),M.ActionBar.disable=null},changeUnit(e){const t=e.closest('.tb_dragger_lightbox'),i=t.closest('.tb_dragger'),r=i.classList.contains('tb_dragger_padding')?'padding':'margin',s=i.classList.contains('tb_dragger_top')||i.classList.contains('tb_dragger_bottom')?'s':'e',d=e.textContent||'px',l=i.dataset.v,o=i.dataset.u||'px',a=i.parentNode,c=ThemifyStyles.getSheet(M.activeBreakPoint),u=c.cssRules;let m=i.getElementsByClassName('tb_dragger_types')[0],h=a.children,n=a.closest('[data-cid]'),g,_=''!==l?this.convert(i,o,d,l):'',p=M.Models.Registry.lookup(n.getAttribute('data-cid')),y=p.get('elType'),f=D.clone(n),b=$.extend(!0,{},p.get('module'===y?'mod_settings':'styling'));m=(m=m&&m.getElementsByClassName('current')[0])&&(m.classList.contains('tb_apply_all')?'all':'opposite'),'module'===y&&(y=p.get('mod_name'));const v=ThemifyStyles.getBaseSelector(y,p.get('element_id'));g=P(u,v),I.body.classList.add('tb_edge_drag_start');for(let n=h.length-1;-1<n;--n){let a=h[n].classList;if(a.contains('tb_dragger_'+r)){let o='left';if(a.contains('tb_dragger_bottom')?o='bottom':a.contains('tb_dragger_right')?o='right':a.contains('tb_dragger_top')&&(o='top'),h[n]===i||m&&('opposite'!==m||('s'!=s||'left'!==o&&'right'!==o)&&('e'!=s||'top'!==o&&'bottom'!==o))){let t=h[n].getElementsByClassName('tb_dragger_units')[0],e=r+'-'+o,i='',s=_+d,l='margin'!=r||'column'!==y&&'row'!==y?'#id#_'+o:'#id#-'+o;if(!1!==g&&u[g]?(i=u[g].style[A(e)],u[g].style[A(e)]=s):(g=u.length,c.insertRule(v+'{'+e+':'+s+';}',g)),t)for(let e=(t=t.children).length-1;-1<e;--e)t[e].classList.toggle('current',t[e].textContent===d);'em'!==d&&''!==_&&(_=Math.round(_)),'padding'!=r&&this.setValueByType(h[n],y,_,d),h[n].getElementsByClassName('tb_dragger_value')[0].textContent=''===_?'':s,h[n].dataset.v=_,h[n].dataset.u=d,a.add('tb_dragger_dragged'),this.setData(p,this.getFieldId(l,p,r),_,d),this.setUndoData(g,e,s,i)}}}const C=this;setTimeout(function(){for(let e=h.length-1;-1<e;--e)h[e].classList.remove('tb_dragger_dragged');I.body.classList.remove('tb_edge_drag_start'),d!==o&&C.addUndo(f,b),f=b=h=null},500)},changeApply(e){const t=e.closest('.tb_dragger'),i=t.parentNode,s=t.classList.contains('tb_dragger_padding')?'padding':'margin',l=t.classList.contains('tb_dragger_top')||t.classList.contains('tb_dragger_bottom')?'s':'e',o=i.closest('[data-cid]'),a=M.Models.Registry.lookup(o.getAttribute('data-cid')),n=a.get('elType'),r=D.clone(o),d=$.extend(!0,{},a.get('module'===n?'mod_settings':'styling')),c=e.classList.contains('current')?'':'1',u=e.nextSibling?e.nextElementSibling:e.previousElementSibling;let m='margin-top_opp_top',h;if(('margin'!=s||'column'!==n&&'row'!==n)&&(h='checkbox_#id#_apply_all',m='#id#_opp_',m+='s'==l?'top':'left',e.classList.contains('tb_apply_all'))){const g=m;m=h,h=g}u&&u.classList.remove('current'),e.classList.toggle('current',c),this.setData(a,this.getFieldId(m,a,s),c),h&&this.setData(a,this.getFieldId(h,a,s),''),this.changeUnit(t.getElementsByClassName('tb_dragger_units')[0].getElementsByClassName('current')[0]),this.onChange(),this.addUndo(r,d)},convert(e,t,i,s){if(!s)return 0;if((t=t||'px')===(i=i||'px'))return s;let l,o=e.parentNode;if(o.classList.contains('active_module')){const r=o.classList.contains('active_subrow')?'module_subrow':'module';o=o.getElementsByClassName(r)[0]}const a='em'===i||'em'===t?parseFloat(getComputedStyle(o).fontSize):null,n='%'===i||'%'===t?o.parentNode.offsetWidth:null;return'px'===t?'em'===i?l=+parseFloat(s/a).toFixed(2):'%'===i&&(l=parseFloat(100*s/n)):l='%'===t?(l=parseFloat(s*n/100),'em'===i?+parseFloat(l/a).toFixed(2):parseFloat(l)):(l=parseFloat(s*a),'%'===i&&(l=parseFloat(100*l/n)),parseFloat(l)),Number(l.toFixed(2))},setValueByType(e,t,i,s){let l='margin';s=s||'px';const o=e.classList;for(let e=o.length-1;-1<e;--e)if('tb_dragger_top'===o[e]||'tb_dragger_bottom'===o[e]||'tb_dragger_left'===o[e]||'tb_dragger_right'===o[e]){l+='-'+o[e].replace('tb_dragger_','');break}'px'!==s&&''!==i&&(i=this.convert(e,s,'px',i),s='px'),null==i&&(i='');const a='margin-top'===l||'margin-bottom'===l?'height':'width';e.style[a]=''===i?'':(0<i?i:-i)+s,'row'!==t&&'column'!==t||(e.style[l]=''===i?'':-i+s)},getFieldId(e,t,i){const s=t.get('elType'),l=ThemifyStyles.getStyleOptions('module'===s?t.get('mod_name'):s);return'margin'===i&&('row'===s||'column'===s)||void 0!==l[i+'_top']&&l[i+'_top'].type===i||(i=i[0]),e.replace('#id#',i)},getCurrentStyling(i,e,t){const s=e.get('elType'),l='row'===s||'column'===s||'subrow'===s?e.get('styling'):e.get('mod_settings');if(i=this.getFieldId(i,e,t),null!==M.activeModel&&M.activeModel.cid===e.cid){let e=D.Lightbox.$lightbox[0].querySelector('#'+i);if(null!==e){if(!e.classList.contains('themify-checkbox'))return e.value;if(e=e.getElementsByClassName('tb-checkbox')[0])return!!e.checked&&e.value}}if('desktop'===M.activeBreakPoint)return l[i];let o=void 0;const a=ThemifyConstructor.breakpointsReverse,n=a.indexOf(M.activeBreakPoint);for(let e=n,t=a.length;e<t;++e)if('desktop'!==a[e]){if(void 0!==l['breakpoint_'+a[e]]&&void 0!==l['breakpoint_'+a[e]][i]&&''!==l['breakpoint_'+a[e]][i]){o=l['breakpoint_'+a[e]][i];break}}else if(''!==l[i]){o=l[i];break}return o=void 0===o||''===o||'column'!==s||-1===o.toString().indexOf(',')||0!==i.indexOf('padding')&&!i.indexOf('margin')?o:(o=void 0!==(o=o.trim().split(','))[1]&&''!==o[1]?o[1]:o[0]).trim()},setData(e,t,i,s){if(i&&s&&'em'!==s&&(i=Number(i)),null!==M.activeModel&&e.cid===M.activeModel.cid){let e=D.Lightbox.$lightbox[0].querySelector('#'+t);if(null!==e)return e.classList.contains('themify-checkbox')?(e=e.getElementsByClassName('tb-checkbox')[0])&&(e.checked=!!i):(e.value=i,(e=D.Lightbox.$lightbox[0].querySelector('#'+t+'_unit'))&&(e.value=s)),void(e&&T.triggerEvent(e,'change'));'desktop'===M.activeBreakPoint?(ThemifyConstructor.values[t]=i,s&&(ThemifyConstructor.values[t+'_unit']=s)):(ThemifyConstructor.values['breakpoint_'+M.activeBreakPoint]||(ThemifyConstructor.values['breakpoint_'+M.activeBreakPoint]={}),ThemifyConstructor.values['breakpoint_'+M.activeBreakPoint][t]=i,s&&(ThemifyConstructor.values['breakpoint_'+M.activeBreakPoint][t+'_unit']=s))}const l='module'===e.get('elType')?'mod_settings':'styling',o=$.extend(!0,{},e.get(l)),a={};'desktop'!==M.activeBreakPoint?(o['breakpoint_'+M.activeBreakPoint]||(o['breakpoint_'+M.activeBreakPoint]={}),o['breakpoint_'+M.activeBreakPoint][t]=i,s&&(o['breakpoint_'+M.activeBreakPoint][t+'_unit']=s)):(i?o[t]=i:delete o[t],s&&('px'===s?delete o[t+'_unit']:o[t+'_unit']=s)),a[l]=o,e.set(a,{silent:!0})},onChange(){setTimeout(function(){M.Utils._onResize(!0)},1500)},setUndoData(e,t,i,s){void 0===this.undoData[M.activeBreakPoint]&&(this.undoData[M.activeBreakPoint]={}),void 0===this.undoData[M.activeBreakPoint][e]&&(this.undoData[M.activeBreakPoint][e]={}),t=A(t);const l=this.undoData[M.activeBreakPoint][e];void 0===l[t]&&(l[t]={}),l[t].a=i,void 0===l[t].b&&(l[t].b=s)},addUndo(e,t){const i=e[0].getAttribute('data-cid');if(null===M.activeModel||M.activeModel.cid!==i){const s=M.Models.Registry.lookup(i),l=!0===M.hasChanged,o=$.extend(!0,{},this.undoData),a=$.extend(!0,{},'module'===s.get('elType')?s.get('mod_settings'):s.get('styling')),n=D.clone(I.getElementsByClassName('tb_element_cid_'+i)[0]);e[0].classList.remove('tb_element_clicked'),n[0].classList.remove('tb_element_clicked'),M.hasChanged=!0,M.undoManager.push(i,e,n,'save',{bsettings:t,asettings:a,styles:o,column:!1}),M.hasChanged=l}this.undoData={}},setModulePosition(e){const t=M.ActionBar.prevExpand;if(t){const i=e.getElementsByClassName('tb_dragger_value')[0];if(t.style.top='',i&&i.firstChild){const s=i.getBoundingClientRect(),l=t.getBoundingClientRect();l.bottom>=s.top&&(t.style.top=e.offsetHeight/2+s.height+'px')}}},drag(e){if('touchstart'===e.type||1===e.which)if(e.target.closest('.tb_dragger_options')){const t=M.Utils.getMouseEvents(),l=this,o=e.target;I.addEventListener(t.mouseup,function(e){if(o===e.target){if(e.target.classList.contains('tb_dragger_arrow')){!0!==M.ActionBar.isHoverMode&&M.ActionBar.el.classList.remove('tb_show_toolbar'),this.body.classList.add('tb_dragger_options_open');let i=o.closest('.tb_dragger');const s=function(e){if('mouseout'===e.type||!e.target.closest('.tb_dragger_options')){!0!==M.ActionBar.isHoverMode&&M.ActionBar.el.classList.add('tb_show_toolbar'),I.removeEventListener('click',s,{passive:!0}),N.document.removeEventListener('click',s,{passive:!0}),i.removeEventListener('mouseleave',s,{once:!0,passive:!0}),i.classList.contains('tb_dragger_padding')&&i.classList.contains('tb_dragger_top')&&l.setModulePosition(i),I.body.classList.remove('tb_dragger_options_open');const t=i.getElementsByClassName('tb_dragger_lightbox')[0];t&&t.remove(),i=null}};i.addEventListener('mouseleave',s,{once:!0,passive:!0}),this.addEventListener('click',s,{passive:!0}),N.document.addEventListener('click',s,{passive:!0})}l.optionsClick(e)}},{once:!0})}else if(e.target.classList.contains('tb_dragger')){e.stopImmediatePropagation();const p=e.target,y=this,s=M.Utils.getMouseEvents(),f=p.closest('[data-cid]'),b=M.Models.Registry.lookup(f.getAttribute('data-cid'));if(b){let r=[],d,t,l=e.clientX,a=e.clientY,c,o,i,u,n,m,h,g='',_;const v=b.get('elType'),C='module'===v?b.get('mod_name'):v,S=p.classList.contains('tb_dragger_padding')?'padding':'margin',E=p.classList.contains('tb_dragger_top')||p.classList.contains('tb_dragger_bottom')?'s':'e',B='s'===E?p.classList.contains('tb_dragger_top')?'top':'bottom':p.classList.contains('tb_dragger_left')?'left':'right',k=p.dataset.u||'px',L=function(e,t){let i='px'===k||'%'===k?1:.1,s=p.getBoundingClientRect(),l=0;return l='e'===E?'left'===B?e-s.right:s.left-e:'top'===B?t-s.bottom:s.top-t,('e'===E&&40<s.width&&(e<s.left||e>s.right)||'s'===E&&40<s.height&&(t<s.top||t>s.bottom))&&('%'===k&&65<c||'px'===k&&51<c||'em'===k&&1.5<c)&&(l<0&&(l*=-1),50<l&&(100<l?300<l?i*=6:i*=150<l?200<l?5:4:3:i*=2)),i},w=function(e){e.stopImmediatePropagation(),I.body.classList.add('tb_start_animate','tb_edge_drag_start'),N.document.body.classList.add('tb_start_animate','tb_edge_drag_start'),I.body.style.cursor=$(p).css('cursor'),M.ActionBar.hideContextMenu(),M.ActionBar.clear(),M.ActionBar.disable=!0;const t=p.getElementsByClassName('tb_dragger_lightbox')[0],s=(t&&t.remove(),y.addEdgesOptions(p),c=parseFloat(p.dataset.v)||0,c='em'!==k?parseInt(c):Number(c.toFixed(2)),o=(o=(o=p.getElementsByClassName('tb_dragger_types')[0])&&o.getElementsByClassName('current')[0])&&(o.classList.contains('tb_apply_all')?'all':'opposite'),i=D.clone(f),n=$.extend(!0,{},b.get('module'===v?'mod_settings':'styling')),u=null!==M.activeModel&&M.activeModel.cid===b.cid,g=ThemifyStyles.getBaseSelector(C,b.get('element_id')),m=ThemifyStyles.getSheet(M.activeBreakPoint),h=m.cssRules,_=P(h,g),d='module'===v?f.getElementsByClassName('module')[0]:'subrow'===v?f.getElementsByClassName('module_subrow')[0]:f,f.style.willChange=S,p.parentNode.children);for(let i=s.length-1;-1<i;--i){let t=s[i].classList;if(t.contains('tb_dragger_'+S)){let e='left';t.contains('tb_dragger_bottom')?e='bottom':t.contains('tb_dragger_right')?e='right':t.contains('tb_dragger_top')&&(e='top'),(B===e||o&&('opposite'!==o||('s'!==E||'left'!==e&&'right'!==e)&&('e'!==E||'top'!==e&&'bottom'!==e)))&&(s[i].classList.add('tb_dragger_dragged'),r.push({el:s[i],prop:S+'-'+e,text:s[i].getElementsByClassName('tb_dragger_value')[0]}))}}f.classList.add('tb_element_clicked')},x=function(s){s.stopImmediatePropagation(),t&&cancelAnimationFrame(t),t=requestAnimationFrame(function(){const e=s.clientX,t=s.clientY,i=L(e,t),o=('e'===E?e!==a&&(e>a?'left'===B?c+=i:c-=i:'left'===B?c-=i:c+=i):t!==l&&(t>l?c+=i:c-=i),a=e,l=t,c<0&&'padding'===S?c=0:c%1!=0&&(c=parseFloat(c.toFixed(1))),c+k);for(let t=r.length-1;-1<t;--t){let s=r[t].prop,l=r[t].el,e=r[t].text;if(d.style[s]=o,!0===u&&M.liveStylingInstance.setLiveStyle(s,o,g),'margin'===S){let e=l.classList.contains('tb_dragger_top')||l.classList.contains('tb_dragger_bottom')?'height':'width',t=c,i=k;'px'!==i&&(t=y.convert(l,i,'px',t),i='px'),'row'!==v&&'column'!==v||(l.style[s]=''===o?'':-t+i),l.style[e]=c<0?-t+i:t+i}e.textContent=0===c?'':o}})};I.addEventListener(s.mouseup,function(e){this.removeEventListener(s.mousemove,w,{passive:!0,once:!0}),this.removeEventListener(s.mousemove,x,{passive:!0}),T.trigger('tbDisableInline'),i&&(t&&cancelAnimationFrame(t),this.body.style.cursor=f.style.willChange='',this.body.classList.remove('tb_start_animate','tb_edge_drag_start'),N.document.body.classList.remove('tb_start_animate','tb_edge_drag_start'),T.trigger('tbresizeImageEditor'),requestAnimationFrame(function(){f.classList.remove('tb_element_clicked');for(let n=r.length-1;-1<n;--n){let e=r[n].el,t=r[n].prop,i=d.style[t],s=t.replace(S+'-',''),l='',o='margin'!==S||'column'!==v&&'row'!==v?'#id#_'+s:'#id#-'+s,a=e.getElementsByClassName('tb_dragger_lightbox')[0];0===c&&'margin'===S&&(e.style[A(r[n].prop)]=e.style.width=e.style.height=''),a&&a.remove(),!1!==_&&h[_]?(l=h[_].style[A(t)],h[_].style[A(t)]=i):(_=h.length,m.insertRule(g+'{'+t+':'+i+';}',_)),d.style[t]='',!1===u&&y.setUndoData(_,t,i,l),e.dataset.v=c,e.dataset.u=k,e.classList.remove('tb_dragger_dragged'),y.setData(b,y.getFieldId(o,b,S),c,k)}'padding'===S&&'top'===B&&'module'===v&&y.setModulePosition(r[0].el),y.onChange(),M.Utils.runJs($(f),null,!0),!1===u&&y.addUndo(i,n),M.ActionBar.disable=o=d=M.ActionBar.hoverCid=t=m=h=_=g=u=r=i=n=c=l=a=null,M.hasChanged=!0}))},{once:!0,passive:!0}),I.addEventListener(s.mousemove,w,{passive:!0,once:!0}),I.addEventListener(s.mousemove,x,{passive:!0})}}}},M.createStyleInstance=function(){return new a}}(jQuery,Themify,window,window.top,document,tb_app,ThemifyBuilderCommon);