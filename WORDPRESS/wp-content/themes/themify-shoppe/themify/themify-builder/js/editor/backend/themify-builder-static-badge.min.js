!function($,o,c){'use strict';let e='';const i='<!--themify_builder_static--><!--/themify_builder_static-->',n=[/<!--themify_builder_static-->([\s\S]*?)<!--\/themify_builder_static-->/gi,/&lt;!--themify_builder_static--&gt;([\s\S]*?)&lt;!--\/themify_builder_static--&gt;/gi,/&amp;lt;!--themify_builder_static--&amp;gt;([\s\S]*?)&amp;lt;!--\/themify_builder_static--&amp;gt;/gi],r=themifyBuilder.short_badge?'excerpt':'content',t=(o.mce.views.register('tb_static_badge',{template:o.media.template('tb-static-badge'),bindNode(t,e){$(e).on('click','.tb_mce_view_frontend_btn',this.goToFront).on('click','.tb_mce_view_backend_btn',this.goToBack)},getContent(){return this.template({})},match(t){const e=o.mce.views._tb_static_content.isMatch(t);if(e)return{index:e.index,content:e[0],options:{}}},View:{className:'tb_static_badge',template:o.media.template('tb-static-badge'),getHtml:function(){return this.template({})}},edit(t){this.goToFront()},goToFront(){$('#tb_switch_frontend').trigger('click')},goToBack(){tb_app._backendBuilderFocus()},contentPlaceholder(t){return e=e||t,i+(t.length>i.length?' '.repeat(t.length-i.length):'')}}),o.mce.views._tb_static_content={setContent(t,e){e=e&&e.trim(),'undefined'!=typeof tinyMCE&&tinyMCE.activeEditor&&tinyMCE.activeEditor.id===r?tinyMCE.activeEditor.hidden?e!==$('#'+r).val().trim()&&$('#'+r).val(e):e!==t.getContent().trim()&&t.setContent(e):e!==t.val().trim()&&t.val(e)},isMatch(t){return n[0].exec(t)||n[1].exec(t)||n[2].exec(t)}},$(document).on('tinymce-editor-init',function(t,e){if(e.wp&&e.wp._createToolbar){const i=e.wp._createToolbar(['wp_view_edit']);i&&e.on('wptoolbar',function(t){e.dom.hasClass(t.element,'wpview')&&'tb_static_badge'===e.dom.getAttrib(t.element,'data-wpview-type')&&(t.toolbar=i)})}if(e.id!==r){const n=e.getContent();let t=o.mce.views._tb_static_content.isMatch(n);c.isNull(t)||e.setContent(n.replace(t[0],''))}else e.setContent(o.mce.views.setMarkers(e.getContent()));e.on('beforesetcontent',function(t){t.content=o.mce.views.setMarkers(t.content)})}),$('body').on('themify_builder_save_data',function(t,e){if(themifyBuilder.is_gutenberg_editor||!e.data||!e.data.static_content)return!0;let i,n,a=null;if('undefined'!=typeof tinyMCE&&tinyMCE.activeEditor&&tinyMCE.activeEditor.id===r)i=tinyMCE.activeEditor,n=!1===tinyMCE.activeEditor.hidden?tinyMCE.activeEditor.getContent():tinymce.DOM.get(r).value,a=o.mce.views._tb_static_content.isMatch(n);else{if(!(i=$('#'+r)).length)return;n=i.val(),a=o.mce.views._tb_static_content.isMatch(n)}c.isNull(a)?o.mce.views._tb_static_content.setContent(i,n+e.data.static_content):o.mce.views._tb_static_content.setContent(i,n.replace(a[0],e.data.static_content))}),{timeout:null,init(){$(window).on('YoastSEO:ready',function(){t.load()})},load(){themifyBuilder.is_gutenberg_editor&&(e=o.data.select("core/editor").getCurrentPost().builder_content),YoastSEO.app.registerPlugin('TBuilderReader',{status:'loading'}),YoastSEO.app.pluginReady('TBuilderReader'),YoastSEO.app.registerModification(r,t.readContent,'TBuilderReader',5),t.update()},readContent(t){return e&&(themifyBuilder.is_gutenberg_editor?t+=' '+e:t=t.replace(i,e).replace(/(\r\n|\n|\r)/gm,'')),t},update(){this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(function(){YoastSEO.app.refresh()},250)}});t.init()}(jQuery,wp,_);