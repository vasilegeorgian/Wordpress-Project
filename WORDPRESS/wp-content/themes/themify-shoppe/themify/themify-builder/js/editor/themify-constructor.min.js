var ThemifyConstructor;!function($,k,y,L){'use strict';let S={ActionBar:{}},v='undefined'!=typeof ThemifyBuilderCommon?ThemifyBuilderCommon:{};ThemifyConstructor={data:null,key:'tb_form_templates_',styles:{},settings:{},editors:null,afterRun:[],radioChange:[],bindings:[],stylesData:null,values:{},clicked:null,type:null,static:null,label:null,is_repeat:null,is_sort:null,is_new:null,is_ajax:null,breakpointsReverse:null,set(e){try{let t=themify_vars.version;for(let e in themifyBuilder.modules)t+=e;return themifyBuilder.cache_data&&(t+=themifyBuilder.cache_data),localStorage.setItem(this.key,JSON.stringify({val:e,h:k.hash(t)})),!0}catch(e){return!1}},get(){if(themifyBuilder.debug)return!1;try{let e=localStorage.getItem(this.key),t=themify_vars.version;if(!e)return!1;e=JSON.parse(e);for(let e in themifyBuilder.modules)t+=e;return themifyBuilder.cache_data&&(t+=themifyBuilder.cache_data),e.h===k.hash(t)&&e.val}catch(e){return!1}},getEl(e){return ThemifyBuilderCommon.Lightbox.$lightbox[0].querySelector('#'+e)},getForms(t){if('undefined'!=typeof tb_app){if(void 0!==tb_app.Constructor){for(let e in tb_app.Constructor)ThemifyConstructor[e]=tb_app.Constructor[e];delete tb_app.Constructor}v=ThemifyBuilderCommon,S=tb_app}this.breakpointsReverse=Object.keys(themifyBuilder.breakpoints).reverse(),this.breakpointsReverse.push('desktop');const l=this,e=l.get(),a=function(e){v.Lightbox.setup(),l.data=e,t&&t()};if(!1!==e)a(e);else{let i={};const s=Object.keys(themifyBuilder.modules).length+3,n=function(t){++t,$.ajax({type:'POST',url:themifyBuilder.ajaxurl,dataType:'json',data:{action:'tb_load_form_templates',tb_load_nonce:themifyBuilder.tb_load_nonce,page:t},success(e){e&&(i=Object.assign(i,e),s>Object.keys(i).length?n(t):(a(i),l.set(i),i=t=null))}})};n(0)}l.static=themifyBuilder.i18n.options,themifyBuilder.i18n.options=null,this.label=themifyBuilder.i18n.label,themifyBuilder.i18n.label=null;let i=l.static.fonts.safe;for(let e=0,t=i.length;e<t;++e)''!==i[e].value&&'default'!==i[e].value&&(l.font_select.safe[i[e].value]=i[e].name);l.static.fonts.safe=null;for(let e=0,t=(i=l.static.fonts.google).length;e<t;++e)''!==i[e].value&&'default'!==i[e].value&&(l.font_select.google[i[e].value]={n:i[e].name,v:i[e].variant.map(function(e){return e='string'==typeof e?e.replace('i','italic').replace('r','regular'):e.toString()})});l.static.fonts.google=i=themifyBuilder.google=null;for(let e=0,t=(i=l.static.fonts.cf).length;e<t;++e)''!==i[e].value&&'default'!==i[e].value&&(l.font_select.cf[i[e].value]={n:i[e].name,v:i[e].variant});l.static.fonts.cf=i=themifyBuilder.cf=null},getOptions(t){if(void 0!==t.options)return t.options;for(let e in this.static)if(!0===t[e])return this.static[e];return!1},getTitle(e){return'custom_css'===e.type?this.label.custom_css:'title'===e.type?this.label.m_t:void 0!==e.label&&(void 0!==this.label[e.label]?this.label[e.label]:e.label)},getSwitcher(){const a=L.createElement('ul'),s=this.breakpointsReverse,i=this;a.className='tb_lightbox_switcher tf_clearfix';for(let l=s.length-1;-1<l;--l){let e=s[l],t=L.createElement('li'),i=L.createElement('a');i.href='#'+e,i.className='tab_'+e,i.title='tablet_landscape'===e?this.label.table_landscape:e.charAt(0).toUpperCase()+e.substr(1),i.appendChild(S.Utils.getIcon('ti-'+('tablet_landscape'===e?'tablet':e))),t.appendChild(i),a.appendChild(t)}return a.addEventListener('click',function(e){if(e.preventDefault(),e.stopImmediatePropagation(),e.target!==a){const t=e.target.closest('a');null!==t&&i.lightboxSwitch(t.getAttribute('href'))}}),a},lightboxSwitch(e){const t=e.replace('#','');t!==S.activeBreakPoint&&(S.activeModel&&'visual'===S.mode&&(S.scrollTo=S.liveStylingInstance.$liveStyledElmt),$('.tb_breakpoint_switcher.breakpoint-'+t,y.document).trigger('click'))},binding(e,l,i,a){let s=!1;const n=l.binding,t=l.type;if('select'===t&&0==i&&(i=''),'video'===t)if(''==i)s=n.empty;else{const c=k.parseVideo(i);if('youtube'===c.type||'vimeo'===c.type)s=n.external;else{let t;try{t=new URL(i)}catch(e){t=!1}s=!1!==t&&window.top.location.hostname===t.hostname?n.local:n.empty}}else i||void 0===n.empty?i&&void 0!==n[i]?s=('radio'!==t&&'icon_radio'!==t||!0===e.checked)&&n[i]:i&&void 0!==n.not_empty?s=n.not_empty:void 0!==n.select&&i!==n.select.value?s=n.select:void 0!==n.checked&&!0===e.checked?s=n.checked:void 0!==n.not_checked&&!1===e.checked&&(s=n.not_checked):s=n.empty;if(s){null!=a&&0!==a.length||null===(a=e.closest('.tb_tab'))&&null===(a=e.closest('.tb_expanded_opttions'))&&(a=y.document.getElementById('tb_lightbox_container'));const p=void 0!==s.hide,u=void 0!==s.show,m=[],_=function(i,l){let a;const s=Object.keys(i);for(let e=0,t=s.length;e<t;++e){if(void 0!==i[s[e]].id&&i[s[e]].id===l){a=i[s[e]];break}if(i[s[e]]&&'object'==typeof i[s[e]]&&void 0!==(a=_(i[s[e]],l)))break}return a};1!=u||Array.isArray(s.show)||(s.show=[s.show]),1!=p||Array.isArray(s.hide)||(s.hide=[s.hide]);let t=1==u?s.show:[];for(let i=0,e=(t=1==p?t.concat(s.hide):t).length;i<e;++i){if(1==p&&void 0!==s.hide[i]){const h=a.querySelectorAll('.'+s.hide[i]);for(let t=h.length-1;-1<t;--t)if(h[t].classList.add('_tb_hide_binding'),'object'==typeof this.data&&null!==this.type&&'object'==typeof this.data[this.type]){let e=_(this.data[this.type][this.clicked],s.hide[i]);'object'==typeof e&&'object'==typeof e.binding&&m.push({el:h[t],data:e})}}if(1==u&&void 0!==s.show[i]){const b=a.querySelectorAll('.'+s.show[i]);for(let t=b.length-1;-1<t;--t)if(!('ajax_filter'===s.show[i]&&'post_filter'===l.id&&0<a.querySelectorAll('#auto_tiles.selected').length)&&(b[t].classList.remove('_tb_hide_binding'),'object'==typeof this.data&&null!==this.type&&'object'==typeof this.data[this.type])){let e=_(this.data[this.type][this.clicked],s.show[i]);'object'==typeof e&&'object'==typeof e.binding&&m.push({el:b[t],data:e})}}}for(let t=m.length-1;-1<t;--t){var o=m[t].el,r=m[t].data,d=a;const g=o.dataset.type;let e;'radio'===g?null===(e=o.querySelector('input:checked'))&&(e=o.getElementsByTagName('input')[0]):'checkbox'===g||'toggle_switch'===g?e=o.getElementsByTagName('input')[0]:'select'===g&&(e=o.getElementsByTagName('select')[0]),void 0!==e&&(('radio'===g||'checkbox'===g||'toggle_switch'===g)&&e.checked&&o.classList.contains('_tb_hide_binding')&&(e.checked=!1),this.binding(e,r,e.value,d))}if(void 0!==s.responsive&&void 0!==s.responsive.disabled){Array.isArray(s.responsive.disabled)||(s.responsive.disabled=[s.responsive.disabled]);const f=s.responsive.disabled,v='desktop'!==S.activeBreakPoint;for(let i=f.length-1;-1<i;--i)if(void 0!==s.responsive.disabled[i]){let t=a.querySelectorAll('.'+s.responsive.disabled[i]);for(let e=t.length-1;-1<e;--e)t[i].classList.toggle('responsive_disable',v)}}}},control:{init(e,t,i){this[i.name=t].call(this,e,i)},preview(t,i,o){if('visual'===S.mode){const l=ThemifyConstructor;let n=null,e=null;if(!0===o.repeat&&null===(e=t.closest('.tb_toggleable_fields'))&&null===(e=t.closest('.tb_sort_fields_parent'))&&(e=t.closest('.tb_row_js_wrapper')),void 0!==o.selector&&i)if(0===(n=S.liveStylingInstance.$liveStyledElmt[0].querySelectorAll(o.selector)).length)n=null;else if(null!==e){const r=t.closest('.tb_repeatable_field');let a=e.children,s=null;for(let e=0,t=a.length-1;e<t;++e)if(a[e]===r){s=e;break}if(void 0!==o.rep?void 0!==(n=S.liveStylingInstance.$liveStyledElmt[0].querySelectorAll(o.rep))[s]&&0===(a=n[s].querySelectorAll(o.selector)).length&&(a=null):a=null!==s&&void 0!==n[s]?[n[s]]:null,null!==a&&void 0!==a){n=[];for(let i=a.length-1;-1<i;--i){let e=a[i].closest('.tf_swiper-slide');if(null!==e){let t=e.closest('.tf_swiper-wrapper');if(null!==t){let l=t.querySelectorAll('.tf_swiper-slide[data-swiper-slide-index="'+s+'"]'),e=l.length;if(0!==e)for(let i=e-1;-1<i;--i)for(let e=l[i].querySelectorAll(o.selector),t=e.length-1;-1<t;--t)n.push(e[t]);else n.push(a[i])}}else n.push(a[i])}}else n=null}null!==e?(l.settings[e.id]=S.Utils.clear(S.Forms.parseSettings(e).v),e=null):l.settings[o.id]=i,'refresh'===o.type||!0===l.is_ajax?S.activeModel.trigger('custom:preview:refresh',l.settings,n,i):S.activeModel.trigger('custom:preview:live',l.settings,'wp_editor'===o.name||'TEXTAREA'===t.tagName,null,n,i)}else S.activeModel.backendLivePreview();S.hasChanged=!0},change(e,i){let l=this,t='refresh'===i.type&&void 0===i.selector?1e3:50,a;void 0===i.event?(a='change',t=1):a=i.event,e.addEventListener(a,_.throttle(function(e){const t=e.target;if('keyup'===e.type){if(t.value===t.dataset.oldValue)return;t.dataset.oldValue=t.value}l.preview(t,t.value,i)},t),{passive:!0})},wp_editor(i,l){$('.wrap > #message').attr('id','wp-message');let a=this,s=$(i),e='refresh'===l.type&&void 0===l.selector?1e3:50,t=i.id,n=!1,o=!1,r=_.throttle(function(e){const t='setupeditor'===this.type?this.getContent():this.value;null!==S.activeModel&&n!==t&&(n=t,!1!==o?(i.value=t,s.trigger('change')):a.preview(i,t,l))},e);if(S.Utils.initQuickTags(t),'undefined'!=typeof tinyMCE){void 0!==tinymce.editors[t]&&tinyMCE.execCommand('mceRemoveEditor',!0,t);const d=S.Utils.initNewEditor(t);o=!!i.classList.contains('wp-editor-area')&&0<s.closest('#instance_widget').length,d.type||(d.type='setupeditor'),d.on('change keyup',r)}s.on('change keyup',r)},layout(e,a){if('visual'===S.mode){const s=this;e.addEventListener('change',function(e){let t=e.detail.val;if(0===t.indexOf('grid-')?t=t.replace('grid-','grid'):isNaN(t)||(t='grid'+t),void 0!==a.classSelector&&'auto_tiles'!==t){const i=a.id,l=''!==a.classSelector?S.liveStylingInstance.$liveStyledElmt.find(a.classSelector).first():S.liveStylingInstance.$liveStyledElmt;let e=ThemifyConstructor.settings[i];e&&(0===e.indexOf('grid-')?e=e.replace('grid-','grid'):isNaN(e)||(e='grid'+e)),ThemifyConstructor.settings[i]=t,0<l.length?(l.removeClass(e).addClass(t),S.Utils.runJs(S.liveStylingInstance.$liveStyledElmt,'module')):s.preview(this,t,a)}else s.preview(this,t,a)},{passive:!0})}},icon(e,l){const a=this;e.addEventListener('change',function(e){const t=e.target.value,i=this.closest('.tb_field').getElementsByClassName('themify_fa_toggle')[0];void 0!==i&&(i.firstChild&&i.firstChild.remove(),t&&i.appendChild(S.Utils.getIcon(t))),a.preview(e.target,t,l)},{passive:!0})},checkbox(e,t){if('visual'===S.mode){const a=this;e.addEventListener('change',function(){const i=[],l=this.closest('.themify-checkbox').getElementsByClassName('tb-checkbox');for(let e=0,t=l.length;e<t;++e)l[e].checked&&i.push(l[e].value);a.preview(this,i.join('|'),t)},{passive:!0})}},color(e,t){if('visual'===S.mode){const i=this;e.addEventListener('themify_builder_color_picker_change',function(e){i.preview(this,e.detail.val,t)},{passive:!0})}},widget_select(e,t){this.preview(e,e.find(':input').themifySerializeObject(),t)},queryPosts(e,t){if('visual'===S.mode){const i=this;e.addEventListener('queryPosts',function(e){t.id=this.id,ThemifyConstructor.settings=S.Utils.clear(S.Forms.serialize('tb_options_setting')),i.preview(this,ThemifyConstructor.settings[t.id],t)},{passive:!0})}}},initControl(l,a){if(null!==S.activeModel){if('setting'===this.clicked&&'custom_css'!==a.type){if(!1!==a.control&&'module'===this.component){const t=a.control||{};let e=a.type;!0===t.repeat?t.id=l.getAttribute('data-input-id'):!0===this.is_repeat?(t.repeat=!0,t.id=l.getAttribute('data-input-id')):t.id=a.id,void 0===t.control_type?void 0!==e&&'text'!==e&&'number'!==e&&'url'!==e&&'autocomplete'!==e&&'range'!==e&&'radio'!==e&&'icon_radio'!==e&&'select'!==e&&'gallery'!==e&&'textarea'!==e&&'address'!==e&&'image'!==e&&'date'!==e&&'audio'!==e&&'video'!==e&&'select_menu'!==e&&'widgetized_select'!==e&&'layoutPart'!==e&&'selectSearch'!==e&&'hidden'!==e&&'toggle_switch'!==e||(void 0!==t.event||'text'!==e&&'textarea'!==e||(t.event='keyup'),e='change'):e=t.control_type,this.control.init(l,e,t)}}else'visual'===S.mode&&'styling'===this.clicked&&S.liveStylingInstance.bindEvents(l,a);if(void 0!==a.binding){const s=this,n=!0===s.is_repeat,i=function(e,t){let i;n&&null===(i=l.closest('.tb_sort_field_dropdown'))&&null===(i=l.closest('.tb_toggleable_fields_options'))&&(i=l.closest('.tb_repeatable_field_content')),s.binding(e,a,t,i)};'layout'===a.type||'frame'===a.type?l.addEventListener('click',function(e){const t=e.target.closest('.tfl-icon');null!==t&&i(this,t.id)},{passive:!0}):l.addEventListener('change',function(e){i(this,this.value)},{passive:!0}),this.bindings.push({el:l,data:a,repeat:n})}}return l},callbacks(){let e;if(null!==this.afterRun&&0<(e=this.afterRun.length)){for(let e=0;e<this.afterRun.length;++e)this.afterRun[e].call();this.afterRun=[]}if(null!==this.radioChange&&0<(e=this.radioChange.length)){for(let e=0;e<this.radioChange.length;++e)this.radioChange[e].call();this.radioChange=[]}if(null!==this.bindings&&0<(e=this.bindings.length)){for(let l=e-1;-1<l;--l){let e=this.bindings[l].el,t=!0===this.bindings[l].repeat?e.closest('.tb_repeatable_field_content'):void 0,i='layout'===this.bindings[l].data.type||'frame'===this.bindings[l].data.type?e.getElementsByClassName('selected')[0].id:e.value;!0===this.bindings[l].repeat&&null===(t=e.closest('.tb_sort_field_dropdown'))&&null===(t=e.closest('.tb_toggleable_fields_options'))&&(t=e.closest('.tb_repeatable_field_content')),this.binding(e,this.bindings[l].data,i,t)}this.bindings=[]}},setUpEditors(){for(let e=this.editors.length-1;-1<e;--e)this.initControl(this.editors[e].el,this.editors[e].data);this.editors=[]},switchTabs(e){'A'===this.nodeName&&e.preventDefault(),e.stopPropagation();const t=this.getAttribute('href'),i=this.parentNode,l=i.parentNode,a=l.parentNode;let s=a.querySelector(t);if((s=s&&s.parentNode===a?s:y.document.getElementById(t.replace('#','')))&&!i.classList.contains('current')){const n=l.children,o=s.parentNode.children;for(let e=n.length-1;-1<e;--e)n[e].classList.remove('current');i.classList.add('current');for(let e=o.length-1;-1<e;--e)o[e].classList.contains('tb_tab')&&(o[e].style.display='none');s.style.display='block',k.body.triggerHandler('themify_builder_tabsactive',[t,s]),k.triggerEvent(s,'themify_builder_tabsactive',{id:t}),S.Utils.hideOnClick(l)}},run(i,e){this.styles={},this.settings={},this.editors=[],this.afterRun=[],this.radioChange=[],this.bindings=[],this.stylesData={},this.is_repeat=null,this.is_sort=null,this.component=null,this.type=i,this.is_new=null,this.is_ajax=null;let o,r=!1,d=!1,c=S.activeModel,a;if(null!==c){this.component=c.get('elType');let e,t=L.getElementsByClassName('tb_element_cid_'+c.cid)[0];'module'===this.component?(this.is_ajax='ajax'===themifyBuilder.modules[i].type,e='mod_settings',void 0!==c.get('is_new')&&(this.is_new=!0,t=t.closest('.module_row'))):e='styling',this.values=$.extend(!0,{},c.get(e)),void 0!==t&&(S.beforeEvent=v.clone(t)),d=void 0!==c.get('visibileClicked'),r=!1===d&&('column'===this.component||void 0!==c.get('styleClicked')),void 0===this.data[i].visibility&&(this.data[i].visibility=!0),void 0===this.data[i].animation&&(this.data[i].animation=!0),o=this.data[i]}else this.values={},this.component=null,o=i;const p=L.createDocumentFragment(),u=L.createDocumentFragment(),m=this,_={styling:'ti-brush',animation:'ti-layers-alt',visibility:'ti-eye'},h=function(e,t){const i=L.createElement('div'),l=L.createDocumentFragment();if(i.className='tb_options_tab_content','visibility'===e||'animation'===e)t=m.static[e];else if('styling'===e){const a=L.createElement('div'),s=S.GS.globalStylesHTML();a.className='tb_styling_tab_header',a.appendChild(m.getSwitcher()),s&&a.appendChild(s),l.appendChild(a)}if(i.appendChild(m.create(t)),l.appendChild(i),'styling'===e){const n=L.createElement('a'),o=L.createElement('i');n.href='#',n.className='reset-styling',o.className='tf_close',n.appendChild(o),n.appendChild(L.createTextNode(m.label.reset_style)),n.addEventListener('click',m.resetStyling.bind(m)),l.appendChild(n),'visual'===S.mode&&c&&setTimeout(function(){S.liveStylingInstance.module_rules=m.styles},600)}return t=null,l};this.clicked=null;for(let n in o)if(!1!==o[n]){let e=L.createElement('li'),t=L.createElement('a'),i=L.createElement('span'),l=L.createElement('div'),a=void 0!==o[n].name?o[n].name:this.label[n],s='tb_options_'+n;t.href='#'+s,t.textContent=a,'setting'!==n&&(t.className='tb_tooltip',i.textContent=a,_[n]&&t.appendChild(S.Utils.getIcon(_[n])),t.appendChild(i)),l.id=s,l.className='tb_tab tb_options_tab_wrapper',(!0===r&&'styling'===n||!0===d&&'visibility'===n||!1===r&&!1===d&&'setting'===n||null===this.component)&&(e.className='current',m.clicked=n,void 0!==o[n].html?l.appendChild(o[n].html):l.appendChild(h(n,o[n].options)),l.style.display='block',l.dataset.done=!0),l.addEventListener('themify_builder_tabsactive',function(e){const t=e.detail.id.replace('#tb_options_','');m.clicked=t,void 0===this.dataset.done&&(this.dataset.done=!0,this.appendChild(h(t,o[t].options)),m.callbacks(),'setting'===t&&m.setUpEditors())},{passive:!0}),t.addEventListener('click',this.switchTabs),u.appendChild(l),e.appendChild(t),p.appendChild(e)}const t=v.Lightbox.$lightbox[0].getElementsByClassName('tb_options_tab')[0],l=v.Lightbox.$lightbox[0].getElementsByClassName('tb_lightbox_actions_wrap')[0];for(;null!==t.firstChild;)t.removeChild(t.lastChild);for(;null!==l.firstChild;)l.removeChild(l.lastChild);if(t.appendChild(p),void 0!==e||c){const s=L.createElement('button');if(s.className='builder_button builder_save_button',s.title=void 0!==e&&void 0!==e.ctr_save?this.label[e.ctr_save]:this.label.ctr_save,s.textContent=void 0!==e&&void 0!==e.done?this.label[e.done]:this.label.done,c){S.autoSaveCid=c.cid,'visual'===S.mode&&(null!==S.GS.activeGS?(S.liveStylingInstance=S.createStyleInstance(),S.liveStylingInstance.init(null,!0)):(null===S.liveStylingInstance&&(S.liveStylingInstance=S.createStyleInstance()),S.liveStylingInstance.init()),a=S.liveStylingInstance.$liveStyledElmt[0].outerHTML);const n=function(e){e.preventDefault(),e.stopImmediatePropagation(),m.saveComponent(!1)&&(s.removeEventListener('click',n),b.removeEventListener('click',n,{once:!0}))},b=L.createElement('a'),g=L.createElement('li'),f=L.createElement('span');g.className='tb_top_save_btn',b.className='tb_tooltip',f.textContent=this.label.done,b.appendChild(S.Utils.getIcon('ti-check')),b.appendChild(f),g.appendChild(b),t.appendChild(g),s.addEventListener('click',n),b.addEventListener('click',n,{once:!0})}l.appendChild(s)}return k.body.one('themify_builder_lightbox_close',function(){if(m.radioChange=m.afterRun=m.bindings=m.editors=[],m.stylesData=m.settings=m.styles={},m.is_ajax=m.is_repeat=m.is_sort=m.clicked=null,c){let e;if(m.is_new&&'module'===S.activeModel.get('elType')){const t='visual'===S.mode?S.liveStylingInstance.$liveStyledElmt:k.body.find('.tb_element_cid_'+S.activeModel.cid);e=t.closest('.module_row.tb_new_row')}if(!0!==S.saving&&void 0!==a&&S.hasChanged){const i=S.Models.Registry.lookup(c.cid);i&&i.trigger('custom:restorehtml',a)}if(m.is_new)if(c.unset('is_new',{silent:!0}),!0!==S.saving){if(c.trigger('dom:module:unsaved'),void 0!==e&&0<e.length){const l=S.Models.Registry.lookup(e.data('cid'));l&&l.destroy()}}else void 0!==e&&0<e.length&&e[0].classList.remove('tb_new_row');else c.unset('styleClicked',{silent:!0}),c.unset('visibileClicked',{silent:!0});if('visual'===S.mode&&S.liveStylingInstance.clear(),S.activeModel=c=null,'undefined'!=typeof tinyMCE)for(let e=tinymce.editors.length-1;-1<e;--e)'content'!==tinymce.editors[e].id&&tinyMCE.execCommand('mceRemoveEditor',!0,tinymce.editors[e].id)}k.body.off('themify_builder_change_mode.updatestyles'),a=o=m.type=m.component=m.is_new=null,m.values={},m.tabs.click=0}).on('themify_builder_change_mode.updatestyles',this.updateStyles.bind(this)),setTimeout(function(){'setting'===m.clicked&&m.setUpEditors(),m.callbacks(),k.triggerEvent(L,'tb_editing_'+m.type),'module'===m.component&&k.triggerEvent(L,'tb_editing_module')},5),!0===r?c.unset('styleClicked',{silent:!0}):!0===d&&c.unset('visibileClicked',{silent:!0}),u},getStyleVal(i,l,a){let s=void 0;if(''!==i&&null!==S.activeModel){if(void 0===a&&(a=this.values),'desktop'===(l=void 0===l?S.activeBreakPoint:l)||'styling'!==this.clicked)s=null!==a&&''!==a[i]?a[i]:void 0;else{const n=this.breakpointsReverse;for(let e=n.indexOf(l),t=n.length;e<t;++e)if('desktop'!==n[e]){if(void 0!==a['breakpoint_'+n[e]]&&void 0!==a['breakpoint_'+n[e]][i]&&''!==a['breakpoint_'+n[e]][i]){s=a['breakpoint_'+n[e]][i];break}}else if(''!==a[i]){const o=this.stylesData&&void 0!==this.stylesData[i]?this.stylesData[i].binding:void 0;s=void 0!==o&&void 0!==o[a[i]]&&void 0!==o[a[i]].responsive&&void 0!==o[a[i]].responsive.disabled&&-1!==o[a[i]].responsive.disabled.indexOf(i)?void 0:a[i];break}}void 0===s||''===s||!S.activeModel||'column'!==S.activeModel.get('elType')||-1===s.toString().indexOf(',')||0!==i.indexOf('padding')&&-1===i.indexOf('margin')||(void 0!==(s=s.trim().split(','))[0]&&''!==s[1]?s=s[0]:void 0!==s[1]&&''!==s[1]&&(s=s[1]),s=s.trim())}return s},updateStyles(e,t,i){this.setStylingValues(t);const l=this.clicked;this.clicked='styling';for(let s in this.stylesData){let t=this.stylesData[s].type;if(t&&'video'!==t&&'gallery'!==t&&'autocomplete'!==t&&'custom_css'!==t&&'builder'!==t&&!1!==this.stylesData[s].is_responsive){'icon_radio'===t?t='radio':'icon_checkbox'===t?t='checkbox':'textarea'===t||'icon'===t||'hidden'===t||'number'===t?t='text':'image'===t?t='file':'padding'===t||'border_radius'===t?t='margin':'frame'===t&&(t='layout');let a=this.getStyleVal(s);if(this[t].update(s,a,this),void 0!==this.stylesData[s].binding){let e=this.getEl(s),i,l=(i='layout'===t?e.getElementsByClassName('tfl-icon'):'radio'===t||'checkbox'===t?e.getElementsByTagName('input'):[e],this.stylesData[s]);for(let e=0,t=i.length;e<t;++e)this.binding(i[e],l,a)}}}const a=y.document.querySelectorAll('#tb_options_styling option.responsive_disable');for(let e=a.length-1;0<=e;e--)a[e].disabled='desktop'!==i;this.clicked=l},setStylingValues(t){const i=S.Forms.serialize('tb_options_styling',!0),l='desktop'===t;0==l&&void 0===this.values['breakpoint_'+t]&&(this.values['breakpoint_'+t]={});for(let e in i)1==l?this.values[e]=i[e]:this.values['breakpoint_'+t][e]=i[e]},saveComponent(e){if(null!==this.values){S.saving=!0;const a=S.Forms,s='module'===this.component;if(s&&!a.isValidate(y.document.getElementById('tb_options_setting'))||void 0!==v.Lightbox.$lightbox[0].getElementsByClassName('tb_disable_save')[0])return S.saving=!1,S.beforeEvent=null,e&&(S.hasChanged=!0,v.Lightbox.$lightbox.find('.tb_close_lightbox')[0].click()),!1;k.body.triggerHandler('themify_builder_save_component',e),'visual'===S.mode&&y.jQuery('body').triggerHandler('themify_builder_save_component',e),delete this.values.cid;const n=$.extend(!0,{},this.beforeData||this.values);let t=!1,i='styling',l=L.getElementsByClassName('tb_element_cid_'+S.activeModel.cid)[0];if(null!==(l=void 0===l?L.querySelector('[data-cid="'+S.activeModel.cid+'"]'):l)){l=$(l);const o=a.serialize('tb_options_setting',!0);for(let e in o)this.values[e]=o[e];if('column'!==this.component){s&&(i='mod_settings');const d=a.serialize('tb_options_animation',!0);for(let e in d)this.values[e]=d[e];const c=a.serialize('tb_options_visibility',!0);for(let e in c)this.values[e]=c[e];'visual'===S.mode&&('hide_all'===c.visibility_all||'hide'===c.visibility_desktop||'hide'===c.visibility_tablet||'hide'===c.visibility_tablet_landscape||'hide'===c.visibility_mobile?l[0].classList.add('tb_visibility_hidden'):l[0].classList.remove('tb_visibility_hidden'))}this.setStylingValues(S.activeBreakPoint);const r={};r[i]=$.extend(!0,{},S.Utils.clear(this.values)),S.activeModel.set($.extend(!0,{},r),{silent:!0}),s&&(this.is_new&&((t=l.closest('.module_column')).closest('.module_row').removeClass('tb_row_empty'),t.closest('.active_subrow').removeClass('tb_row_empty'),t=v.clone(t)),S.Instances.Builder[S.builderIndex].removeLayoutButton());let e;'visual'===S.mode&&(e=$.extend(!0,{},S.liveStylingInstance.undoData),l[0].classList.remove('tb_visual_hover'),l.find('.tb_visual_hover').removeClass('tb_visual_hover')),S.ActionBar.hoverCid===S.activeModel.cid&&(S.ActionBar.hoverCid=null,S.ActionBar.clearSelected()),S.undoManager.push(S.activeModel.cid,S.beforeEvent,l,'save',{bsettings:n,asettings:this.values,styles:e,column:t})}v.Lightbox.close(e),S.beforeEvent=null,S.saving=!1}return!0},resetStyling(e,t){e.preventDefault(),e.stopPropagation();const a=!0===t?void 0:$('#tb_options_styling',ThemifyBuilderCommon.Lightbox.$lightbox)[0];let i=S.activeModel.get('elType');if('module'===i&&(i=S.activeModel.get('mod_name')),!this.beforeData&&(this.beforeData=$.extend(!0,{},this.values),void 0!==a)){const s=this;k.body.one('themify_builder_lightbox_before_close',function(){s.beforeData=null})}if(!1===S.GS.isGSPage&&null===S.GS.activeGS){let t=null;if(null!==S.GS.el){const r=S.GS.el.getElementsByClassName('tb_selected_style');t=[];for(let e=r.length-1;-1<e;--e)t.push(r[e].getAttribute('data-style-id'))}else void 0!==this.values[S.GS.key]&&('visual'===S.mode&&(t=this.values[S.GS.key].split(' ')),delete this.values[S.GS.key]);if(null!==t){null!==S.GS.field&&(S.GS.field.value=''),S.GS.isGSPage=!0;for(let e=t.length-1;-1<e;--e)S.GS.delete(t[e]);S.GS.isGSPage=!1,t=null,S.GS.generateValues(null,{},!0)}}const l=ThemifyStyles.getStyleOptions(i),n={},o={};if('visual'===S.mode){const d=S.liveStylingInstance.prefix,c=this.breakpointsReverse;for(let s=c.length-1;-1<s;--s){let e=ThemifyStyles.getSheet(c[s],null!==S.GS.activeGS),a=e.cssRules||e.rules;if(0<a.length){void 0===n[c[s]]&&(n[c[s]]={},o[c[s]]={});for(let l=a.length-1;-1<l;--l)if(-1!==a[l].selectorText.indexOf(d)){let i=a[l].cssText.split('{')[1].split(';');void 0===n[c[s]][l]&&(n[c[s]][l]={},o[c[s]][l]={});for(let e=i.length-2;-1<e;--e){let t=i[e].trim().split(': ')[0].trim();if(void 0!==a[l].style[t]){let e=a[l].style[t];n[c[s]][l][t]=e,o[c[s]][l][t]={a:'',b:e},a[l].style[t]=''}}}}}'module'!==i&&(S.liveStylingInstance.removeBgSlider(),S.liveStylingInstance.removeBgVideo(),S.liveStylingInstance.getComponentBgOverlay(i).remove(),S.liveStylingInstance.bindBackgroundMode('repeat','background_repeat'),S.liveStylingInstance.bindBackgroundMode('repeat','b_r_h'),S.liveStylingInstance.$liveStyledElmt[0].removeAttribute('data-tb_slider_videos'),S.liveStylingInstance.$liveStyledElmt.children('.tb_slider_videos,.tb_row_frame').remove())}for(let i in this.values){let e=-1!==i.indexOf('_color')?'color':-1!==i.indexOf('_style')&&'style',t=null;0===i.indexOf('breakpoint_')||i===S.GS.key||void 0!==l[i]||-1!==i.indexOf('_apply_all')?t=!0:-1!==i.indexOf('_unit')?void 0!==l[e=i.replace(/_unit$/gi,'','')]&&(t=!0):-1!==i.indexOf('_w')?void 0!==l[e=i.replace(/_w$/gi,'','')]&&'font_select'===l[e].type&&(t=!0):!1!==e&&void 0!==l[e=i.replace('_'+e,'_width')]&&'border'===l[e].type&&(t=!0),!0===t&&delete this.values[i]}if(void 0!==a){S.hasChanged=!0;const p=a.getElementsByClassName('tb_lb_option');for(let l=p.length-1;-1<l;--l){let i=p[l].value,e=p[l].classList;if('px'!==i&&'solid'!==i&&'default'!==i&&'linear'!==i&&'n'!==i&&!e.contains('exclude-from-reset-field')){let t=p[l].getAttribute('id');if(void 0!==this.values[t]&&delete this.values[t],e.contains('tb_radio_input_container'))if(e.contains('tb_icon_radio')){let e=a.querySelector('[name="'+t+'"]:checked');null!==e&&e.parentNode.click()}else{let e=a.querySelector('[name="'+t+'"]');!0!==e.checked&&(e.checked=!0,k.triggerEvent(e,'change'))}else if(e.contains('tb_uploader_input'))i&&p[l].parentNode.getElementsByClassName('tb_clear_input')[0].click();else if(e.contains('tfminicolors-input')){let t=p[l].closest('.tfminicolors'),e=t.getElementsByClassName('tb_clear_btn')[0];if(i){p[l].value='',p[l].removeAttribute('data-opacity');let e=t.getElementsByClassName('tfminicolors-swatch-color')[0];e.style.opacity=e.style.backgroundColor='',t.nextElementSibling.value=''}void 0!==e&&(e.style.display='none')}else if(i&&'SELECT'===p[l].tagName){if(e.contains('font-family-select'))p[l].value='';else if(e.contains('font-weight-select')){for(p[l].value='';p[l].firstChild;)p[l].removeChild(p[l].lastChild);this.font_select.updateFontVariant('',p[l],this)}else if(e.contains('tb_unit'))p[l].value=e.contains('tb_frame_unit')?'%':'px';else{if('repeat'===i&&'background_repeat'===t||'scroll'===i&&'background_attachment'===t||'left top'===i&&'background_position'===t)continue;p[l].selectedIndex=0}e.contains('themify-gradient-type')||k.triggerEvent(p[l],'change')}else if(e.contains('themify-layout-icon')){let e=p[l].getElementsByClassName('tfl-icon')[0];e.classList.contains('selected')||e.click()}else if(e.contains('tb_row_js_wrapper')){let t=p[l].getElementsByClassName('tb_repeatable_field');for(let e=t.length-1;-1<e;--e)t[e].remove();p[l].getElementsByClassName('add_new')[0].click()}else e.contains('tb_angle_input')&&e.contains('tb_transform_field')?p[l].value='':e.contains('tb_angle_input')?p[l].value='180':e.contains('themify-gradient')?p[l].nextElementSibling.click():(p[l].value='',k.triggerEvent(p[l],e.contains('tb_range')?'keyup':'change'))}}'visual'!==S.mode||e.isTrigger||(S.liveStylingInstance.tempData=n,S.liveStylingInstance.undoData=o)}return o},create(o){const t=L.createDocumentFragment();if(void 0===o||0===o.length){const e=L.createElement('div'),i=L.createElement('p');i.textContent=themifyBuilder.i18n.no_op_module,e.appendChild(i),t.appendChild(e)}else{if('tabs'===o.type)t.appendChild(this.tabs.render(o,this));else for(let n in o)if(!0!==o[n].hide&&void 0!==o[n].type&&('visibility'!==this.clicked||'row'!==this.component||'sticky_visibility'!==o[n].id)){let a=o[n].type,s=this[a].render(o[n],this);if('separator'!==a&&'expand'!==a&&'group'!==a){let e=o[n].id||o[n].topId;if('tabs'!==a&&'multi'!==a&&'margin_opposity'!==a&&e&&('styling'===this.clicked?('visual'===S.mode&&void 0!==o[n].prop&&(this.styles[e]=$.extend(!0,{},o[n])),this.stylesData[e]=$.extend(!0,{},o[n])):'visual'===S.mode&&'setting'===this.clicked&&null!==this.values&&void 0!==this.values[e]&&!0!==this.is_repeat&&(this.settings[e]=this.values[o[n].id],void 0!==o[n].units&&void 0!==this.values[e+'_unit']&&(this.settings[e+'_unit']=this.values[e+'_unit']))),'hook_content'!==a&&'slider'!==a&&'builder'!==a&&'tooltip'!==a&&'custom_css_id'!==a){let i=L.createElement('div');if(i.className='tb_field',void 0===o[n].dc||o[n].dc||(i.className+=' tb_disable_dc'),i.setAttribute('data-type',a),void 0!==e&&(i.className+=' '+e),void 0!==o[n].wrap_class&&(i.className+=' '+o[n].wrap_class),'toggle_switch'===a)i.className+=' switch-wrapper';else if('slider'===a)i.className+=' tb_slider_options';else if('message'===a&&void 0!==o[n].hideIf&&new Function('return '+o[n].hideIf))i.className+=' tb_hide_option';else if(void 0!==o[n].required&&'setting'===this.clicked){let e=void 0!==o[n].required.rule?o[n].required.rule:'not_empty',t=void 0!==o[n].required.message?o[n].required.message:themifyBuilder.i18n.not_empty;i.setAttribute('data-validation',e),i.setAttribute('data-error-msg',t),i.className+=' tb_must_validate'}'styling'===this.clicked&&!1===o[n].is_responsive&&(i.className+=' responsive_disable');let l=this.getTitle(o[n]);if(!1!==l){l=l.trim();let e=L.createElement('div'),t=L.createElement('span');if(e.className='tb_label',t.className='tb_label_text',t.textContent=l,e.appendChild(t),''===l&&(e.className+=' tb_empty_label'),void 0!==o[n].help&&''!==o[n].label&&(e.classList.add('contains-help'),t.appendChild(this.help(o[n].help))),i.appendChild(e),'multi'!==a){let e=L.createElement('div');e.className='tb_input',e.appendChild(s),i.appendChild(e)}else i.appendChild(s)}else i.appendChild(s);t.appendChild(i)}else t.appendChild(s)}else t.appendChild(s)}o=null}return t},tabs:{click:0,render(n,o){const r=n.options,d=L.createDocumentFragment(),c=L.createElement('ul'),e='styling'===o.clicked&&0===this.click&&'module'===o.component?L.createElement('div'):null,t=L.createElement('div'),p=void 0!==n.isRadio;let u=null,m=null;t.className='tb_tabs',c.className='tb_tab_wrapper tf_scrollbar tf_clearfix',++this.click,1==p&&(void 0!==o.values[n.id]&&''!==o.values[n.id]&&(m=!0,u=o.values[n.id]),c.className+=' tb_radio_input_container',!0===o.is_repeat?(c.className+=!0===o.is_sort?' tb_lb_sort_child':' tb_lb_option_child',c.dataset.inputId=n.id):(c.className+=' tb_lb_option',c.id=n.id));for(let s in r){let e=L.createElement('li'),t=1==p?L.createElement('label'):L.createElement('a'),i=L.createElement('div'),l=void 0!==r[s].href?r[s].href:'tb_'+this.click+'_'+s,a=r[s].options;if(i.id=l,i.className='tb_tab',''!==r[s].label&&(t.textContent=void 0!==r[s].label?r[s].label:o.label[s]),void 0!==r[s].icon&&t.appendChild(S.Utils.getIcon(r[s].icon)),void 0!==r[s].title&&(t.title=r[s].title),void 0!==r[s].class&&''!==r[s].class&&(t.className=r[s].class),1==p){let e=L.createElement('input');e.type='radio',e.className='tb_radio_tab_input',e.name=n.id,u!==s&&u!=='tb_'+s||(e.checked=!0),e.value=s,t.setAttribute('href','#'+l),t.className='tb_radio_tab_label',t.appendChild(e)}else t.href='#'+l;null===m||u===s||u==='tb_'+s?(m=!0,e.className='current',i.appendChild(o.create(a)),a=null,i.style.display='block'):i.addEventListener('themify_builder_tabsactive',function(){this.appendChild(o.create(a)),'setting'===o.clicked&&o.setUpEditors(),o.callbacks(),a=null},{once:!0,passive:!0}),t.addEventListener('click',o.switchTabs),e.appendChild(t),c.appendChild(e),d.appendChild(i)}return null!==e?(e.className='tb_styling_tab_nav',e.appendChild(c),t.appendChild(e)):t.appendChild(c),t.appendChild(d),setTimeout(o.callbacks.bind(o),5),t}},group:{render(e,t){const i=L.createElement('div'),l=e.display||'',a=t.create(e.options);if(void 0!==e.wrap_class&&(i.className=e.wrap_class),i.classList.add('tb_field_group'),e.id&&i.classList.add(e.id),'accordion'===l){i.classList.add('tb_field_group_acc');const s=L.createElement('div'),n=L.createElement('div'),o=S.Utils.getIcon('ti-angle-up');s.textContent=e.label,s.className='tb_style_toggle tb_closed',s.appendChild(o),n.className='tf_hide tb_field_group_content',n.appendChild(a),s.addEventListener('click',function(){$(n).slideToggle(),s.classList.toggle('tb_closed')}),i.appendChild(s),i.appendChild(n)}else i.appendChild(a);return i}},builder:{render(l,a){a.is_repeat=!0;const e=L.createDocumentFragment(),i=L.createElement('div'),s=L.createElement('a'),n=this;if(i.className='tb_row_js_wrapper tf_rel tb_lb_option',void 0!==l.wrap_class&&(i.className+=' '+l.wrap_class),i.id=l.id,s.className='add_new tf_plus_icon tb_icon_btn',s.href='#',s.textContent=(void 0!==l.new_row?l:a.label).new_row,void 0!==a.values[l.id]){const o=a.values[l.id].slice(),t=$.extend(!0,{},a.values);for(let e=0,t=o.length;e<t;++e)a.values=o[e]||{},i.appendChild(this.builderFields(l,a));a.values=t}else i.appendChild(this.builderFields(l,a));return i.appendChild(s),e.appendChild(i),setTimeout(function(){n.sortable(i,a),s.addEventListener('click',function(e){e.preventDefault(),e.stopPropagation(),a.is_repeat=!0;const t=n.builderFields(l,a),i=this.previousElementSibling.parentNode;i.insertBefore(t,s),setTimeout(function(){'setting'===a.clicked&&a.setUpEditors(),a.callbacks(),k.triggerEvent(L,'tb_repeatable_add_new',[t])},5),a.control.preview(i,null,{repeat:!0}),a.is_repeat=null})},2e3),a.is_repeat=null,e},builderFields(n,o){const e=L.createElement('div'),t=L.createElement('div'),i=L.createElement('div'),l=L.createElement('div'),r=L.createElement('ul'),a=L.createElement('li'),s=L.createElement('li'),d=L.createElement('div'),c=L.createElement('div'),p=this;return e.className='tb_repeatable_field tf_clearfix',t.className='tb_repeatable_field_top',i.className='row_menu',l.tabIndex='-1',l.className='menu_icon',r.className='tb_down',a.className='tb_duplicate_row',s.className='tb_delete_row tf_close',a.textContent=o.label.duplicate,s.textContent=o.label.delete,d.className='toggle_row',c.className='tb_repeatable_field_content',c.appendChild(o.create(n.options)),r.appendChild(a),r.appendChild(s),i.appendChild(l),i.appendChild(r),t.appendChild(i),t.appendChild(d),e.appendChild(t),e.appendChild(c),t.addEventListener('click',function(e){e.stopPropagation(),e.preventDefault();const t=e.target.classList,i=this.parentNode;if(t.contains('tb_delete_row')){if(confirm(themifyBuilder.i18n.rowDeleteConfirm)){const l=e.target.closest('.tb_row_js_wrapper');p.delete(e.target),o.control.preview(l,null,{repeat:!0}),k.triggerEvent(l,'delete')}}else if(t.contains('tb_duplicate_row')){o.is_repeat=!0;const a=$.extend(!0,{},o.values),s=(o.values=S.Forms.serialize(i,!0,!0),p.builderFields(n,o));i.parentNode.insertBefore(s,i.nextElementSibling),o.values=a,setTimeout(function(){'setting'===o.clicked&&o.setUpEditors(),o.callbacks(),k.triggerEvent(i.parentNode,'duplicate'),k.triggerEvent(L,'tb_repeatable_duplicate',[s])},5),o.control.preview(i,null,{repeat:!0}),o.is_repeat=null}else t.contains('toggle_row')&&p.toggle(e.target);t.contains('menu_icon')||S.Utils.hideOnClick(r)}),e},sortable(e,C){const E=S.Utils.getMouseEvents();e.addEventListener(E.mousedown,function(e){if(('touchstart'===e.type||1===e.which)&&e.target.classList.contains('tb_repeatable_field_top')){e.stopImmediatePropagation();let t,i,n,o,l,r=0,d,c,a,s={},p=this.ownerDocument,u=e.target.closest('.tb_repeatable_field'),m,_,h,b=!1,g;const f=function(s){s.stopImmediatePropagation(),t&&cancelAnimationFrame(t),t=requestAnimationFrame(function(){if(p){const e=(s.touches?s.touches[0]:s).clientX,t=(s.touches?s.touches[0]:s).clientY,i='mousemove'===s.type?s.target:p.elementFromPoint(e,t),l=t-c-g.getBoundingClientRect().top;if(0<l&&l<h){if(d.style.transform='translateY('+l+'px)',v(t),!(t>=_||t<=m)){if(i&&i!==u&&i.classList.contains('tb_repeatable_field')){const a=t>r?'bottom':'top';o===a&&n===i||(u.style.display='none','bottom'==a?i.after(u):i.before(u),u.style.display=''),n=i,o=a}r=t}}else v(t)}})},v=function(e){if(a)if(e>=_||e<=m){if(!1===b){b=!0;const t=parseInt(_/10);a.scrollTop+=e<=m?-1*t:t,i&&clearTimeout(i),i=setTimeout(function(){requestAnimationFrame(function(){b&&(b=!1,v(e))})},2*t)}}else i&&clearTimeout(i),b=!1},y=function(e){if(p.body.classList.add('tb_start_animate','tb_move_drag'),S.Utils.hideOnClick(u.getElementsByClassName('tb_down')[0]),(g=u.parentNode).classList.add('tb_sort_start'),'undefined'!=typeof tinyMCE){const i=g.getElementsByClassName('tb_lb_wp_editor');for(let t=i.length-1;-1<t;--t){let e=i[t].id;s[e]=tinymce.get(e).getContent(),tinyMCE.execCommand('mceRemoveEditor',!1,e)}}u.classList.contains('collapsed')||(u.getElementsByClassName('tb_repeatable_field_content')[0].style.display='none',u.classList.add('collapsed'),l=!0),(d=u.cloneNode(!0)).getElementsByClassName('tb_repeatable_field_content')[0].remove(),a=u.closest('.tf_scrollbar'),d.className+=' tb_sort_handler',u.classList.add('tb_current_sort'),u.after(d),c=d.getBoundingClientRect().height/2,h=g.offsetHeight;const t=a.getBoundingClientRect();m=t.top,_=t.bottom-40,f(e)};p.addEventListener(E.mouseup,function(e){if(this.removeEventListener(E.mousemove,y,{passive:!0,once:!0}),this.removeEventListener(E.mousemove,f,{passive:!0}),g){if(e.stopImmediatePropagation(),t&&cancelAnimationFrame(t),i&&clearTimeout(i),d&&d.remove(),'undefined'!=typeof tinyMCE)for(let e in s)tinyMCE.execCommand('mceAddEditor',!1,e),tinymce.get(e).setContent(s[e]);u.classList.remove('tb_current_sort'),l&&(u.classList.remove('collapsed'),u.getElementsByClassName('tb_repeatable_field_content')[0].style.display=''),requestAnimationFrame(function(){C.control.preview(g,null,{repeat:!0}),k.triggerEvent(g,'sortable'),g.classList.remove('tb_sort_start'),g=null})}this.body.classList.remove('tb_start_animate','tb_move_drag'),n=d=l=o=r=s=a=p=h=c=b=m=_=u=t=i=null},{passive:!0,once:!0}),p.addEventListener(E.mousemove,y,{passive:!0,once:!0}),p.addEventListener(E.mousemove,f,{passive:!0})}},{passive:!0})},toggle(e){$(e).closest('.tb_repeatable_field').toggleClass('collapsed').find('.tb_repeatable_field_content').slideToggle()},delete(e){const t=e.closest('.tb_repeatable_field');k.triggerEvent(L,'tb_repeatable_delete',[t]),t.remove()}},accordion:{expand(e,a,s){e.addEventListener('click',function(e){let t=this.getElementsByClassName('tb_accordion_fields_options')[0];if(void 0===t){(t=L.createElement('div')).style.display='none',t.className='tb_toggleable_fields_options tb_accordion_fields_options',s.is_repeat=!0;let e=null;const i=this.parentNode.closest('.tb_accordion_fields').id,l=this.getAttribute('data-id');void 0!==s.values[i]&&void 0!==s.values[i][l]&&void 0!==s.values[i][l].val&&(e=$.extend(!0,{},s.values),s.values=s.values[i][l].val),t.appendChild(s.create(a.options)),this.appendChild(t),'setting'===s.clicked&&s.setUpEditors(),s.callbacks(),null!==e&&(s.values=e),s.is_repeat=e=null}else if(t.contains(e.target))return;e.stopPropagation(),e.preventDefault(),this.classList.contains('tb_closed')?$(t).slideDown(function(){this.parentNode.classList.remove('tb_closed')}):$(t).slideUp(function(){this.parentNode.classList.add('tb_closed')})})},resetMotion(e,t){if(void 0!==t.values.motion_effects)for(let e in t.values.motion_effects)t.values.motion_effects[e].val={},t.values.motion_effects[e].val[e+'_dir']='';const i=e.parentNode.querySelector('#motion_effects'),l=i.getElementsByTagName('select'),a=i.getElementsByClassName('tb_position_box_wrapper'),s=i.getElementsByClassName('tb_slider_wrapper');for(let e=l.length-1;-1<e;--e)l[e].selectedIndex=0;for(let e=a.length-1;-1<e;--e)a[e].querySelector('input').value='50,50',a[e].querySelector('.tb_position_box_handle').setAttribute('style','left:50%;top:50%;');for(let a=s.length-1;-1<a;--a){let e=s[a].getElementsByClassName('tb_slider_label_u')[0],t=s[a].getElementsByClassName('ui-slider-handle'),i=s[a].getElementsByTagName('input')[0],l=s[a].getElementsByClassName('tb_slider_label_l')[0];e?(i.value='0,100',t[0].setAttribute('style','left:0%;'),t[1].setAttribute('style','left:100%;'),s[a].getElementsByClassName('ui-slider-range')[0].setAttribute('style','left:0%;width:100%;'),l.textContent='0%',e.textContent='100%'):(i.value='5',t[0].setAttribute('style','left:50%;'),l.textContent='5')}},render(s,n){const o=this,r=L.createElement('ul'),e=L.createDocumentFragment(),t=L.createElement('a'),i=(r.id=s.id,r.className='tb_toggleable_fields tb_accordion_fields tb_lb_option','motion_effects'===s.id&&n.values&&n.values.hasOwnProperty('custom_parallax_scroll_speed')&&(n.values.hasOwnProperty('motion_effects')||(n.values.motion_effects={v:{val:{v_speed:n.values.custom_parallax_scroll_speed,v_dir:''}},h:{val:{}},t:{val:{t_speed:''}},r:{val:{}},s:{val:{}}},delete n.values.custom_parallax_scroll_speed),n.values.hasOwnProperty('custom_parallax_scroll_reverse')?(n.values.motion_effects.v.val.v_dir='down',delete n.values.custom_parallax_scroll_reverse):n.values.motion_effects.v.val.v_dir='up',n.values.hasOwnProperty('custom_parallax_scroll_fade')&&(n.values.motion_effects.t.val.t_speed=n.values.custom_parallax_scroll_speed,delete n.values.custom_parallax_scroll_fade)),n.values[s.id]),l=function(e,t){const i=L.createElement('li'),l=L.createElement('input'),a=L.createElement('div');a.textContent=s.options[e].label,a.className='tb_toggleable_fields_title tb_accordion_fields_title tf_plus_icon',l.type='hidden',l.value='',i.className='tb_closed',i.setAttribute('data-id',e),void 0!==t.val&&(l.value=JSON.stringify(t.val)),i.appendChild(l),i.appendChild(a),o.expand(i,s.options[e],n),r.appendChild(i)};if(void 0!==i)for(let e in i)void 0!==s.options[e]&&l(e,i[e]);for(let e in s.options)void 0!==i&&void 0!==i[e]||l(e,s.options[e]);return e.appendChild(r),'motion_effects'===s.id&&(t.href='#',t.className='tb_motion_reset_link',t.textContent=n.label.reset_effect,t.addEventListener('click',function(e){e.preventDefault(),e.stopPropagation(),o.resetMotion(this,n)}),e.appendChild(t)),e}},toggleable_fields:{sort(e,E){const x=S.Utils.getMouseEvents();e.addEventListener(x.mousedown,function(e){if(!('touchstart'!==e.type&&1!==e.which||e.target.parentNode!==this&&e.target.parentNode.parentNode!==this)){e.stopImmediatePropagation();let i,l,n,o,a,r=0,d,c,s,p={},u=this.ownerDocument,m=e.target.closest('.tb_toggleable_item'),_,h,b,g=!1,f;const v=function(s){s.stopImmediatePropagation(),i&&cancelAnimationFrame(i),i=requestAnimationFrame(function(){if(u){const e=(s.touches?s.touches[0]:s).clientX,t=(s.touches?s.touches[0]:s).clientY,i='mousemove'===s.type?s.target:u.elementFromPoint(e,t),l=t-c-f.getBoundingClientRect().top;if(0<l&&l<b){if(d.style.transform='translateY('+l+'px)',y(t),!(t>=h||t<=_)){if(i&&i!==m&&i.classList.contains('tb_toggleable_item')){const a=t>r?'bottom':'top';o===a&&n===i||(m.style.display='none','bottom'==a?i.after(m):i.before(m),m.style.display=''),n=i,o=a}r=t}}else y(t)}})},y=function(e){if(s)if(e>=h||e<=_){if(!1===g){g=!0;const t=parseInt(h/10);s.scrollTop+=e<=_?-1*t:t,l&&clearTimeout(l),l=setTimeout(function(){requestAnimationFrame(function(){g&&(g=!1,y(e))})},2*t)}}else l&&clearTimeout(l),g=!1},C=function(e){if(u.body.classList.add('tb_start_animate','tb_move_drag'),(f=m.parentNode).classList.add('tb_sort_start'),'undefined'!=typeof tinyMCE){const l=f.getElementsByClassName('tb_lb_wp_editor');for(let t=l.length-1;-1<t;--t){let e=l[t].id;p[e]=tinymce.get(e).getContent(),tinyMCE.execCommand('mceRemoveEditor',!1,e)}}if(!m.classList.contains('tb_closed')){const t=m.getElementsByClassName('tb_toggleable_fields_options')[0];t&&(t.style.display='none'),m.classList.add('tb_closed'),a=!0}const t=(d=m.cloneNode(!0)).getElementsByClassName('tb_toggleable_fields_options')[0],i=(t&&t.remove(),s=m.closest('.tf_scrollbar'),d.className+=' tb_sort_handler',m.classList.add('tb_current_sort'),m.after(d),c=d.getBoundingClientRect().height/2,b=f.offsetHeight,s.getBoundingClientRect());_=i.top,h=i.bottom-40,v(e)};u.addEventListener(x.mouseup,function(e){if(this.removeEventListener(x.mousemove,C,{passive:!0,once:!0}),this.removeEventListener(x.mousemove,v,{passive:!0}),f){if(e.stopImmediatePropagation(),i&&cancelAnimationFrame(i),l&&clearTimeout(l),d&&d.remove(),'undefined'!=typeof tinyMCE)for(let e in p)tinyMCE.execCommand('mceAddEditor',!1,e),tinymce.get(e).setContent(p[e]);if(m.classList.remove('tb_current_sort'),a){const t=m.getElementsByClassName('tb_toggleable_fields_options')[0];t&&(t.style.display=''),m.classList.remove('tb_closed')}requestAnimationFrame(function(){E.control.preview(f,null,{repeat:!0}),k.triggerEvent(f,'sortable'),f.classList.remove('tb_sort_start'),f=null})}this.body.classList.remove('tb_start_animate','tb_move_drag'),n=d=a=o=r=p=s=u=b=g=c=_=h=m=i=l=null},{passive:!0,once:!0}),u.addEventListener(x.mousemove,C,{passive:!0,once:!0}),u.addEventListener(x.mousemove,v,{passive:!0})}},{passive:!0})},expand(e,a,s){e.addEventListener('click',function(e){if(this.classList.contains('tb_toggleable_field_disabled')||e.target.closest('.switch-wrapper')){if(!e.target.closest('.tb_toggleable_fields_options')){const t=this.getElementsByClassName('tb_toggleable_fields_options')[0];$(t).slideUp(function(){this.parentNode.classList.add('tb_closed')})}}else{let l=this.getElementsByClassName('tb_toggleable_fields_options')[0];if(l){if(l.contains(e.target))return}else{(l=L.createElement('div')).style.display='none',l.className='tb_toggleable_fields_options tf_box tf_clear',this.appendChild(l),s.is_repeat=!0;let e=this.closest('.tb_toggleable_fields').id,t=null,i=this.getAttribute('data-id');void 0!==s.values[e]&&void 0!==s.values[e][i]&&void 0!==s.values[e][i].val&&(t=$.extend(!0,{},s.values),s.values=s.values[e][i].val),l.appendChild(s.create(a.options)),'setting'===s.clicked&&s.setUpEditors(),s.callbacks(),null!==t&&(s.values=t),s.is_repeat=null}e.stopPropagation(),e.preventDefault(),this.classList.contains('tb_closed')?$(l).slideDown(function(){this.parentNode.classList.remove('tb_closed')}):$(l).slideUp(function(){this.parentNode.classList.add('tb_closed')})}})},disable(e,t){const i=e.closest('li'),l=i.classList;e.checked?l.remove('tb_toggleable_field_disabled'):l.add('tb_toggleable_field_disabled','tb_closed'),t.control.preview(i.parentNode,null,{repeat:!0})},render(o,r){const d=this,c=L.createElement('ul'),e=(c.className='tb_toggleable_fields tf_rel',!0===r.is_repeat?(c.dataset.inputId=o.id,c.className+=' tb_lb_option_child'):(c.id=o.id,c.className+=' tb_lb_option'),r.is_repeat),t=r.values[o.id],i=(r.is_repeat=!0,function(e,t){const i={type:'toggle_switch',id:'',options:{on:{name:'1',value:r.label.s},off:{name:'0',value:r.label.hi}},default:'1'===t.on?'on':'off',control:!1},l=L.createElement('li'),a=L.createElement('input'),s=L.createElement('div'),n=r.create([i]);s.innerHTML+=o.options[e].label,s.className='tb_toggleable_fields_title tf_plus_icon',a.type='hidden',a.value='',l.className='tb_toggleable_item tb_closed','off'===i.default&&(l.className+=' tb_toggleable_field_disabled'),l.setAttribute('data-id',e),void 0!==t.val&&(a.value=JSON.stringify(t.val)),n.querySelector('.toggle_switch').addEventListener('change',function(e){e.stopPropagation(),d.disable(this,r)},{passive:!0}),l.appendChild(a),l.appendChild(s),l.appendChild(n),d.expand(l,o.options[e],r),c.appendChild(l)});if(void 0!==t)for(let e in t)void 0!==o.options[e]&&i(e,t[e]);for(let e in o.options)void 0===t[e]&&i(e,o.options[e]);return d.sort(c,r),r.is_repeat=e,c}},sortable_fields:{getGlobalOptions(e){return[{id:'icon',type:'icon',label:e.label.icon},{id:'before',type:'text',label:e.label.b_t},{id:'after',type:'text',label:e.label.a_t}]},getDefaults(e,t){const i={date:[{id:'format',type:'select',label:t.label.d_f,default:'def',options:{'F j, Y':t.label.F_j_Y,'Y-m-d':t.label.Y_m_d,'m/d/Y':t.label.m_d_Y,'d/m/Y':t.label.d_m_Y,def:t.label.def,custom:t.label.cus},binding:{not_empty:{hide:'custom'},custom:{show:'custom'}}},{id:'custom',type:'text',control:{event:'change'},label:t.label.cus_f,help:t.label.cus_fd_h}],time:[{id:'format',type:'select',label:t.label.t_f,default:'def',options:{'g:i a':t.label.g_i_a,'g:i A':t.label.g_i_A,'H:i':t.label.H_i,def:t.label.def,custom:t.label.cus},binding:{not_empty:{hide:'custom'},custom:{show:'custom'}}},{id:'custom',type:'text',control:{event:'change'},label:t.label.cus_f,help:t.label.cus_ft_h}],author:[{id:'l',type:'toggle_switch',label:t.label.l,options:'simple'},{id:'a_p',type:'toggle_switch',label:t.label.a_p,binding:{checked:{show:'p_s'},not_checked:{hide:'p_s'}},options:'simple'},{id:'p_s',type:'range',label:t.label.p_s,class:'xsmall',units:{px:{max:96}},control:{event:'change'}}],comments:[{id:'l',type:'toggle_switch',label:t.label.l,options:'simple'},{id:'no',type:'text',control:{event:'change'},label:t.label.no_c},{id:'one',type:'text',control:{event:'change'},label:t.label.one_c},{id:'comments',type:'text',control:{event:'change'},label:t.label.comments}],terms:[{id:'post_type',type:'query_posts',tax_id:'taxonomy'},{id:'l',type:'toggle_switch',label:t.label.l,options:'simple'},{id:'sep',type:'text',control:{event:'change'},label:t.label.sep}],text:[{id:'t',type:'textarea',class:'fullwidth'}]};return i[e]},create(e,i,l,a,s,t){const n=L.createElement('li'),o=i.options[l];if(void 0===o)return L.createDocumentFragment();if(n.textContent=o.label,n.setAttribute('data-type',l),n.className='tb_sort_fields_item',!0===t){let t=!1;if(a)void 0!==s&&(t=this.find(s,a));else{void 0!==s&&(t=this.find(s,l,!0)),n.setAttribute('data-new',!0);const c=v.Lightbox.$lightbox[0].getElementsByClassName(i.id)[0];let e=1;if(a=l+'_'+e,void 0!==c)for(;null!==c.querySelector('[data-id="'+a+'"]');)a=l+'_'+ ++e}n.setAttribute('data-id',a);const r=L.createElement('span'),d=L.createElement('input');!1!==t&&void 0!==s[t].val&&(d.value=JSON.stringify(s[t].val)),d.type='hidden',r.className='tb_sort_fields_remove tf_close',r.title=e.label.delete,n.appendChild(S.Utils.getIcon('ti-pencil')),n.appendChild(d),n.appendChild(r)}return n},sort(e,l){const g=S.Utils.getMouseEvents();e.addEventListener(g.mousedown,function(e){if(('touchstart'===e.type||1===e.which)&&e.target.parentNode===this){let t,o,r,d=0,c=0,p,u,m,a={},_=this.ownerDocument,h=e.target,b,s;const n=function(n){n.stopImmediatePropagation(),t&&cancelAnimationFrame(t),t=requestAnimationFrame(function(){if(_){let e=(n.touches?n.touches[0]:n).clientX,t=(n.touches?n.touches[0]:n).clientY;e<b.left?e=b.left:e>b.right&&(e=b.right),t<b.top?t=b.top:t>b.bottom&&(t=b.bottom);const i='mousemove'===n.type?n.target:_.elementFromPoint(e,t),l=e-u-b.left,a=t-m-b.top;if(p.style.transform='translate('+l+'px,'+a+'px)',i&&i!==h&&i.classList.contains('tb_sort_fields_item')){const s=t>d||e>c?'bottom':'top';r===s&&o===i||(h.style.display='none','bottom'==s?i.after(h):i.before(h),h.style.display=''),o=i,r=s}d=t,c=e}})},i=function(e){if(_.body.classList.add('tb_start_animate','tb_move_drag'),(s=h.parentNode).classList.add('tb_sort_start'),'undefined'!=typeof tinyMCE){const l=s.getElementsByClassName('tb_lb_wp_editor');for(let t=l.length-1;-1<t;--t){let e=l[t].id;a[e]=tinymce.get(e).getContent(),tinyMCE.execCommand('mceRemoveEditor',!1,e)}}const t=(p=h.cloneNode(!0)).getElementsByClassName('tb_sort_field_dropdown')[0],i=(t&&t.remove(),p.className+=' tb_sort_handler',h.classList.add('tb_current_sort'),h.after(p),p.getBoundingClientRect());b=s.getBoundingClientRect(),m=i.height/2-s.offsetTop,u=i.width/2-s.offsetLeft,n(e)};_.addEventListener(g.mouseup,function(e){if(this.removeEventListener(g.mousemove,i,{passive:!0,once:!0}),this.removeEventListener(g.mousemove,n,{passive:!0}),s){if(e.stopImmediatePropagation(),t&&cancelAnimationFrame(t),p&&p.remove(),'undefined'!=typeof tinyMCE)for(let e in a)tinyMCE.execCommand('mceAddEditor',!1,e),tinymce.get(e).setContent(a[e]);h.classList.remove('tb_current_sort'),requestAnimationFrame(function(){l.control.preview(s,null,{repeat:!0}),k.triggerEvent(s,'sortable'),s.classList.remove('tb_sort_start'),s=null})}this.body.classList.remove('tb_start_animate','tb_move_drag'),o=p=r=d=c=a=_=m=u=b=h=t=null},{passive:!0,once:!0}),_.addEventListener(g.mousemove,i,{passive:!0,once:!0}),_.addEventListener(g.mousemove,n,{passive:!0})}},{passive:!0})},find(t,i,l){for(let e=t.length-1;-1<e;--e)if(t[e].id===i||!0===l&&i===t[e].type)return e;return!1},edit(i,l,a,s){const n=s.dataset.type;let o=s.getElementsByClassName('tb_sort_field_dropdown')[0];if(!o){(o=L.createElement('div')).className='tb_sort_field_dropdown tb_sort_field_dropdown_'+n;const r=L.createElement('span'),d=s.dataset.id;r.className='tb_sort_field_dropdown_pointer',o.appendChild(r);let e=null,t=l.options[n].options;if(void 0===t&&(t=this.getDefaults(n,i),'text'!==n&&(t=t.concat(this.getGlobalOptions(i)))),l.options[n].has_global_options&&(t=t.concat(this.getGlobalOptions(i))),i.is_repeat=i.is_sort=!0,void 0!==a){const c=!!s.dataset.new,p=1==c?n:d,u=this.find(a,p,c);!1!==u&&void 0!==a[u].val&&(e=$.extend(!0,{},i.values),i.values=a[u].val)}o.appendChild(i.create(t)),s.appendChild(o),i.callbacks(),null!==e&&(i.values=e),i.is_sort=i.is_repeat=e=null}if(!s.classList.contains('current')){s.classList.add('current');const t=function(e){1===e.which&&(e.target===s||s.contains(e.target)||Themify_Icons.target&&s.contains(Themify_Icons.target[0])&&'block'===this.getElementById('themify_lightbox_fa').style.display?s.classList.add('current'):(s.classList.remove('current'),this.removeEventListener(e.type,t,{passive:!0})))};y.document.addEventListener('mousedown',t,{passive:!0})}},remove(e,t){const i=(t=t.closest('li')).parentNode;t.parentNode.removeChild(t),e.control.preview(i,null,{repeat:!0}),k.triggerEvent(i,'delete')},render(i,l){const t=this,e=L.createElement('div'),a=L.createElement('div'),s=L.createElement('div'),n=L.createElement('ul'),o=L.createElement('ul'),r=l.values[i.id]?l.values[i.id].slice(0):[];e.className='tb_sort_fields_wrap tf_box tf_rel tf_w',o.className='tb_sort_fields_parent',!0===l.is_repeat?(o.dataset.inputId=i.id,o.className+=!0===l.is_sort?' tb_lb_sort_child':' tb_lb_option_child'):(o.id=i.id,o.className+=' tb_lb_option'),n.className='tb_ui_dropdown_items',a.className='tb_ui_dropdown_label tb_sort_fields_plus',a.tabIndex='-1',s.className='tb_sort_fields_plus_wrap';for(let e in i.options)n.appendChild(this.create(l,i,e));for(let e=0,t=r.length;e<t;++e)!0===l.is_new&&!0!==r[e].show||o.appendChild(this.create(l,i,r[e].type,r[e].id,r,!0));return n.addEventListener('click',function(e){'LI'===e.target.tagName&&(e.preventDefault(),e.stopPropagation(),S.Utils.hideOnClick(this),o.appendChild(t.create(l,i,e.target.dataset.type,null,r,!0)),l.control.preview(o,null,{repeat:!0}))}),o.addEventListener('click',function(e){e.target.classList.contains('tb_sort_fields_remove')?(e.preventDefault(),e.stopPropagation(),t.remove(l,e.target)):'LI'===e.target.tagName&&(e.preventDefault(),e.stopPropagation(),t.edit(l,i,r,e.target))}),s.appendChild(a),s.appendChild(n),e.appendChild(o),e.appendChild(s),setTimeout(function(){t.sort(o,l)},800),!0===l.is_new&&l.afterRun.push(function(){l.control.preview(o,null,{repeat:!0})}),e}},multi:{render(e,t){const i=L.createElement('div');return i.className='tb_multi_fields tb_fields_count_'+e.options.length,i.appendChild(t.create(e.options)),i}},color:{is_typing:null,controlChange(i,l,e){const a=this,s=$(i),n=e.id,t=L.createElement('div'),o=(t.className='tb_clear_btn tf_close',t.addEventListener('click',function(){this.style.display='none',i.value='',s.trigger('keyup')},{passive:!0}),s.tfminicolors({opacity:void 0===e.opacity||Boolean(e.opacity),swatches:themifyColorManager.toColorsArray(),changeDelay:10,beforeShow(){const e=v.Lightbox.$lightbox,t=s.closest('.tfminicolors'),i=t.find('.tfminicolors-panel');i.css('visibility','hidden').show(),t[0].classList.toggle('tfminicolors_right',e.offset().left+e.width()<=i.offset().left+i.width()),i.css('visibility','').hide(),S.hasChanged=!0},show(){themifyColorManager.initColorPicker(this),'visual'===S.mode&&k.triggerEvent(this,'themify_builder_color_picker_show',{id:n})},hide(){t.style.display=''!==i.value?'block':'none','visual'===S.mode&&k.triggerEvent(this,'themify_builder_color_picker_hide',{id:n})},change(e,t){e?t&&('0.99'==t?t=1:parseFloat(t)<=0&&(t=0)):t='',a.is_typing||t===L.activeElement||(l.value=t),e&&parseFloat($(this).tfminicolors('opacity'))<=0&&$(this).tfminicolors('opacity',0),'visual'===S.mode&&(e=e?0===e.indexOf('--')?'var('+e+')':$(this).tfminicolors('rgbaString'):'',k.triggerEvent(this,'themify_builder_color_picker_change',{id:n,val:e}))}}).tfminicolors('show'),function(e){let t=parseFloat(this.value.trim().replace(',','.'));(1<t||isNaN(t)||''===t||t<0)&&(t=i.value?1:''),'blur'===e.type&&(this.value=t),a.is_typing='keyup'===e.type,s.tfminicolors('opacity',t)});l.addEventListener('blur',o,{passive:!0}),l.addEventListener('keyup',o,{passive:!0}),i.parentNode.appendChild(t),i.setAttribute('data-tfminicolors-initialized',!0)},setColor(e,t,i,l){let a=l,s='';''!==l&&0!==l.indexOf('--')&&(-1!==l.indexOf('_')?(a=S.Utils.toRGBA(l),l=l.split('_'),(s=l[1])?parseFloat(s)<=0&&(s=0):s=1,a=l[0]):(a=l,s=1),-1===a.indexOf('#')&&(a='#'+a)),e.value=a,e.setAttribute('data-opacity',s),t.style.background=a,t.style.opacity=s,i.value=s},update(e,t,i){const l=i.getEl(e);if(null!==l){const a=l.parentNode;void 0===t&&(t=''),this.setColor(l,a.getElementsByClassName('tfminicolors-swatch-color')[0],a.nextElementSibling,t)}},render(e,t){const i=L.createDocumentFragment(),l=L.createElement('div'),a=L.createElement('div'),s=L.createElement('input'),n=L.createElement('input'),o=L.createElement('span'),r=L.createElement('span'),d=this;let c=t.getStyleVal(e.id);return l.className='tfminicolors_wrapper',a.className='tfminicolors tfminicolors-theme-default',s.type='text',s.className='tfminicolors-input',s.autocomplete='off',void 0!==e.class&&(s.className+=' '+e.class),!0===t.is_repeat?(s.className+=!0===t.is_sort?' tb_lb_sort_child':' tb_lb_option_child',s.dataset.inputId=e.id):(s.id=e.id,s.className+=' tb_lb_option'),o.className='tfminicolors-swatch tfminicolors-sprite tfminicolors-input-swatch',r.className='tfminicolors-swatch-color tf_abs',n.type='text',n.className='color_opacity',o.appendChild(r),a.appendChild(s),a.appendChild(o),l.appendChild(a),l.appendChild(n),t.initControl(s,e),o.addEventListener('click',function(){l.insertAdjacentElement('afterbegin',s),a.parentNode.removeChild(a),d.controlChange(s,n,e)},{once:!0,passive:!0}),s.addEventListener('focusin',function(){o.click()},{once:!0,passive:!0}),n.addEventListener('focusin',function(e){s.dataset.tfminicolorsInitialized?$(s).tfminicolors('show'):(s.dataset.opacity=this.value,o.click())},{passive:!0}),void 0!==(c=!c&&e.default?e.default:c)&&this.setColor(s,r,n,c),i.appendChild(l),void 0!==e.after&&i.appendChild(t.after(e)),void 0!==e.description&&i.appendChild(t.description(e.description)),void 0!==e.tooltip&&i.appendChild(t.hint(e.tooltip)),i}},icon_color_bg:{render(e,t){let i={default:['#F7F7F7','#555'],black:['#000','#eee'],gray:['#989797','#eee'],blue:['#4d7de1','#edf3ff'],'light-blue':['#bdd9fd','#2a3e59'],green:['#4aab10','#e9ffdb'],'light-green':['#9bd611','#293807'],purple:['#7a6bf8','#eeedff'],'light-purple':['#c1bafd','#39355b'],brown:['#a35004','#ffeee0'],orange:['#ff9600','#fff2ea'],yellow:['#fff06c','#594718'],red:['#e8311f','#ffeeed'],pink:['#feb4e4','#441e32'],transparent:['',''],tb_default_color:['','']},l=t.getStyleVal('icon_color_bg'),a=t.create([{type:'multi',label:'icon',options:[{id:'icon',type:'icon',class:'fullwidth'},{id:'bg',type:'color',default:l?i[l][0]:'',label:'bg'},{id:'c',type:'color',default:l?i[l][1]:'',label:'c'}],wrap_class:'tb_group_element_icon'}]);return a}},tooltip:{render(e,t){const i=[{type:'textarea',label:t.label.tt,id:'_tooltip',class:'fullwidth',control:!1},{type:'color',label:t.label.bg_c,id:'_tooltip_bg',control:!1},{type:'color',label:t.label.f_c,id:'_tooltip_c',control:!1},{type:'range',label:t.label.ma_wd,id:'_tooltip_w',control:!1,units:{px:{min:-2e3,max:2e3},em:{min:-20,max:20}}}];let l=t.create([{type:'group',label:t.label.t,display:'accordion',options:i}]);return l='visual'===S.mode?this.bindEvents(l):l},bindEvents(e){const t=this,i=e.querySelector('#_tooltip'),l=[e.querySelector('#_tooltip_bg'),e.querySelector('#_tooltip_c')],a=['focus','keyup','blur','change'],s=e.querySelector('#_tooltip_w');for(let e=a.length-1;-1<e;--e)'change'!==a[e]&&i.addEventListener(a[e],e=>{t.addOrRemoveTooltip('blur'!==e.type)},{passive:!0}),s.addEventListener(a[e],e=>{t.addOrRemoveTooltip('blur'!==e.type)},{passive:!0});for(let e=l.length-1;-1<e;--e)l[e].addEventListener('themify_builder_color_picker_show',function(){t.addOrRemoveTooltip(!0),this.addEventListener('themify_builder_color_picker_hide',()=>{t.addOrRemoveTooltip(!1)},{once:!0,passive:!0})},{passive:!0}),l[e].addEventListener('themify_builder_color_picker_change',()=>{t.addOrRemoveTooltip(!0)},{passive:!0});return e},addOrRemoveTooltip(e){let t=S.liveStylingInstance.$liveStyledElmt[0],i=t.querySelector(':scope > .tf_tooltip');if(!e&&i)i.remove();else{k.cssLazy.tf_tooltip||(k.cssLazy.tf_tooltip=!0,k.LoadCss(k.cssUrl+themify_vars.css_modules.t.u));const l=y.document.getElementById('_tooltip').value;if(''!==l){i||((i=L.createElement('div')).className='tf_tooltip',t.appendChild(i));let e=y.document.getElementById('_tooltip_w').value;i.classList.add('tooltip_preview','tf_abs_c'),i.innerHTML=l,i.style.background=S.Utils.getColor(y.document.getElementById('_tooltip_bg')),i.style.color=S.Utils.getColor(y.document.getElementById('_tooltip_c')),''!==e&&(e+=y.document.getElementById('_tooltip_w_unit').value),i.style.width=e,i.classList.remove('tf_hide')}else i&&i.remove()}}},text:{update(e,t,i){const l=i.getEl(e);null!==l&&(l.value=void 0!==t?t:'')},render(t,e){const i=L.createDocumentFragment(),l=L.createElement('input'),a=e.getStyleVal(t.id);if(l.type=void 0!==t.input_type?t.input_type:'text',!0===e.is_repeat?(l.className=!0===e.is_sort?'tb_lb_sort_child':'tb_lb_option_child',l.dataset.inputId=t.id):(l.className='tb_lb_option',l.id=t.id),void 0!==t.placeholder&&(l.placeholder=t.placeholder),void 0!==t.custom_args)for(let e in t.custom_args)l.setAttribute(e,t.custom_args[e]);return void 0!==a&&(l.value=a),void 0!==t.class&&(l.className+=' '+t.class),i.appendChild(e.initControl(l,t)),void 0!==t.unit&&i.appendChild(e.select.render(t.unit,e)),void 0!==t.after&&i.appendChild(e.after(t)),void 0!==t.description&&i.appendChild(e.description(t.description)),void 0!==t.tooltip&&i.appendChild(e.hint(t.tooltip)),i}},number:{render(e,t){return e.input_type='number',void 0===e.custom_args&&(e.custom_args={min:0}),void 0!==e.step&&(void 0===e.custom_args&&(e.custom_args={}),e.custom_args.step=e.step),t.text.render(e,t)}},angle:{render(e,t){e.input_type='number',e.custom_args={min:0,max:360};const i=L.createElement('div'),l='xsmall tb_lb_option tb_angle_input',a=(i.tabIndex=-1,i.className='tb_angle_container tf_rel',e.class=void 0!==e.class?e.class+' '+l:l,(!0===e.deg?t.range:t.text).render(e,t)),u=(i.appendChild(a),i.querySelector('#'+e.id));return!0===e.deg&&(u.dataset.deg=!0),t.afterRun.push(function(){const p=S.Utils.getMouseEvents();u.addEventListener(p.mousedown,function(e){e.stopImmediatePropagation();let t=this.parentNode.querySelector('.tb_angle_circle');if(!t){let e=this.value;const i=L.createElement('div'),l=L.createElement('div');t=L.createElement('div'),''!==e&&(i.style.transform='rotate('+e+'deg)'),i.className='tb_angle_dot',t.className='tb_angle_circle',l.className='tb_angle_circle_wrapper',t.appendChild(i),l.appendChild(t),this.parentNode.appendChild(l)}t.addEventListener(e.type,function(l){if('touchstart'===l.type||1===l.which){let e=this.getBoundingClientRect(),a=this.offsetWidth/2+e.left,s=this.offsetHeight/2+e.top,t,i=void this.parentNode.querySelector('.tb_angle_circle_wrapper'),n=this.parentNode.querySelector('.tb_angle_dot');const o=180/Math.PI,r=this.ownerDocument,d=function(e){e.stopImmediatePropagation(),this.body.classList.add('tb_start_animate','tb_show_overlay'),this.body.style.cursor='grab'},c=function(l){l.stopImmediatePropagation(),t&&cancelAnimationFrame(t),t=requestAnimationFrame(function(){let e=s-(l.touches?l.touches[0]:l).clientY,t=a-(l.touches?l.touches[0]:l).clientX,i=Math.atan2(e,t)*o;(i-=90)<0&&(i+=360),i=Math.round(i),n.style.transform='rotate('+i+'deg)',u.value=i,k.triggerEvent(u,u.dataset.deg?'keyup':'change')})};r.addEventListener(p.mousemove,d,{passive:!0,once:!0}),r.addEventListener(p.mousemove,c,{passive:!0}),r.addEventListener(p.mouseup,function(e){t&&cancelAnimationFrame(t),this.removeEventListener(p.mousemove,d,{passive:!0,once:!0}),this.removeEventListener(p.mousemove,c,{passive:!0}),this.body.classList.remove('tb_start_animate','tb_show_overlay'),this.body.style.cursor='',requestAnimationFrame(function(){i=n=a=t=s=null})},{passive:!0,once:!0}),c(l)}},{passive:!0})},{passive:!0,once:!0})}),i}},autocomplete:{cache:{},xhr:null,render(s,e){const t=e.text.render(s,e);if(void 0!==s.dataset){const i=t.querySelector('input'),n=this,l=L.createElement('div');i.autocomplete='off',l.className='tb_autocomplete_container',t.appendChild(l),i.addEventListener('input',function(){const e=this.nextElementSibling;for(e.style.display='none';null!==e.firstChild;)e.removeChild(e.lastChild);e.style.display='';const t=this.value,i=s.dataset,l=function(i){const l=L.createDocumentFragment();for(let t in i){let e=L.createElement('div');e.className='tb_autocomplete_item',e.setAttribute('data-value',t),e.innerText=i[t],l.appendChild(e)}e.classList.add('tf_scrollbar'),e.appendChild(l)};if(void 0===n.cache[i]&&(n.cache[i]={}),void 0!==n.cache[i][t])l(n.cache[i][t]);else if(''!==t){null!==n.xhr&&n.xhr.abort();const a=this.parentNode;a.classList.add('tb_autocomplete_loading','tf_loader'),n.xhr=$.ajax({type:'POST',url:themifyBuilder.ajaxurl,dataType:'json',data:{action:'tb_get_autocomplete',dataset:i,value:t,nonce:themifyBuilder.tb_load_nonce,pid:themifyBuilder.post_ID},success(e){e.success&&(n.cache[i][t]=e.data,l(e.data))},complete(){n.xhr=null,a.classList.remove('tb_autocomplete_loading','tf_loader')}})}},{passive:!0}),l.addEventListener('mousedown',function(e){if(1===e.which&&e.target.classList.contains('tb_autocomplete_item')){e.preventDefault(),e.stopPropagation();const t=this.previousElementSibling;t.value=e.target.getAttribute('data-value'),t.blur(),k.triggerEvent(t,'change')}})}return t}},file:{_frames:{},clicked:null,browse(t,l,a,s){const n=this;t.addEventListener('click',function(e){e.preventDefault(),e.stopPropagation();let i;void 0!==n._frames[s]?i=n._frames[s]:(i=wp.media.frames.file_frame=wp.media({title:a.label.upload_image,library:{type:s},button:{text:a.label.insert_image},multiple:!1}),n._frames[s]=i),i.off('select').on('select',function(){S.ActionBar.disable=!0;const e=i.state().get('selection').first().toJSON(),t=(l.value=e.url,k.triggerEvent(l,'change'),S.hasChanged=!0,$(l).trigger('change'),v.Lightbox.$lightbox.find('#'+l.id+'_id')[0]);void 0!==t&&(t.value=e.id)}),i.on('close',function(){S.ActionBar.disable=!0,setTimeout(function(){S.ActionBar.disable=null},5)}),i.open()}),'image'===s&&l.addEventListener('change',function(e){S.hasChanged=!0,n.setImage(t,this.value.trim())},{passive:!0})},setImage(e,t){for(;e.firstChild;)e.removeChild(e.firstChild);if(t){const i=L.createElement('img');i.width=40,i.height=40,i.src=t,e.appendChild(i)}},update(e,t,i){const l=i.getEl(e);null!==l&&(void 0===t&&(t=''),l.value=t,this.setImage(l.parentNode.getElementsByClassName('thumb_preview')[0],t))},render(e,t,i){const l=L.createElement('div'),a=L.createElement('input'),s=L.createElement('a'),n=L.createElement('span'),o=i.getStyleVal(t.id);let r;if(a.type='text',a.className='tb_uploader_input',a.required=!0,a.setAttribute('pattern',/.*\S.*/.source),a.setAttribute('autocomplete','off'),!0===i.is_repeat?(a.className+=!0===i.is_sort?' tb_lb_sort_child':' tb_lb_option_child',r=Math.random().toString(36).substr(2,7),a.dataset.inputId=t.id):(a.className+=' tb_lb_option',r=t.id),a.id=r,void 0!==o&&(a.value=o),n.className='tb_clear_input tf_close',s.className='tb_media_uploader tb_upload_btn thumb_preview tf_plus_icon',s.href='#',s.dataset.libraryType=e,s.title=i.label.browse_image,l.className='tb_uploader_wrapper',l.appendChild(i.initControl(a,t)),l.appendChild(n),l.appendChild(s),'image'===e&&this.setImage(s,o),this.browse(s,a,i,e),void 0!==t.after&&l.appendChild(i.after(t)),void 0!==t.description&&l.appendChild(i.description(t.description)),void 0!==t.tooltip&&l.appendChild(i.hint(t.tooltip)),null===this.clicked&&!0===i.is_new&&'setting'===i.clicked&&('image'===i.type||'pro-image'===i.type)){this.clicked=!0;const d=this;i.afterRun.push(function(){s.click(),d.clicked=null})}return l}},image:{render(e,t){return t.file.render('image',e,t)}},video:{render(e,t){return t.file.render('video',e,t)}},audio:{render(e,t){return t.file.render('audio',e,t)}},icon_radio:{controlChange(i){i.addEventListener('click',function(e){if(e.preventDefault(),e.stopImmediatePropagation(),e.target!==i){const t=e.target.closest('label').getElementsByTagName('input')[0];!0===t.checked?(t.checked=!1,t.value=void 0):(t.checked=!0,t.value=t.getAttribute('data-value')),S.hasChanged=!0,k.triggerEvent(t,'change')}})},render(e,t){return t.radioGenerate('icon_radio',e)}},radio:{controlChange(e){let i=null;null===(i=e.classList.contains('tb_radio_dnd')?e.closest('.tb_repeatable_field_content'):i)&&null===(i=e.closest('.tb_tab'))&&null===(i=e.closest('.tb_expanded_opttions'))&&(i=v.Lightbox.$lightbox[0]);const l=e.parentNode.parentNode.getElementsByTagName('input'),a=e.value,t=i.getElementsByClassName('tb_group_element_'+a);for(let t=l.length-1;-1<t;--t){let e=l[t].value;if(a!==e){let t=i.getElementsByClassName('tb_group_element_'+e);for(let e=t.length-1;-1<e;--e)t[e].style.display='none'}}for(let e=t.length-1;-1<e;--e)t[e].style.display='block'},update(e,i,t){const l=t.getEl(e);if(null!==l){const a=l.getElementsByTagName('input'),s=l.classList.contains('tb_icon_radio');let t=null;for(let e=a.length-1;-1<e;--e)if(a[e].value===i){t=a[e];break}if(null===t){const n=l.dataset.default;void 0!==n&&(t=l.querySelector('[value="'+n+'"]')),!1===s&&null===t&&(t=a[0])}if(null!==t)!(t.checked=!0)===s&&l.classList.contains('tb_option_radio_enable')&&this.controlChange(t);else if(!0===s)for(let e=a.length-1;-1<e;--e)a[e].checked=!1}},render(e,t){return t.radioGenerate('radio',e)}},icon_checkbox:{render(e,t){return t.checkboxGenerate('icon_checkbox',e)}},checkbox:{update(e,t,i){const l=i.getEl(e);if(null!==l){const a=l.getElementsByTagName('input'),s=l.classList.contains('tb_option_checkbox_enable');t=t?t.split('|'):[];for(let e=a.length-1;-1<e;--e)a[e].checked=-1!==t.indexOf(a[e].value),!0===s&&this.controlChange(a[e])}},controlChange(e){const l=e.classList.contains('tb_radio_dnd')?e.closest('.tb_repeatable_field_content'):v.Lightbox.$lightbox[0],t=e.parentNode.parentNode,a=t.getElementsByTagName('input'),s=t.classList.contains('tb_option_checkbox_revert');for(let e=a.length-1;-1<e;--e){let t=l.getElementsByClassName('tb-checkbox_element_'+a[e].value),i=a[e].checked;for(let e=t.length-1;-1<e;--e)t[e].classList.toggle('_tb_hide_binding',!(!0===s&&!1===i||!1===s&&!0===i))}},render(e,t){return t.checkboxGenerate('checkbox',e)}},radioGenerate(e,l){const t=L.createDocumentFragment(),a=L.createElement('div'),s='icon_radio'===e,n=this.getOptions(l),o=this.getStyleVal(l.id),r=!0===l.option_js,d=[],c=this;let i=null,p=void 0!==l.default&&l.default,u;a.className='tb_radio_input_container',a.setAttribute('tabIndex','-1'),1==r&&(a.className+=' tb_option_radio_enable'),1==s&&(a.className+=' tb_icon_radio',i=void 0===l.no_toggle),!0===this.is_repeat?(a.className+=!0===this.is_sort?' tb_lb_sort_child':' tb_lb_option_child',u=Math.random().toString(36).substr(2,7),a.dataset.inputId=l.id):(a.className+=' tb_lb_option',a.id=u=l.id),!1!==p?a.dataset.default=p:0==s&&void 0===o&&(p=n[0].value),void 0!==l.before&&t.appendChild(L.createTextNode(l.before));for(let i=0,e=n.length;i<e;++i){let t=L.createElement('label'),e=L.createElement('input');if(e.type='radio',e.name=u,e.value=n[i].value,1==s&&e.setAttribute('data-value',n[i].value),!0===this.is_repeat&&(e.className='tb_radio_dnd'),void 0!==l.class&&(e.className+=!0===this.is_repeat?' '+l.class:l.class),!0===n[i].disable&&(e.disabled=!0),(o===n[i].value||void 0===o&&p===n[i].value)&&(e.checked=!0)==r&&d.push(e),t.appendChild(e),1==r&&e.addEventListener('change',function(){this.parentNode.parentNode.blur(),c.radio.controlChange(this)},{passive:!0}),1==s){if(void 0!==n[i].icon){let e=L.createElement('span');e.className='tb_icon_wrapper',e.innerHTML=n[i].icon,t.insertAdjacentElement('beforeend',e)}if(void 0!==n[i].label_class&&(t.className+=n[i].label_class),void 0!==n[i].name){let e=L.createElement('span');e.className='themify_tooltip',e.textContent=n[i].name,t.appendChild(e)}}else if(void 0!==n[i].name){let e=L.createElement('span');e.textContent=n[i].name,t.appendChild(e)}a.appendChild(t),void 0!==l.new_line&&a.appendChild(L.createElement('br')),this.initControl(e,l)}return a.addEventListener('click',function(e){'LABEL'===e.target.parentNode.tagName&&this.blur()},{passive:!0}),t.appendChild(a),void 0!==l.after&&t.appendChild(c.after(l)),void 0!==l.description&&t.appendChild(c.description(l.description)),1==s&&!0===i&&c.icon_radio.controlChange(a),1==r&&this.radioChange.push(function(){for(let e=0,t=d.length;e<t;++e)c.radio.controlChange(d[e])}),t},checkboxGenerate(e,l){const t=L.createDocumentFragment(),a=L.createElement('div'),s=this.getOptions(l),n='icon_checkbox'===e,o=!0===l.option_js,r=void 0===l.new_line,d=this,c=[];let p=this.getStyleVal(l.id),u=null,m=null;a.className='themify-checkbox',1==o&&(a.className+=' tb_option_checkbox_enable',void 0!==l.reverse&&(a.className+=' tb_option_checkbox_revert')),!0===this.is_repeat?(a.className+=!0===this.is_sort?' tb_lb_sort_child':' tb_lb_option_child',a.dataset.inputId=l.id):(a.className+=' tb_lb_option',a.id=l.id),void 0!==l.wrap_checkbox&&(a.className+=' '+l.wrap_checkbox),void 0===p?void 0!==l.default&&(u=l.default,m=Array.isArray(u)):!1!==p&&(p=p.split('|')),1==n&&(a.className+=' tb_icon_checkbox'),void 0!==l.before&&t.appendChild(L.createTextNode(l.before));for(let i=0,e=s.length;i<e;++i){let t=L.createElement('label'),e=L.createElement('input');if(e.type='checkbox',e.className='tb-checkbox',e.value=s[i].name,void 0!==l.class&&(e.className+=' '+l.class),(void 0!==p&&!1!==p&&-1!==p.indexOf(s[i].name)||u===s[i].name||!0===m&&-1!==u.indexOf(s[i].name))&&(e.checked=!0),1==o&&(e.addEventListener('change',function(){d.checkbox.controlChange(this)},{passive:!0}),c.push(e)),'hide_anchor'===l.id&&S.Utils.changeOptions(e,'hide_anchor'),0==r&&(t.className='pad-right'),t.appendChild(e),1==n){if(t.insertAdjacentHTML('beforeend',s[i].icon),void 0!==s[i].value){let e=L.createElement('span');e.className='themify_tooltip',e.textContent=s[i].value,t.appendChild(e)}}else void 0!==s[i].value&&t.appendChild(L.createTextNode(s[i].value));a.appendChild(t),void 0!==s[i].help&&a.appendChild(this.help(s[i].help)),1==r&&a.appendChild(L.createElement('br')),this.initControl(e,l)}return'hide_anchor'===l.id&&a.addEventListener('click',function(e){e.stopPropagation()}),t.appendChild(a),void 0!==l.after&&(void 0!==l.label&&''!==l.label||void 0===l.help||''===l.help?t.appendChild(this.after(l)):(a.className+=' contains-help',a.appendChild(this.after(l)))),void 0!==l.description&&t.appendChild(this.description(l.description)),1==o&&this.afterRun.push(function(){for(let e=0,t=c.length;e<t;++e)d.checkbox.controlChange(c[e])}),t},date:{loaded:null,render(i,e){const t=L.createDocumentFragment(),l=L.createElement('input'),a=L.createElement('button'),s=this,n=function(){return y.jQuery.fn.themifyDatetimepicker||y.jQuery.fn.datetimepicker},o=function(){n().call($(l),'hide')},r=function(){const e=n();if(e){const t=void 0!==i.picker?i.picker:{};a.addEventListener('click',function(e){e.preventDefault(),e.stopPropagation(),l.value='',l.dispatchEvent(new Event('change')),this.style.display='none'}),e.call($(l),{showTimepicker:!(void 0!==i.timepicker&&!i.timepicker),showButtonPanel:!0,changeYear:!0,dateFormat:t.dateformat||'yy-mm-dd',timeFormat:t.timeformat||'HH:mm:ss',stepMinute:t.stepMinute||5,stepSecond:t.stepSecond||5,controlType:t.timecontrol||'select',oneLine:!0,separator:t.timeseparator||' ',onSelect(e){a.style.display=''===e?'none':'block',l.dispatchEvent(new Event('change'))},beforeShow(e,t){t.dpDiv.addClass('themify-datepicket-panel');let i=e.getBoundingClientRect();setTimeout(function(){t.dpDiv.css({top:i.top+e.offsetHeight,left:i.left})},10),'visual'===S.mode&&L.body.addEventListener('click',o,{once:!0})},onClose(){'visual'===S.mode&&L.body.removeEventListener('click',o)}})}};if(l.type='text',l.autocomplete='off',l.className='themify-datepicker',!0===e.is_repeat?(l.className+=!0===e.is_sort?' tb_lb_sort_child':' tb_lb_option_child',l.dataset.inputId=i.id):(l.className+=' tb_lb_option',l.id=i.id),l.readonly=!0,a.className='themify-datepicker-clear tf_close',a.textContent=e.label.clear_date,void 0!==e.values[i.id]&&(l.value=e.values[i.id]),void 0!==i.class&&(l.className+=' '+i.class),l.value||(a.style.display='none'),t.appendChild(e.initControl(l,i)),t.appendChild(a),void 0!==i.after&&t.appendChild(e.after(i)),void 0!==i.description&&t.appendChild(e.description(i.description)),null===this.loaded){const d=function(){y.Themify.LoadCss(themifyBuilder.meta_url+'css/jquery-ui-timepicker.min.css',themify_vars.version),y.Themify.LoadAsync(themifyBuilder.includes_url+'js/jquery/ui/datepicker.min.js',function(){y.Themify.LoadAsync(themifyBuilder.meta_url+'js/jquery-ui-timepicker.min.js',function(){s.loaded=!0,setTimeout(r,10)},themify_vars.version,null,function(){return void 0!==y.jQuery.fn.themifyDatetimepicker||void 0!==y.jQuery.fn.datetimepicker})},themify_vars.wp,null,function(){return void 0!==y.jQuery.fn.datepicker})};e.afterRun.push(d)}else e.afterRun.push(r);return t}},gradient:{controlChange(e,t,i,l,a,s,n,o,r){let d=e.getStyleVal(s.id),c=(void 0!==d&&''!==d||(d=180),!1),p=$(t),u=i.id,m=e.getStyleVal(u),_={angle:d,onChange(e,t){c&&(e=t=''),'visual'===S.mode&&k.triggerEvent(i,'themify_builder_gradient_change',{val:t}),i.value=e,S.hasChanged=!0},onInit(){t.style.display='block'}},h=(m&&(_.gradient=m,i.value=m),s.value=d,e.getStyleVal(a.id));void 0!==h&&''!==h||(h='linear'),a.value=h,_.type=h,n.checked&&(_.circle=!0),r||p.ThemifyGradient(_);const b=p.data('themifyGradient'),g=function(e){let t=s.parentNode;t.classList.contains('tb_angle_container')||(t=s),'radial'===e?(o.style.display=t.style.display='none',n.parentNode.style.display=''):(o.style.display=t.style.display='',n.parentNode.style.display='none')};S.Utils.getMouseEvents(),r?(b.settings=$.extend({},b.settings,_),b.settings.type=h,b.settings.circle=n.checked,b.isInit=!1,b.update(),b.isInit=!0):(l.addEventListener('click',function(e){e.preventDefault(),e.stopImmediatePropagation(),c=!0,b.settings.gradient=$.ThemifyGradient.default,b.update(),c=!1}),a.addEventListener('change',function(e){const t=this.value;b.setType(t),g(t)},{passive:!0}),n.addEventListener('change',function(){b.setRadialCircle(this.checked)},{passive:!0}),s.addEventListener('change',function(){let e=parseInt(this.value);e=e||0,b.setAngle(e)},{passive:!0})),g(e.getStyleVal(a.id))},update(e,t,i){const l=e+'-gradient',a=i.getEl(l);if(null!==a){const s=i.getEl(l+'-angle'),n=i.getEl(l+'-type'),o=i.getEl(e+'-circle-radial'),r=a.previousElementSibling,d=o.previousElementSibling;this.controlChange(i,r,a,null,n,s,o.getElementsByClassName('tb-checkbox')[0],d,!0)}},render(e,i){const t=L.createElement('div'),l=L.createElement('div'),a=L.createElement('select'),s=['linear','radial'],n=L.createElement('span'),o=L.createElement('div'),r=L.createElement('input'),d=L.createElement('a'),c=this;t.className='themify-gradient-field',void 0!==e.option_js&&(t.className+=' tb_group_element_gradient'),l.className='selectwrapper',a.className='tb_lb_option themify-gradient-type',a.id=e.id+'-gradient-type',n.textContent=i.label.rotation,o.className='tb_gradient_container',o.tabIndex=-1,r.type='hidden',r.className='themify-gradient tb_lb_option',r.dataset.id=e.id,r.id=e.id+'-gradient',d.className='tb_clear_gradient tf_close';let p=L.createElement('span');p.className='themify_tooltip',p.innerText=i.label.clear_gradient,d.appendChild(p),d.href='#';for(let t=0;t<2;++t){let e=L.createElement('option');e.value=s[t],e.textContent=i.label[s[t]],a.appendChild(e)}l.appendChild(a),t.appendChild(l);const u=$.extend(!0,{},e),m=(u.id=e.id+'-gradient-angle',i.angle.render(u,i));return t.appendChild(m),t.appendChild(n),t.appendChild(i.checkboxGenerate('checkbox',{id:e.id+'-circle-radial',options:[{name:'1',value:i.label.circle_radial}]})),t.appendChild(o),t.appendChild(r),t.appendChild(d),i.initControl(r,e),i.afterRun.push(function(){c.controlChange(i,o,r,d,a,m.getElementsByClassName('tb_angle_input')[0],t.getElementsByClassName('tb-checkbox')[0],n)}),t}},fontColor:{update(e,t,i){i.radio.update(e,i.getStyleVal(e),i)},render(e,t){e.isFontColor=!0;const i={id:e.id,type:'radio',option_js:!0,isFontColor:!0,options:[{value:e.s+'_solid',name:t.label.solid},{value:e.g+'_gradient',name:t.label.gradient}]},l=t.radioGenerate('radio',i),a=l.querySelector('.tb_lb_option'),s=$.extend(!0,{},e),n=(s.label='',s.type='color',s.id=e.s,s.prop='color',s.wrap_class='tb_group_element_'+e.s+'_solid',t.create([s])),o=(s.id=e.g,s.wrap_class='tb_group_element_'+e.g+'_gradient',s.type='gradient',s.prop='background-image',t.create([s]));return t.afterRun.push(function(){const e=a.parentNode.closest('.tb_field');e.parentNode.insertBefore(n,e.nextElementSibling),e.parentNode.insertBefore(o,e.nextElementSibling)}),l}},imageGradient:{update(e,t,l){l.radio.update(e+'-type',l.getStyleVal(e+'-type'),l),l.file.update(e,t,l),l.gradient.update(e,t,l);const a=l.getEl(e);if(null!==a){let e=a.closest('.tb_tab'),t=e.getElementsByClassName('tb_image_options'),i=e.getElementsByClassName('tb_gradient_image_color')[0].getElementsByClassName('tfminicolors-input')[0].id;l.color.update(i,l.getStyleVal(i),l);for(let e=0;e<t.length;++e)i=t[e].getElementsByClassName('tb_lb_option')[0].id,l.select.update(i,l.getStyleVal(i),l)}},render(e,i){const t=L.createElement('div'),l=L.createElement('div'),a=(t.className='tb_image_gradient_field',l.className='tb_group_element_image',t.appendChild(i.radioGenerate('radio',{type:e.type,id:e.id+'-type',options:[{name:i.label.image,value:'image'},{name:i.label.gradient,value:'gradient'}],option_js:!0})),$.extend(!0,{},e));return a.type='image',a.class='xlarge',l.appendChild(i.file.render('image',$.extend(!0,{},a),i)),t.appendChild(l),a.type='gradient',delete a.class,delete a.binding,t.appendChild(i.gradient.render(a,i)),i.afterRun.push(function(){const e={wrap_class:'tb_group_element_image',type:'group',options:[]},t=(a.prop='background-color',a.wrap_class='tb_gradient_image_color',a.label=i.label.bg_c,a.type='color',a.id=a.colorId,e.options.push($.extend({},a)),a.prop='background-mode',a.wrap_class='tb_image_options',a.label=i.label.b_r,a.repeat=!0,a.type='select',a.id=a.repeatId,e.options.push($.extend({},a)),a.prop='background-position',a.wrap_class='tb_image_options',a.label=i.label.b_p,a.position=!0,a.type='position_box',a.id=a.posId,delete a.repeat,e.options.push($.extend({},a)),l.parentNode.closest('.tb_field'));t.parentNode.insertBefore(i.create([e]),t.nextElementSibling)}),t}},layout:{controlChange(l){l.addEventListener('click',function(e){if(e.preventDefault(),e.stopPropagation(),e.target!==l){const t=e.target.closest('a');if(null!==t){const i=this.getElementsByClassName('tfl-icon');for(let e=i.length-1;-1<e;--e)i[e].classList.remove('selected');t.classList.add('selected'),S.hasChanged=!0,k.triggerEvent(this,'change',{val:t.id})}}})},update(e,t,i){const l=i.getEl(e);if(null!==l){const a=l.getElementsByClassName('tfl-icon');for(let e=a.length-1;-1<e;--e)a[e].classList.toggle('selected',t===a[e].id);if(void 0===t){let e=l.dataset.default;(e=void 0===e?a[0]:e.querySelector('#'+e)).classList.add('selected')}}},render(a,e){const s=L.createElement('div');let n=e.getOptions(a),o=e.getStyleVal(a.id);if(!0===a.color&&!0===a.transparent&&(n=n.slice()).push({img:'transparent',value:'transparent',label:e.label.transparent}),s.className='themify-layout-icon',!0===e.is_repeat?(s.className+=!0===e.is_sort?' tb_lb_sort_child':' tb_lb_option_child',s.dataset.inputId=a.id):(s.className+=' tb_lb_option',s.id=a.id),void 0!==a.class&&(s.className+=' '+a.class),void 0===o){const t=themifyBuilder.modules[e.type];o=void 0!==t&&void 0!==t.defaults&&t.defaults[a.id]?t.defaults[a.id]:n[0].value}for(let l=0,e=n.length;l<e;++l){let e=L.createElement('a'),t=L.createElement('span'),i;e.href='#',e.className='tfl-icon',e.id=n[l].value,o===n[l].value.toString()&&(e.className+=' selected'),t.className='themify_tooltip',t.textContent=n[l].label,'sprite'===a.mode&&-1===n[l].img.indexOf('.png')?((i=L.createElement('span')).className='tb_sprite',-1!==n[l].img.indexOf('http')?i.style.backgroundImage='url('+n[l].img+')':i.className+=' tb_'+n[l].img):((i=L.createElement('img')).alt=n[l].label,i.src=-1!==n[l].img.indexOf('http')?n[l].img:themifyBuilder.builder_url+'/editor/img/'+n[l].img),e.appendChild(i),e.appendChild(t),s.appendChild(e)}return this.controlChange(s),'row'!==e.component||'row_width'!==a.id&&'row_height'!==a.id?e.initControl(s,a):S.Utils.changeOptions(s,a.type),s}},layoutPart:{data:[],get(t){const i=this;$.ajax({type:'POST',url:themifyBuilder.ajaxurl,dataType:'json',data:{action:'tb_get_library_items',nonce:themifyBuilder.tb_load_nonce,pid:themifyBuilder.post_ID},beforeSend(e){v.showLoader('show')},success(e){v.showLoader('hide'),i.data=e,t()},error(){v.showLoader('error')}})},render(e,t){const a=this,i=L.createDocumentFragment(),l=t.select.render(e,t),s=L.createElement('a'),n=L.createElement('a'),o=l.querySelector('select');function r(){const i=t.values[e.id],l=null!==S.Forms.LayoutPart.id?S.Forms.LayoutPart.id.toString():null;o.appendChild(L.createElement('option'));for(let t=0,e=a.data.length;t<e;++t)if(l!==a.data[t].id.toString()){let e=L.createElement('option');e.value=a.data[t].post_name,e.textContent=a.data[t].post_title,i===a.data[t].post_name&&(e.selected=!0),o.appendChild(e)}}return 0===a.data.length?a.get(r):r(),i.appendChild(l),s.target=n.target='_blank',s.className='tb_icon_btn',s.href=e.edit_url,n.href=e.add_url,n.className='add_new tf_plus_icon tb_icon_btn',s.appendChild(S.Utils.getIcon('ti-folder')),s.appendChild(L.createTextNode(t.label.mlayout)),n.appendChild(L.createTextNode(t.label.nlayout)),i.appendChild(L.createElement('br')),i.appendChild(n),i.appendChild(s),i}},separator:{render(e,t){let i;const l=void 0!==t.label[e.label]?t.label[e.label]:e.label;if(void 0!==l){i=void 0!==e.wrap_class?L.createElement('div'):L.createDocumentFragment();const a=L.createElement('h4');a.textContent=l,i.appendChild(L.createElement('hr')),i.appendChild(a),void 0!==e.wrap_class&&(i.className=e.wrap_class)}else if(void 0!==e.html){const s=L.createElement('div');s.innerHTML=e.html,i=s.firstChild,void 0!==e.wrap_class&&(i.className=e.wrap_class)}else i=L.createElement('hr'),void 0!==e.wrap_class&&(i.className=e.wrap_class);return i}},multiColumns:{render(e,t){const i=[],l=[{id:e.id+'_gap',label:t.label.c_g,type:'range',prop:'column-gap',selector:e.selector,wrap_class:'tb_multi_columns_wrap',units:{px:{max:500}}},{type:'multi',wrap_class:'tb_multi_columns_wrap',label:t.label.c_d,options:[{type:'color',id:e.id+'_divider_color',prop:'column-rule-color',selector:e.selector},{type:'range',id:e.id+'_divider_width',class:'tb_multi_columns_width',prop:'column-rule-width',selector:e.selector,units:{px:{max:500}}},{type:'select',id:e.id+'_divider_style',options:t.static.border,prop:'column-rule-style',selector:e.selector}]}];for(let e=0;e<7;++e)i[e]=0===e?'':e;e.options=i;const a=$.extend(!0,{},e),s=(a.type='select',t.select.render(a,t)),n=s.querySelector('select');return t.afterRun.push(function(){const e=n.closest('.tb_field');e.parentNode.insertBefore(t.create(l),e.nextElementSibling)}),s}},expand:{render(t,i){const e=L.createElement('fieldset'),l=L.createElement('div'),a=L.createElement('div'),s=void 0!==i.label[t.label]?i.label[t.label]:t.label;return e.className='tb_expand_wrap',a.className='tb_style_toggle tb_closed',l.className='tb_expanded_opttions',a.appendChild(L.createTextNode(s)),a.appendChild(S.Utils.getIcon('ti-angle-up')),e.appendChild(a),e.appendChild(l),a.addEventListener('click',function(e){e.preventDefault(),e.stopImmediatePropagation(),void 0===this.dataset.done&&(this.dataset.done=!0,l.appendChild(i.create(t.options)),'setting'===i.clicked&&i.setUpEditors(),i.callbacks(),k.body.triggerHandler('tb_options_expand',[l])),this.classList.toggle('tb_closed')}),e}},gallery:{file_frame:null,cache:{},init(e,n){const t=function(e){e.preventDefault(),e.stopPropagation(),null===l.file_frame?(l.file_frame=wp.media.frames.file_frame=wp.media({frame:'post',state:'gallery-library',library:{type:'image'},title:wp.media.view.l10n.editGalleryTitle,editing:!0,multiple:!0,selection:!1}),l.file_frame.el.classList.add('themify_gallery_settings')):l.file_frame.options.selection.reset(),wp.media.gallery.shortcode=function(e){const t=e.props.toJSON(),i=_.pick(t,'orderby','order');e.gallery&&Object.assign(i,e.gallery.toJSON()),i.ids=e.pluck('id'),t.uploadedTo&&(i.id=t.uploadedTo),i._orderbyRandom&&(i.orderby='rand',delete i._orderbyRandom),i.ids&&'post__in'===i.orderby&&delete i.orderby;for(let e in wp.media.gallery.defaults)wp.media.gallery.defaults[e]===i[e]&&delete i[e];delete i._orderByField;const l=new y.wp.shortcode({tag:'gallery',attrs:i,type:'single'});return wp.media.gallery.shortcode=a,l};const t=n.value.trim(),i=(0<t.length?(l.file_frame=wp.media.gallery.edit(t),l.file_frame.state('gallery-edit')):(l.file_frame.state('gallery-library'),l.file_frame.open(),l.file_frame.$el.find('.media-menu .media-menu-item').last().trigger('click')),function(e){const t=wp.media.gallery.shortcode(e).string().slice(1,-1);n.value='['+t+']',s(e.models),k.triggerEvent(n,'change'),S.hasChanged=!0});l.file_frame.off('update',i).on('update',i)},a=(e.addEventListener('click',t),wp.media.gallery.shortcode),l=this,i=n.value.trim(),s=function(l,a){const s=L.createElement('div'),e=n.parentNode.getElementsByClassName('tb_shortcode_preview')[0];s.className='tb_shortcode_preview',void 0!==e&&e.parentNode.removeChild(e);for(let i=0,e=l.length;i<e;++i){let t=L.createElement('img');if(t.width=t.height=50,!0===a)t.src=l[i];else{let e=l[i].attributes;t.src=(e.sizes.thumbnail||e).url}s.appendChild(t)}s.addEventListener('click',t),n.parentNode.insertBefore(s,n.nextElementSibling)};0<i.length&&(void 0!==this.cache[i]?s(this.cache[i],!0):$.ajax({type:'POST',url:themifyBuilder.ajaxurl,dataType:'json',data:{action:'tb_load_shortcode_preview',tb_load_nonce:themifyBuilder.tb_load_nonce,shortcode:i},success(e){s(e,!0),l.cache[i]=e}}))},render(e,t){const i=L.createDocumentFragment(),l=L.createElement('a'),a=this;let s=void 0!==e.class?e.class:'';return s+=' tb_shortcode_input',l.href='#',l.className='builder_button tb_gallery_btn',l.textContent=t.label.add_gallery,e.class=s,i.appendChild(t.textarea.render(e,t)),i.appendChild(l),t.afterRun.push(function(){a.init(l,l.previousElementSibling),!0===t.is_new&&'gallery'===t.type&&'setting'===t.clicked&&l.click()}),i}},textarea:{render(i,l){const e=L.createDocumentFragment(),a=L.createElement('textarea'),t=l.getStyleVal(i.id);return!0===l.is_repeat?(a.className=!0===l.is_sort?'tb_lb_sort_child':'tb_lb_option_child',a.dataset.inputId=i.id):(a.className='tb_lb_option',a.id=i.id),a.className+=' '+(void 0!==i.class?i.class:'xlarge'),void 0!==t&&(a.value=t),void 0!==i.rows&&(a.rows=i.rows),void 0!==i.readonly&&i.readonly&&a.setAttribute('readonly',1),e.appendChild(l.initControl(a,i)),void 0!==i.codeeditor&&l.afterRun.push(function(){l.code_editor.load(function(){const e=themifyBuilder.c_e.config,t=(e.codemirror.mode=i.codeeditor,e.codemirror.lineNumbers=!1,y.wp.codeEditor.initialize(a,e));l.code_editor.setHeight(t.codemirror.display.wrapper,'m'),t.codemirror.on('change',function(e){a.value=e.getValue(),k.triggerEvent(a,'keyup')})})}),void 0!==i.after&&e.appendChild(l.after(i)),void 0!==i.description&&e.appendChild(l.description(i.description)),e}},address:{render(e,t){return t.textarea.render(e,t)}},wp_editor:{render(e,t){const i=L.createElement('div'),l=L.createElement('div'),a=L.createElement('div'),s=L.createElement('button'),n=L.createElement('span'),o=L.createElement('div'),r=L.createElement('button'),d=L.createElement('button'),c=L.createElement('div'),p=L.createElement('div'),u=L.createElement('textarea');let m;return i.className='wp-core-ui wp-editor-wrap tmce-active',u.className='tb_lb_wp_editor fullwidth',!0===t.is_repeat?(m=Math.random().toString(36).substr(2,7),u.className+=!0===t.is_sort?' tb_lb_sort_child':' tb_lb_option_child',u.dataset.inputId=e.id,!1!==e.control&&(void 0===e.control&&(e.control={}),e.control.repeat=!0)):(u.className+=' tb_lb_option',m=e.id),u.id=m,i.id='wp-'+m+'-wrap',l.id='wp-'+m+'-editor-tools',l.className='wp-editor-tools',a.id='wp-'+m+'-media-buttons',a.className='wp-media-buttons',s.type='button',s.className='button insert-media add_media',n.className='wp-media-buttons-icon',o.className='wp-editor-tabs',r.type='button',r.className='wp-switch-editor switch-tmce',r.id=m+'-tmce',r.dataset.wpEditorId=m,r.textContent=t.label.visual,d.type='button',d.className='wp-switch-editor switch-html',d.id=m+'-html',d.dataset.wpEditorId=m,d.textContent=t.label.text,c.id='wp-'+m+'-editor-container',c.className='wp-editor-container',p.id='qt_'+m+'_toolbar',p.className='quicktags-toolbar',void 0!==e.class&&(u.className+=' '+e.class),void 0!==t.values[e.id]&&(u.value=t.values[e.id]),u.rows=12,u.cols=40,c.appendChild(u),c.appendChild(p),o.appendChild(r),o.appendChild(d),s.appendChild(n),s.appendChild(L.createTextNode(t.label.add_media)),a.appendChild(s),l.appendChild(a),l.appendChild(o),i.appendChild(l),i.appendChild(c),t.editors.push({el:u,data:e}),i}},orderby_post:{render(e,t){let i=t.getStyleVal(e.id);return'meta_value_num'===i&&(t.values[e.id]='meta_value',t.values.meta_key_type='NUMERIC'),e.type='select',t.select.render(e,t)}},select:{dataset_cache:{},update(e,t,i){const l=i.getEl(e);null!==l&&(void 0!==t?l.value=t:void 0!==l[0]&&(l[0].selected=!0))},make_options:function(i,l,e){const a=L.createDocumentFragment(),s=e.getOptions(i);for(let t in s){let e=L.createElement('option');e.value=t,e.text=s[t],void 0!==i.binding&&void 0!==i.binding[t]&&void 0!==i.binding[t].responsive&&void 0!==i.binding[t].responsive.disabled&&-1!==i.binding[t].responsive.disabled.indexOf(i.id)&&(e.className='responsive_disable'),(Array.isArray(l)&&l.includes(t)||l===t||void 0===l&&t===i.default)&&(e.selected=!0),a.appendChild(e)}return a},render(t,l){const a=this,e=L.createElement('div'),s=L.createElement('select'),i=L.createDocumentFragment();let n=l.getStyleVal(t.id);e.className='selectwrapper',t.multiple&&(s.setAttribute('multiple',!0),e.className+=' multi'),!0===l.is_repeat?(s.className=!0===l.is_sort?'tb_lb_sort_child':'tb_lb_option_child',s.dataset.inputId=t.id):(s.className='tb_lb_option',s.id=t.id),s.className+=' tf_scrollbar',void 0!==t.class&&(s.className+=' '+t.class);const o=function(e){if(e.optgroup){const i=l.getOptions(e);for(let t in i)if(void 0!==i[t].label){let e=L.createElement('optgroup');e.setAttribute('label',i[t].label),e.appendChild(a.make_options(i[t],n,l)),s.appendChild(e)}else s.appendChild(a.make_options(i[t],n,l))}else s.appendChild(a.make_options(e,n,l))};return void 0!==t.dataset?void 0!==a.dataset_cache[t.dataset]?o(a.dataset_cache[t.dataset]):$.ajax({type:'POST',url:themifyBuilder.ajaxurl,dataType:'json',data:{action:'tb_get_select_dataset',dataset:t.dataset,nonce:themifyBuilder.tb_load_nonce,pid:themifyBuilder.post_ID},beforeSend(e){v.showLoader('show')},success(e){e.success&&(v.showLoader('hide'),a.dataset_cache[t.dataset]=e.data,o(e.data))},error(){v.showLoader('error')}}):o(t),e.appendChild(l.initControl(s,t)),i.appendChild(e),void 0!==t.after&&i.appendChild(l.after(t)),void 0!==t.description&&i.appendChild(l.description(t.description)),void 0!==t.tooltip&&i.appendChild(l.hint(t.tooltip)),i}},font_select:{loaded_fonts:[],fonts:{},safe:[],google:[],cf:[],updateFontVariant(e,l,t,a){if(l){const s=this[a='webfont'===(a=''===a||void 0===a?void 0!==this.google[e]?'google':'cf':a)?'fonts':a][e]&&this[a][e].v?this[a][e].v:null;if(s&&0!==s.length){let i=t.getStyleVal(l.id);for(void 0===i&&(i='google'===a?'regular':'normal'),l.dataset.selected=e;null!==l.firstChild;)l.removeChild(l.lastChild);l.closest('.tb_field').classList.remove('_tb_hide_binding');for(let t=0,e=s.length;t<e;++t){let e=L.createElement('option');e.value=e.textContent=s[t],s[t]===i&&(e.selected=!0),l.appendChild(e)}}else l.closest('.tb_field').classList.add('_tb_hide_binding')}},loadGoogleFonts(s){s=$.unique(s.split('|'));const n={google:[],cf:[]},o=[],r=this,e=function(){for(let e=o.length-1;-1<e;--e)-1===r.loaded_fonts.indexOf(o[e])&&r.loaded_fonts.push(o[e]);k.body.triggerHandler('tb_font_stylesheet_loaded',[r,o])};for(let a=s.length-1;-1<a;--a)if(s[a]&&-1===this.loaded_fonts.indexOf(s[a])&&(-1===n.google.indexOf(s[a])||-1===n.cf.indexOf(s[a]))){let e=s[a].split(':'),t=void 0!==r.cf[e[0]]?'cf':'google',i='regular'===e[1]||'normal'===e[1]||'italic'===e[1]||parseInt(e[1])?e[1]:'400,700';if('google'==t){for(let e=(i=i.split(',')).length-1;-1<e;--e)-1!==i[e].indexOf('i')||i.includes(i[e]+'i')?-1===i[e].indexOf('i')||i.includes(String(parseInt(i[e])))||i.push(parseInt(i[e])):i.push(i[e]+'i');i=i.join(',')}let l=e[0].split(' ').join('+')+':'+i;-1===this.loaded_fonts.indexOf(l)&&(l+='google'==t?':latin,latin-ext':'',n[t].push(l),o.push(l))}if(0<n.google.length){const t=window.location.protocol+'//fonts.googleapis.com/css?family='+encodeURI(n.google.join('|'))+'&display=swap';k.LoadCss(t,!1,null,null,e),'visual'===S.mode&&y.Themify.LoadCss(t,!1)}if(0<n.cf.length){const i=themifyBuilder.cf_api_url+encodeURI(n.cf.join('|'));k.LoadCss(i,!1,null,null,e),'visual'===S.mode&&y.Themify.LoadCss(i,!1)}},controlChange(a,n,o,s){const r=this,e=$(a).comboSelect({comboClass:'themify-combo-select',comboArrowClass:'themify-combo-arrow',comboDropDownClass:'themify-combo-dropdown tf_scrollbar',inputClass:'themify-combo-input',disabledClass:'themify-combo-disabled',hoverClass:'themify-combo-hover',selectedClass:'themify-combo-selected',markerClass:'themify-combo-marker'}).parent('div');e[0].addEventListener('click',function(e){const t=e.target;if(t.classList.contains('themify-combo-item')){S.hasChanged=!0;const i=t.dataset.value,l=a.closest('.tb_tab');let e=this.querySelector('option[value="'+i+'"]');'webfont'!==(e=e&&e.dataset.type)&&i&&-1===r.loaded_fonts.indexOf(i)&&r.loadGoogleFonts(i),l&&r.updateFontVariant(i,l.getElementsByClassName('font-weight-select')[0],s,e),setTimeout(function(){k.triggerEvent(a,'change')},10)}},{passive:!0}),e[0].addEventListener('mouseover',function(e){const t=e.target;if(t.classList.contains('themify-combo-item')){let i=t.dataset.value;if(i&&$(t).is(':visible')&&('default'===i&&(i='inherit'),n.style.top=t.offsetTop-t.parentNode.scrollTop+30+'px',n.style.fontFamily=i,n.style.display='block','inherit'!==i&&!t.classList.contains('tb_font_loaded'))){t.classList.add('tb_font_loaded');const l=t.ownerDocument===y.document?'top':'bottom';if(void 0===r.fonts[l]&&(r.fonts[l]=[]),-1===r.fonts[l].indexOf(i)){const a=function(e){r.fonts[l].push(e),o.classList.remove('themify_show_wait')};let t=this.querySelector('option[value="'+i+'"]');if((t=t&&t.dataset.type)&&'webfont'!==t){let e='';if('google'===t?e=window.location.protocol+'//fonts.googleapis.com/css?family='+encodeURI(i)+'&display=swap':'cf'===t&&(e=themifyBuilder.cf_api_url+encodeURI(i)),''!==e){o.classList.add('themify_show_wait');const s='top'===l?y.Themify:k;s.LoadCss(e,!1,null,null,a)}}else a(i)}t.style.fontFamily=i}}},{passive:!0}),e.trigger('comboselect:open').on('comboselect:close',function(){n.style.display='none'}),e[0].getElementsByClassName('themify-combo-arrow')[0].addEventListener('click',function(){n.style.display='none'},{passive:!0})},update(e,t,i){const l=i.getEl(e);if(null!==l)if(void 0===t&&(t=''),l.value=t,this.updateFontVariant(t,l.closest('.tb_tab').getElementsByClassName('font-weight-select')[0],i),void 0===l.dataset.init){const a=l.getElementsByTagName('optgroup'),s=L.createElement('option');for(;a[0].firstChild;)a[0].removeChild(a[0].lastChild);for(;a[1].firstChild;)a[1].removeChild(a[1].lastChild);s.value=t,s.selected=!0,void 0!==this.safe[t]?(s.textContent=this.safe[t],a[0].appendChild(s)):void 0!==this.google[t]?(s.textContent=this.google[t].n,a[1].appendChild(s)):void 0!==this.cf[t]?(s.textContent=this.cf[t].n,a[2].appendChild(s)):(s.textContent=t,a[0].appendChild(s))}else l.parentNode.getElementsByClassName('themify-combo-input')[0].value=t},render(l,a){const s=L.createElement('div'),e=L.createElement('select'),n=L.createElement('span'),o=L.createElement('span'),t=L.createDocumentFragment(),i=L.createElement('option'),r=a.getStyleVal(l.id),d=this,c={safe:a.label.safe_fonts,google:a.label.google_fonts},p=Object.keys(this.cf).length<1,u=(!1===p&&(c.cf=a.label.cf_fonts),s.className='tb_font_preview_wrapper',e.className='tb_lb_option font-family-select tf_scrollbar',e.id=l.id,n.className='tb_font_preview',o.textContent=a.label.font_preview,i.value='',i.textContent='---',t.appendChild(i),void 0!==l.class&&(e.className+=' '+l.class),['google','safe']);!1===p&&u.push('cf');for(let l=u.length-1;-1<l;--l){let i=L.createElement('optgroup');if(i.label=c[u[l]],void 0!==r){let e=L.createElement('option'),t;e.value=r,e.selected=!0,t='cf'===u[l]&&void 0!==this.cf[r]?this.cf[r].n:'safe'===u[l]&&void 0!==this.safe[r]?this.safe[r]:'google'===u[l]&&void 0!==this.google[r]?this.google[r].n:void 0!==this.cf[r]?this.cf[r].n:r,e.textContent=t,i.appendChild(e)}t.appendChild(i)}const m=function(){this.removeEventListener('focusin',m,{once:!0,passive:!0}),this.removeEventListener('tf_init',m,{once:!0,passive:!0});const i=d.safe,l=L.createDocumentFragment(),e=this.querySelector('select'),t=e.getElementsByTagName('optgroup');if(e.dataset.init=!0,void 0!==r)for(let e=t.length-1;-1<e;--e)for(;t[e].firstChild;)t[e].removeChild(t[e].lastChild);for(let t in i){let e=L.createElement('option');e.value=t,e.textContent=i[t],e.dataset.type='webfont',r===t&&(e.selected=!0),l.appendChild(e)}t[p?0:1].appendChild(l);const s=['google'];!1===p&&s.unshift('cf');for(let a=s.length-1;-1<a;--a){let i=d[s[a]],l=L.createDocumentFragment();for(let t in i){let e=L.createElement('option');e.value=t,e.dataset.type=s[a],e.textContent=i[t].n,r===t&&(e.selected=!0),l.appendChild(e)}t['cf'===s[a]?0:p?1:2].appendChild(l)}d.controlChange(e,n,o,a)};return s.addEventListener('focusin',m,{once:!0,passive:!0}),s.addEventListener('tf_init',m,{once:!0,passive:!0}),e.appendChild(t),n.appendChild(o),s.appendChild(a.initControl(e,l)),s.appendChild(n),a.afterRun.push(function(){const e=a.create([{type:'select',label:'f_w',selector:l.selector,class:'font-weight-select',id:l.id+'_w',prop:'font-weight'}]),t=s.closest('.tb_field'),i=e.querySelector('.tb_field');t.parentNode.insertBefore(e,t.nextElementSibling),d.updateFontVariant(r,i.querySelector('.font-weight-select'),a)}),s}},animation_select:{render(e,t){const i=L.createElement('div'),a=t.static.preset_animation,s=L.createElement('select'),n=t.values[e.id];i.className='selectwrapper',s.className='tb_lb_option tf_scrollbar',s.id=e.id,s.appendChild(L.createElement('option'));for(let l in a){let i=L.createElement('optgroup');for(let t in a[i.label=l]){let e=L.createElement('option');e.value=t,e.text=a[l][t],n===t&&(e.selected=!0),i.appendChild(e)}s.appendChild(i)}return i.appendChild(s),i}},select_menu:{data:null,get(i,l){const a=this,t=function(){for(let t in a.data){let e=L.createElement('option');e.value=a.data[t].slug,e.text=a.data[t].name,e.dataset.termid=a.data[t].term_id||'',l===a.data[t].slug&&(e.selected=!0),i.appendChild(e)}};null===a.data?$.ajax({type:'POST',url:themifyBuilder.ajaxurl,dataType:'json',data:{action:'tb_get_menu',tb_load_nonce:themifyBuilder.tb_load_nonce},success(e){a.data=e,t()}}):t()},render(e,t){const i=L.createDocumentFragment(),l=L.createElement('div'),a=L.createElement('select'),s=L.createElement('small'),n=t.values[e.id];return l.className='selectwrapper',a.className='select_menu_field tf_scrollbar',!0===t.is_repeat?(a.className+=!0===t.is_sort?' tb_lb_sort_child':' tb_lb_option_child',a.dataset.inputId=e.id):(a.className+=' tb_lb_option',a.id=e.id),void 0!==e.class&&(a.className+=' '+e.class),s.innerHTML=t.label.menu_help,this.get(a,n),l.appendChild(t.initControl(a,e)),i.appendChild(l),i.appendChild(L.createElement('br')),i.appendChild(s),i}},sticky:{render(e,t){const l={},a=S.activeModel.get('element_id'),i=$.extend(!0,{},e),s=e.key,n=S.Models.Registry.items;for(let e in n){let i=n[e].attributes;if(s===i.elType&&i.element_id!==a){let e,t='row'===s?i.styling:i.mod_settings;e='row'===s&&t&&(t.custom_css_id||t.row_anchor)?t.custom_css_id?'#'+t.custom_css_id:'#'+t.row_anchor:'module'===s&&t&&t.custom_css_id?'#'+t.custom_css_id:'row'===s?'Row #'+i.element_id:i.mod_name+' #'+i.element_id,l[i.element_id]=e}}return i.options=l,t.select.render(i,t)}},selectSearch:{update(i,l,a,e){const s=L.createDocumentFragment();let n=null;if(l.removeAttribute('data-value'),l.value='',void 0!==a){for(let t in a){let e=L.createElement('div');null===n&&(n=t),e.dataset.value=t,e.className='tb_search_item',e.textContent=a[t],i===t&&(e.className+=' selected',l.setAttribute('data-value',t),l.value=a[t]),s.appendChild(e)}''===l.value&&null!==n&&(l.value=a[n],l.setAttribute('data-value',n))}return s},events(a,t){a.addEventListener('keyup',function(e){const i=t.getElementsByClassName('tb_search_item'),l=this.value.trim(),a=new RegExp(l,'i');for(let e=0,t=i.length;e<t;++e)i[e].style.display=''===l||a.test(i[e].textContent)?'block':'none'},{passive:!0}),t.addEventListener('mousedown',function(e){if(1===e.which&&e.target.classList.contains('tb_search_item')){e.preventDefault(),e.stopPropagation();const t=this.getElementsByClassName('tb_search_item'),i=e.target;for(let e=t.length-1;-1<e;--e)t[e].classList.remove('selected');i.classList.add('selected');const l=i.dataset.value;a.value=i.textContent,a.dataset.value=l,a.blur(),a.previousElementSibling.blur(),k.triggerEvent(a,'selectElement',{val:l})}})},render(e,t){const i=L.createElement('div'),l=L.createElement('div'),a=L.createElement('input'),s=L.createElement('span'),n=L.createElement('div');return i.className='tb_search_wrapper',a.className='tb_search_input',a.autocomplete='off',n.className='tb_search_container tf_scrollbar',!0===t.is_repeat?(a.className+=!0===t.is_sort?' tb_lb_sort_child':' tb_lb_option_child',a.dataset.inputId=e.id):(a.className+=' tb_lb_option',a.id=e.id),void 0!==e.class&&(a.className+=' '+e.class),s.className='tf_loader',n.tabIndex=1,l.tabIndex=1,l.className='tb_search_arrow',a.type='text',a.placeholder=(void 0!==e.placeholder?e.placeholder:e.label)+'...',n.appendChild(this.update(t.values[e.id],a,e.options,t)),l.appendChild(s),i.appendChild(l),i.appendChild(t.initControl(a,e)),i.appendChild(n),void 0!==e.after&&i.appendChild(t.after(e)),void 0!==e.description&&i.appendChild(t.description(e.description)),void 0!==e.tooltip&&i.appendChild(t.hint(e.tooltip)),this.events(a,n),i}},optin_provider:{cache:null,render(e,t){const i=L.createElement('div'),l=this,a=function(){i.appendChild(t.create(l.cache))};return null===this.cache?(v.showLoader('show'),$.ajax({type:'POST',url:themifyBuilder.ajaxurl,dataType:'json',data:{action:'tb_optin_get_settings',tb_load_nonce:themifyBuilder.tb_load_nonce},success:function(e){v.showLoader('spinhide'),l.cache=e,a(),t.callbacks()},error(){v.showLoader('error')}})):a(),i}},check_map_api:{render(e,t){if(themifyBuilder[e.map+'_api'])return L.createElement('span');{const i={type:'separator',html:'<span>'+themifyBuilder[e.map+'_api_err']+'</span>',wrap_class:'tb_group_element_'+e.map};return t.separator.render(i,t)}}},query_posts:{cacheTypes:null,cacheTerms:[],render(v,y){let e,a;const C=this,E=v.description,x=v.after,w=y.values,p=function(t){const i={};for(let e in t)i[e]=t[e].name;return i},N=function(e,t,i){const l=e.nextElementSibling;for(;l.firstChild;)l.removeChild(l.lastChild);l.appendChild(y.selectSearch.update(t,e,i,y))},u=function(e,t,i,l){return e.classList.add('tb_search_wait'),a&&a.abort(),a=$.ajax({type:'POST',url:themifyBuilder.ajaxurl,dataType:'json',data:{action:'tb_get_post_types',tb_load_nonce:themifyBuilder.tb_load_nonce,type:i,v:t,s:l||'',all:v.all,just_current:v.just_current,id:themifyBuilder.post_ID},complete(){e.classList.remove('tb_search_wait')}})};{let c=$.extend(!0,{},v),f=null;(e=L.createElement('div')).id=v.id||v.term_id,y.afterRun.push(function(){let o=['id','tax_id','term_id','tag_id'],r=L.createDocumentFragment(),g=null,d=function(_,h,b){const t=b?h+'_'+b:h,i=function(e){if(void 0!==v.term_id||void 0!==v.tag_id){if(v.all){const a=_.closest('.'+v.id),s='All'===a.querySelector('#'+v.id).value,n=a.querySelectorAll('.'+v.tax_id+',.'+v.term_id+',.'+v.tag_id);for(let e=n.length-1;-1<e;--e)n[e].classList.toggle('tf_hide',s)}const i=void 0===v.tag_id?v.term_id.replace('#tmp_id#',h):v.tag_id,l=_.closest('.tb_input');let t;if(_.id=i,t=(t=null===g&&void 0!==w[i]?w[i].split('|')[0]:t)||0,N(_,t,C.cacheTerms[e]),!b&&''!==b||(_.value=b),null===g){const o=L.createElement('input'),r=L.createElement('span'),d=L.createElement('div');if(r.innerHTML=y.label.or,o.type='text',o.className='query_category_multiple',d.className='tb_query_multiple_wrap',d.appendChild(r),d.appendChild(o),l.insertBefore(d,l.nextSibling),void 0!==x&&l.appendChild(y.after(x)),void 0!==E&&l.appendChild(y.description(E)),void 0!==v.slug_id){const c=l.parentNode,p=y.create([{type:'radio',id:'term_type',label:y.label.query_by,default:void 0===w.term_type&&'post_slug'===w[v.tax_id]?'post_slug':'category',option_js:!0,options:[{value:'all',name:y.label.all_posts},{value:'category',name:y.label.query_term_id},{value:'post_slug',name:y.label.slug_label}]}]),u=y.create([{id:v.slug_id,type:'text',class:'large',wrap_class:'tb_group_element_post_slug',help:y.label.slug_desc,label:y.label.slug_label}]);c.parentNode.insertBefore(p,c),c.parentNode.appendChild(u)}if(void 0!==v.sticky_id){const m=y.create([{type:'toggle_switch',label:y.label.sticky_first,id:v.sticky_id,options:'simple',wrap_class:'tb_group_element_all'}]);l.parentNode.parentNode.appendChild(m)}o.addEventListener('change',function(e){k.triggerEvent(_,'queryPosts',{val:t})},{passive:!0}),null!==f&&clearTimeout(f),f=setTimeout(function(){y.callbacks()},2)}l.getElementsByClassName('query_category_multiple')[0].value=t,!0===g||y.is_new?k.triggerEvent(_,'queryPosts',{val:t}):ThemifyConstructor.settings=S.Utils.clear(S.Forms.serialize('tb_options_setting')),g=!0}};void 0===C.cacheTerms[t]?u(_.parentNode,h,'terms',b).done(function(e){C.cacheTerms[t]=e,i(t)}):i(t)};for(let n=0,e=o.length;n<e;++n)if(c[o[n]]){c.id=c[o[n]],c.label=v.labels&&v.labels[o[n]]?v.labels[o[n]]:y.label['query_'+o[n]],c.type='selectSearch','term_id'===o[n]?(c.wrap_class='tb_search_term_wrap tb_group_element_category',c.class='query_category_single',c.help=y.label.query_desc,c.control={control_type:'queryPosts'}):'tax_id'!==o[n]&&'tag_id'!==o[n]||void 0!==c.term_id||(c.control={control_type:'queryPosts'}),delete c.description,delete c.after;let e=y.create([c]);!0===v.just_current&&delete c.wrap_class,function(){let l='id'===o[n],a='term_id'===o[n]||'tag_id'===o[n],t=a?'':w[c.id],i=e.querySelector('.tb_search_input');if(i.addEventListener('selectElement',function(e){let t=e.detail.val,i=this.closest('.tb_field');a?(i.getElementsByClassName('query_category_multiple')[0].value=t,k.triggerEvent(this,'queryPosts',{val:t})):null!==i.nextElementSibling?(i=i.nextElementSibling,null!==(i=l||!0!==g||void 0===v.slug_id?i:i.nextElementSibling)&&(i=i.getElementsByClassName('tb_search_input')[0],l?void 0!==C.cacheTypes[t]&&(!0===v.just_current&&'tag'===w[v.tax_id]&&(w[v.tax_id]='post_tag'),N(i,w[v.tax_id],p(C.cacheTypes[t].options)),k.triggerEvent(i,'selectElement',{val:i.getAttribute('data-value')})):(d(i,t),i.addEventListener('keyup',function(e){(48<=e.keyCode&&e.keyCode<=57||65<=e.keyCode&&e.keyCode<=90||8===e.keyCode||229===e.keyCode)&&setTimeout(function(){d(i,t,this.value.trim())}.bind(this),500)},{passive:!0})))):l||k.triggerEvent(this,'queryPosts',{val:this.getAttribute('data-value')})},{passive:!0}),l){const s=function(){t=t||'post',N(i,t,p(C.cacheTypes)),k.triggerEvent(i,'selectElement',{val:t}),i=null};null===C.cacheTypes?u(i.parentNode,null,'post_types').done(function(e){C.cacheTypes=e,!0===v.just_current&&null==t&&(t=Object.keys(e)),s()}):setTimeout(s,10)}else a&&!v.id&&void 0!==v.taxonomy&&(d(i,v.taxonomy),i.addEventListener('input',function(e){(48<=e.keyCode&&e.keyCode<=57||65<=e.keyCode&&e.keyCode<=90||8===e.keyCode||229===e.keyCode)&&setTimeout(function(){d(i,v.taxonomy,this.value.trim())}.bind(this),500)},{passive:!0}))}(),r.appendChild(e)}if(c.query_filter){let e=y.create([{type:'multi',label:y.label.aq[0],id:'query_date',options:[{id:'query_date_from',label:y.label.aq[1],type:'date',timepicker:!1},{id:'query_date_to',label:y.label.aq[2],type:'date',timepicker:!1}],wrap_class:'tb_query_filter'+(y.values.query_date_from||y.values.query_date_to?'':' tf_hide')},{type:'autocomplete',dataset:'authors',id:'query_authors',label:y.label.aq[7],wrap_class:'tb_query_filter'+(y.values.query_authors?'':' tf_hide'),help:y.label.aq[9]},{type:'multi',label:y.label.aq[3],id:'query_cf',options:[{type:'autocomplete',dataset:'custom_fields',id:'query_cf_key',label:y.label.aq[4]},{id:'query_cf_value',label:y.label.aq[5],type:'text'},{id:'query_cf_c',label:y.label.aq[6],type:'select',options:{'':'LIKE','NOT LIKE':'NOT LIKE',EXISTS:'EXISTS','NOT EXISTS':'NOT EXISTS','=':'=','!=':'!=','>':'>','>=':'>=','<':'<','<=':'<='}}],wrap_class:'tb_query_filter'+(y.values.query_cf_key?'':' tf_hide')}]),l=(r.appendChild(e),y.values.query_cf_key&&y.values.query_authors&&(y.values.query_date_from||y.values.query_date_to)),s=L.createElement('ul');if('object'==typeof c.query_filter&&Object.keys(c.query_filter).forEach(function(t){let e=c.query_filter[t].render(),i=c.query_filter[t].validate(y.values);if(e.wrap_class='tb_query_filter'+(i?'':' tf_hide'),console.log(e),r.appendChild(y.create([e])),!i){l=!1;let e=L.createElement('li');e.innerText=c.query_filter[t].label,e.setAttribute('data-id',t),s.appendChild(e)}}),!l){let i=L.createElement('div'),e=L.createElement('div'),t=L.createElement('div'),l=L.createElement('div'),a=L.createElement('span');if(!y.values.query_date_from&&!y.values.query_date_to){let e=L.createElement('li');e.innerText=y.label.aq[0],e.setAttribute('data-id','query_date'),s.appendChild(e)}if(!y.values.query_authors){let e=L.createElement('li');e.innerText=y.label.aq[7],e.setAttribute('data-id','query_authors'),s.appendChild(e)}if(!y.values.query_cf_key){let e=L.createElement('li');e.innerText=y.label.aq[3],e.setAttribute('data-id','query_cf'),s.appendChild(e)}i.className='tb_field',e.className='tb_input tf_rel',l.className='tb_label tb_empty_label',t.setAttribute('tabindex','-1'),t.className='tb_ui_dropdown_label tb_sort_fields_plus',s.className='tb_ui_dropdown_items',a.innerText=y.label.aq[8],t.appendChild(a),i.appendChild(l),i.appendChild(e),e.appendChild(t),e.appendChild(s),r.appendChild(i),s.addEventListener('click',function(t){if('LI'===t.target.tagName){t.preventDefault(),t.stopPropagation(),S.Utils.hideOnClick(this);let e=t.target.getAttribute('data-id');this.closest('.tb_field[data-type="query_posts"], .tb_field[data-type="advanced_posts_query"]').querySelector('.'+e).classList.remove('tf_hide'),t.target.style.display='none',t.target.removeAttribute('data-id'),this.querySelector('[data-id]')||i.classList.add('tf_hide')}})}}e.parentNode.replaceChild(r,e),c=e=null})}return e}},hook_content:{render(e,t){return t.create([{type:'group',label:t.label.hc[0],display:'accordion',options:[{id:'hook_content',type:'builder',options:[{type:'select',id:'h',options:e.options,after:t.label.hc[1]},{type:'textarea',id:'c',wrap_class:'tb_disable_dc',class:'fullwidth'}]}]}])}},position_box:{w:null,h:null,update(e,t,i){let l=v.Lightbox.$lightbox[0].querySelector('#'+e);if(null!==(l=null===l?v.Lightbox.$lightbox[0].querySelector('[data-input-id="'+e+'"]'):l)){const a=l.closest('.tb_position_box_wrapper'),s=a.getElementsByClassName('tb_position_box_handle')[0],n=a.getElementsByClassName('tb_position_box_label')[0],o=this.getPreDefinedPositions();t?void 0!==o[t]&&(t=o[t]):t='50,50',l.value=t,n.textContent=this.getLabel(t),t=t.split(','),s.style.left=Math.ceil(t[0]*this.w/100)+'px',s.style.top=Math.ceil(t[1]*this.h/100)+'px'}},getLabel(e){let t;switch(e){case'0,0':t='Top Left';break;case'50,0':t='Top Center';break;case'100,0':t='Top Right';break;case'0,50':t='Center Left';break;case'50,50':t='Center Center';break;case'100,50':t='Center Right';break;case'0,100':t='Bottom Left';break;case'50,100':t='Bottom Center';break;case'100,100':t='Bottom Right';break;default:const i=e.split(',');t=''===i[0]?'Center Center':'X:'+i[0]+'% Y:'+i[1]+'%';break}return t},getPreDefinedPositions(){return{'right-top':'100,0','right-center':'100,50','right-bottom':'100,100','left-top':'0,0','left-center':'0,50','left-bottom':'0,100','center-top':'50,0','center-center':'50,50','center-bottom':'50,100'}},click(e){e.preventDefault(),e.stopPropagation();let t,i,l=e.currentTarget.previousElementSibling;if(e.target.classList.contains('tb_position_item')){const a=e.target.getAttribute('data-pos').split(',');t=a[0],i=a[1],'50'===t?t=this.w/2:'100'===t&&(t=this.w),'50'===i?i=this.h/2:'100'===i&&(i=this.h)}else t=e.offsetX,i=e.offsetY;l.style.left=t+'px',l.style.top=i+'px',this.changeUpdate(l,t,i)},changeUpdate(e,t,i){const l=+(t/this.w*100).toFixed(2),a=+(i/this.h*100).toFixed(2),s=e.closest('.tb_position_box_wrapper').getElementsByClassName('tb_position_box_label')[0],n=s.nextElementSibling;n.value=l+','+a,s.textContent=this.getLabel(l+','+a),k.triggerEvent(n,'change')},render:function(t,i){const p=this,s=this.getPreDefinedPositions(),u=S.Utils.getMouseEvents(),l=i.getStyleVal(t.id),e=L.createElement('div'),a=L.createElement('div'),n=L.createElement('div'),o=L.createElement('div'),r=L.createElement('div'),d=i.hidden.render(t,i);e.className='tb_position_box_wrapper',a.className='tb_position_box_container',n.className='tb_position_box',o.className='tb_position_box_handle',r.className='tb_position_box_label';for(let a in s){let e=L.createElement('div'),t=L.createElement('span'),i=L.createElement('span'),l=s[a].split(',');t.className='themify_tooltip',i.textContent=a.replace('-',' '),e.className='tb_position_item',e.setAttribute('data-pos',s[a]),e.style.left=l[0]+'%',e.style.top=l[1]+'%',t.appendChild(i),e.appendChild(t),n.appendChild(e)}return o.addEventListener(u.mousedown,function(e){if('touchstart'===e.type||1===e.which){e.stopImmediatePropagation();let t,i;const l=this.ownerDocument,a=this,s=this.offsetLeft-(e.touches?e.touches[0]:e).clientX,n=this.offsetTop-(e.touches?e.touches[0]:e).clientY,o=p.w,r=p.h,d=function(e){i=!0,l.body.classList.add('tb_start_animate','tb_move_drag')},c=function(i){i.stopImmediatePropagation(),t&&cancelAnimationFrame(t),t=requestAnimationFrame(function(){let e=s+(i.touches?i.touches[0]:i).clientX,t=n+(i.touches?i.touches[0]:i).clientY;e>o?e=o:e<0&&(e=0),t>r?t=r:t<0&&(t=0),a.style.left=e+'px',a.style.top=t+'px',p.changeUpdate(a,e,t)})};l.addEventListener(u.mouseup,function(e){this.removeEventListener(u.mousemove,d,{passive:!0,once:!0}),this.removeEventListener(u.mousemove,c,{passive:!0}),i&&(e.stopImmediatePropagation(),t&&cancelAnimationFrame(t),t=i=null,this.body.classList.remove('tb_start_animate','tb_move_drag'))},{passive:!0,once:!0}),l.addEventListener(u.mousemove,d,{passive:!0,once:!0}),l.addEventListener(u.mousemove,c,{passive:!0})}},{passive:!0}),n.addEventListener('click',this.click.bind(this)),a.appendChild(o),a.appendChild(n),e.appendChild(a),void 0!==t.after&&e.appendChild(i.after(t)),e.appendChild(r),e.appendChild(d),i.afterRun.push(function(){setTimeout(function(){const e=window.getComputedStyle(n);p.w=parseInt(e.getPropertyValue('width')),p.h=parseInt(e.getPropertyValue('height')),p.update(t.id,l,i)},700)}),e}},slider_range:{render:function(e,t){const i=L.createElement('div'),r=L.createElement('div'),d=t.hidden.render(e,t);let l=0,a=100,s='%',c=!0,p=1;return void 0!==e.options&&(void 0!==e.options.min&&(l=e.options.min),void 0!==e.options.max&&(a=e.options.max),void 0!==e.options.unit&&(s=e.options.unit),void 0!==e.options.range&&(c=!1),void 0!==e.options.default&&(p=e.options.default)),d.setAttribute('data-min',l),d.setAttribute('data-max',a),d.setAttribute('data-unit',s),i.className='tb_slider_wrapper input-range',r.className='range-slider',void 0!==e.wrap_class&&(i.className=' '+e.wrap_class),i.appendChild(r),i.appendChild(d),t.afterRun.push(function(){y.Themify.LoadAsync(themifyBuilder.includes_url+'js/jquery/ui/slider.min.js',function(){{var e=r;const a=L.createElement('span'),s=L.createElement('span'),t=parseFloat(d.getAttribute('data-min')),i=parseFloat(d.getAttribute('data-max')),n=d.getAttribute('data-unit');let l=d.value;l=c?l?l.split(','):[t,i]:l||p,a.className='tb_slider_label_l',s.className='tb_slider_label_u';const o={range:c,min:t,max:i,slide:function(e,t){c?(a.textContent=t.values[0]+n,s.textContent=t.values[1]+n):a.textContent=t.value+n},create(e,t){const i=this.getElementsByClassName('ui-slider-handle');c?(a.textContent=l[0]+n,i[0].appendChild(a),s.textContent=l[1]+n,i[1].appendChild(s)):(a.textContent=l+n,i[0].appendChild(a)),l=null},change:function(e,t){c?d.value=t.values[0]+','+t.values[1]:d.value=t.value}};c?o.values=l:o.value=l,y.jQuery.fn.slider.call($(e),o)}},themify_vars.version,null,function(){return void 0!==y.jQuery.fn.slider})}),i}},range:{update(e,t,i){const l=i.getEl(e);if(null!==l){l.value=void 0!==t?t:'';const a=e+'_unit',s=y.document.getElementById(a);if(null!==s&&'SELECT'===s.tagName){let e=i.getStyleVal(a);void 0===e&&(e=s[0].value),s.value=e,this.setData(l,-1!==s.selectedIndex?s[s.selectedIndex]:s[0])}}},setData(e,t){const i=t.getAttribute('data-min'),l=t.getAttribute('data-max'),a=t.getAttribute('data-increment');let s=parseFloat(e.value.trim());(s>parseFloat(l)||s<parseFloat(i))&&(s=s>parseFloat(l)?l:i,e.value=a%1!=0?parseFloat(s).toFixed(1):parseInt(s)),e.setAttribute('min',i),e.setAttribute('max',l),e.setAttribute('step',a)},controlChange(t,i,m){const e=void 0!==i&&'SELECT'===i.tagName,l=this,_=S.Utils.getMouseEvents();t.addEventListener(_.mousedown,function(e){if('touchstart'===e.type||1===e.which){this.classList.contains('tb_angle_input')&&!this.parentNode.getElementsByClassName('tb_angle_circle')[0]||e.stopImmediatePropagation();let i=(e.touches?e.touches[0]:e).clientY,l;const t=this.ownerDocument,s=this,a=this.value,n=parseFloat(this.getAttribute('max')),o=parseFloat(this.getAttribute('min')),r=this.getAttribute('step')||1,d=r%1!=0,c=(d?parseFloat:parseInt)(r),p=function(e){const t=s.value||0,i=(d?parseFloat:parseInt)(t);let l=0;l='increase'===e?i>=n?n:i+c:i<=o?o:i-c,s.value=+l.toFixed(2);const a=s.parentNode.getElementsByClassName('tb_angle_dot')[0];a&&(a.style.transform='rotate('+l+'deg)')},u=function(t){t.stopImmediatePropagation(),l&&cancelAnimationFrame(l),l=requestAnimationFrame(function(){const e=(t.touches?t.touches[0]:t).clientY;e<i?p('increase'):e>i&&p('decrease'),i=e,k.triggerEvent(s,m)})};t.addEventListener(_.mouseup,function(e){e.stopImmediatePropagation(),this.removeEventListener(_.mousemove,u,{passive:!0}),l&&cancelAnimationFrame(l),l=i=null,s.value!==a&&k.triggerEvent(s,m),S.hasChanged=!0,this.body.style.cursor='',this.body.classList.remove('tb_start_animate','tb_move_drag')},{once:!0,passive:!0}),t.body.style.cursor=$(this).css('cursor'),t.body.classList.add('tb_start_animate','tb_move_drag'),t.addEventListener(_.mousemove,u,{passive:!0}),this.classList.contains('tb_angle_input')&&p()}},{passive:!0}),1==e&&i.addEventListener('change',function(e){l.setData(t,i.options[i.selectedIndex]),k.triggerEvent(t,m)},{passive:!0}),void 0!==i&&l.setData(t,e?-1!==i.selectedIndex?i[i.selectedIndex]:i[0]:i)},render(i,t){const e=L.createElement('div'),l=L.createElement('span'),a=L.createElement('input'),s=parseFloat(t.getStyleVal(i.id));e.className='tb_tooltip_container',void 0!==i.wrap_class&&(e.className=' '+i.wrap_class),l.className='tb_range_input',a.autocomplete='off',a.type='number',a.className='tb_range',void 0!==s&&(a.value=s),!0===t.is_repeat?(a.className+=!0===t.is_sort?' tb_lb_sort_child':' tb_lb_option_child',a.dataset.inputId=i.id):(a.className+=' tb_lb_option',a.id=i.id),void 0!==i.class&&(a.className+=' '+i.class),l.appendChild(a),void 0!==i.tooltip&&l.appendChild(t.hint(i.tooltip)),e.appendChild(l);let n;if(!0===i.deg||void 0===i.units)a.min=0,a.max=!0===i.deg?360:1500,a.step=1;else{const d=L.createElement('div'),c=Object.keys(i.units);if(d.className='selectwrapper noborder',1<c.length){const p=t.getStyleVal(i.id+'_unit'),u=i.id+'_unit';(n=L.createElement('select')).className='tb_unit',!0===t.is_repeat?(n.className+=!0===t.is_sort?' tb_lb_sort_child':' tb_lb_option_child',n.dataset.inputId=u):(n.className+=' tb_lb_option',n.id=u),void 0!==i.select_class&&(n.className+=' '+i.select_class);for(let t in i.units){let e=L.createElement('option');i.units[t]||(i.units[t]={}),i.units[t].min||(i.units[t].min=0),i.units[t].max||(i.units[t].max=100),a.setAttribute('min',parseInt(i.units[t].min)),a.setAttribute('max',parseInt(i.units[t].max)),e.value=t,e.textContent=t,e.dataset.min=i.units[t].min,e.dataset.max=i.units[t].max,e.dataset.increment=void 0!==i.units[t].increment?i.units[t].increment:'em'===t||'em'===t?.1:1,p===t&&(e.selected=!0),n.appendChild(e)}t.initControl(n,{type:'select',id:u,control:i.control})}else{const m=c[0];i.units[m]||(i.units[m]={}),i.units[m].min||(i.units[m].min=0),i.units[m].max||(i.units[m].max=100),a.setAttribute('min',parseFloat(i.units[m].min)),a.setAttribute('max',parseFloat(i.units[m].max)),a.setAttribute('step',void 0!==i.units[m].increment?parseFloat(i.units[m].increment):'1'),s<parseFloat(i.units[m].min)?a.value=i.units[m].min:s>parseFloat(i.units[m].max)&&(a.value=i.units[m].max),(n=L.createElement('span')).className='tb_unit',n.id=i.id+'_unit',n.dataset.min=i.units[m].min,n.dataset.max=i.units[m].max,n.dataset.increment=void 0!==i.units[m].increment?i.units[m].increment:'em'===m?.1:1,n.textContent=m}d.appendChild(n),e.appendChild(d)}void 0!==i.after&&e.appendChild(t.after(i)),void 0!==i.description&&e.appendChild(t.description(i.description));const o='styling'===t.clicked?'keyup':'change',r=(!0===i.opposite&&n.addEventListener('change',function(e){e.stopPropagation(),t.margin.changeUnit(this)},{passive:!0}),this.controlChange(a,n,o),$.extend({},i));return!0===i.opposite&&a.addEventListener(o,function(e){e.stopPropagation(),t.margin.changeOppositive(this)},{passive:!0}),r.type='range',t.initControl(a,r),e}},icon:{render(e,t){const i=L.createElement('div'),l=L.createElement('input'),a=L.createElement('span'),s=L.createElement('span'),n=t.getStyleVal(e.id);return l.type='text',l.className='themify_field_icon',a.className='tf_plus_icon themify_fa_toggle',i.className='tb_icon_wrap',s.className='tb_clear_input tf_close',!0===t.is_repeat?(l.className+=!0===t.is_sort?' tb_lb_sort_child':' tb_lb_option_child',l.dataset.inputId=e.id):(l.className+=' tb_lb_option',l.id=e.id),void 0!==e.class&&(l.className+=' '+e.class),void 0!==n?(l.value=n,a.appendChild(S.Utils.getIcon(n)),t.afterRun.push(function(){setTimeout(function(){y.Themify.fontAwesome(n)},100)})):a.className+=' default_icon',i.appendChild(t.initControl(l,e)),i.appendChild(a),i.appendChild(s),i}},createMarginPadding(e,s){const n=void 0!==s.options?s.options:[{id:'top',label:this.label.top},{id:'bottom',label:this.label.bottom},{id:'left',label:this.label.left},{id:'right',label:this.label.right}],t=L.createElement('ul'),o=this,r=s.id,d='border_radius'===e,c=$.extend(!0,{},s);c.units=void 0!==s.units?s.units:{px:{min:'margin'===e?-1500:0,max:1500},em:{min:'margin'===e?-10:0,max:10},'%':{min:'margin'===e?-100:0}},c.prop=null,c.opposite=!0,t.className='tb_seperate_items tf_inline_b tb_has_opposite',1==d&&t.setAttribute('data-toptext',n[0].label);let i=n.length,p=L.createDocumentFragment(),u=!1;for(let a=0;a<i;++a){let e=L.createElement('li'),t=r+'_'+n[a].id,i=(c.id=t,c.tooltip=n[a].label,c.class=void 0===s.class?'':s.class,c.class+=' tb_multi_field tb_range_'+n[a].id,1==d&&(c.class+=' tb_is_border_radius'),this.range.render(c,this));if(0!==a&&3!==a){let e=L.createElement('li'),t='right'===n[a].id?'top':n[a].id,i=(e.className='tb_seperate_opposite tb_opposite_'+('bottom'===t?'top':t),e.appendChild(this.checkboxGenerate('checkbox',{id:r+'_opp_'+t,class:'style_apply_oppositive',options:[{name:'1',value:''}],new_line:!1})),e.querySelector('.style_apply_oppositive')),l=L.createElement('div');l.className='tb_oppositive_state',i.parentNode.insertBefore(l,i.nextSibling),i.addEventListener('change',function(e){e.stopPropagation(),o.margin.bindingOppositive(this,!0)},{passive:!0}),!0===i.checked&&o.afterRun.push(function(){o.margin.bindingOppositive(this)}.bind(i)),p.appendChild(e)}e.appendChild(i),p.appendChild(e);let l;1==d?(l='border-','top'===n[a].id?l+='top-left-radius':'right'===n[a].id?l+='top-right-radius':'left'===n[a].id?l+='bottom-left-radius':'bottom'===n[a].id&&(l+='bottom-right-radius')):'transform'===s.type?l=s.prop:(l=s.prop+'-'+n[a].id,!0===this.is_new&&!u&&this.values[t]&&(u=!0)),this.styles[t]={prop:l,selector:s.selector}}if(t.appendChild(p),(p=L.createDocumentFragment()).appendChild(t),4===i){p.appendChild(o.checkboxGenerate('icon_checkbox',{id:'checkbox_'+r+'_apply_all',class:'style_apply_all',options:[{name:'1',value:o.label.all,icon:'<span class="apply_all_checkbox_icon">'+S.Utils.getIcon('ti-link').outerHTML+'</span>'}],default:('module'===this.component&&!0===this.is_new&&!u||0===Object.keys(this.values).length)&&'1',new_line:!1}));const l=p.querySelector('.style_apply_all');l.addEventListener('change',function(e){o.margin.apply_all(this,!0)},{passive:!0}),!0===l.checked&&o.afterRun.push(function(){o.margin.apply_all(l)})}return p},margin_opposity:{update(e,t,i){i.range.update(e,t,i),i.checkbox.update(e+'_opp_top',i.getStyleVal(e+'_opp_top'),i),i.range.update(i.stylesData[e].bottomId,i.getStyleVal(i.stylesData[e].bottomId),i)},render(i,l){const a=['topId','bottomId'],s=L.createElement('ul'),n=$.extend(!0,{},i);s.className='tb_seperate_items tf_inline_b tb_has_opposite';for(let t=0;t<2;++t){let e=L.createElement('li');if(n.id=i[a[t]],n.prop='topId'===a[t]?'margin-top':'margin-bottom',n.class='tb_multi_field tb_range_'+('topId'===a[t]?'top':'bottom'),n.opposite=!0,n.tooltip='topId'===a[t]?l.label.top:l.label.bottom,e.appendChild(l.range.render(n,l)),s.appendChild(e),0===t){let e=L.createElement('li'),t=(e.className='tb_seperate_opposite tb_opposite_top',e.appendChild(l.checkboxGenerate('checkbox',{id:n.id+'_opp_top',class:'style_apply_oppositive',options:[{name:'1',value:''}],new_line:!1})),e.querySelector('.style_apply_oppositive')),i=L.createElement('div');i.className='tb_oppositive_state',t.parentNode.insertBefore(i,t.nextSibling),t.addEventListener('change',function(e){e.stopPropagation(),l.margin.bindingOppositive(this,!0)},{passive:!0}),s.appendChild(e)}l.stylesData[i[a[t]]]=l.styles[i[a[t]]]={id:i[a[t]],type:i.type,prop:'topId'===a[t]?'margin-top':'margin-bottom',selector:i.selector}}return s}},margin:{bindingOppositive(e,t){const i=e.closest('.tb_seperate_opposite'),l=i.parentNode,a=i.classList.contains('tb_opposite_left'),s=!0===a?i.nextElementSibling:i.previousElementSibling,n=!0===e.checked,o=this.getOppositiveDir(s.getElementsByClassName('tb_range')[0]),r=l.getElementsByClassName('tb_range_'+o)[0],d=r.closest('li').getElementsByClassName('tb_unit')[0];if(1==n){if(r.setAttribute('data-v',r.value),d.setAttribute('data-u',d.value),!0===t){const c=s.getElementsByClassName('tb_range')[0],p=c.value,u=r.value;''!==p||''===u?(r.value=p,d.value=s.getElementsByClassName('tb_unit')[0].value):(c.value=u,s.getElementsByClassName('tb_unit')[0].value=d.value)}}else{const m=r.getAttribute('data-v');r.value=null==m?'':m,d.value=d.getAttribute('data-u')}!0===t&&k.triggerEvent(r,'keyup')},changeUnit(e){const t=e.closest('.tb_has_opposite');if(!t.hasAttribute('data-checked')){const i=y.document.getElementById(e.getAttribute('id').replace(/_unit$/gi,'')),l=this.getOppositiveDir(i),a=i.classList.contains('tb_is_border_radius'),s='top'===l||!0===a&&'right'===l||!1===a&&'bottom'===l?'top':'left';!0===t.getElementsByClassName('tb_opposite_'+s)[0].getElementsByClassName('style_apply_oppositive')[0].checked&&(t.getElementsByClassName('tb_range_'+l)[0].closest('li').getElementsByClassName('tb_unit')[0].value=e.value)}},getOppositiveDir(e){const t=e.classList;let i=t.contains('tb_range_top')?'bottom':t.contains('tb_range_bottom')?'top':t.contains('tb_range_left')?'right':'left';return i=t.contains('tb_is_border_radius')?'bottom'===i?'right':'top'===i?'left':'left'===i?'top':'bottom':i},changeOppositive(e){const t=e.closest('li'),i=t.parentNode;if(!i.hasAttribute('data-checked')){const l=this.getOppositiveDir(e),a=e.classList.contains('tb_is_border_radius'),s=('top'===l||!0===a&&'right'===l||!1===a&&'bottom'===l?i.getElementsByClassName('tb_opposite_top'):i.getElementsByClassName('tb_opposite_left'))[0];!0===s.getElementsByClassName('style_apply_oppositive')[0].checked&&(i.getElementsByClassName('tb_range_'+l)[0].value=e.value)}},apply_all(e,t){const i=e.closest('.tb_input').getElementsByClassName('tb_seperate_items')[0],l=i.getElementsByTagName('li')[0],a=!0===e.checked;let s;s=1==a?(i.setAttribute('data-checked',1),ThemifyConstructor.label.all):(i.removeAttribute('data-checked'),(s=i.getAttribute('data-toptext'))||ThemifyConstructor.label.top),!0===t&&k.triggerEvent(l.getElementsByClassName('tb_multi_field')[0],'keyup'),l.getElementsByClassName('tb_tooltip_up')[0].textContent=s},update(l,e,a){const s=['top','right','bottom','left'],t='checkbox_'+l+'_apply_all',n=a.getEl(t).getElementsByClassName('style_apply_all')[0];for(let i=3;-1<i;--i){let e=l+'_'+s[i],t=y.document.getElementById(e);if(null!==t&&(a.range.update(e,a.getStyleVal(e),a),!0!==n.checked)){let e=l+'_opp_'+s[i],t=y.document.getElementById(e);null!==t&&(t.getElementsByClassName('style_apply_oppositive')[0].checked=!!a.getStyleVal(e))}}a.checkbox.update(t,a.getStyleVal(t),a),this.apply_all(n)},render(e,t){return t.createMarginPadding(e.type,e)}},padding:{render(e,t){return t.createMarginPadding(e.type,e)}},box_shadow:{update(l,e,a){const s=['hOffset','vOffset','blur','spread'],t=l+'_color',i=l+'_inset';for(let i=3;-1<i;--i){let e=l+'_'+s[i],t=y.document.getElementById(e);null!==t&&a.range.update(e,a.getStyleVal(e),a)}a.color.update(t,a.getStyleVal(t),a),a.checkbox.update(i,a.getStyleVal(i),a)},render(a,s){const n={hOffset:{label:s.label.h_o,units:{px:{min:-200,max:200},em:{max:10}}},vOffset:{label:s.label.v_o,units:{px:{min:-200,max:200},em:{max:10}}},blur:{label:s.label.bl,units:{px:{max:300},em:{max:10}}},spread:{label:s.label.spr,units:{px:{min:-200,max:200},em:{max:10}}}},o=L.createElement('ul'),r=a.id,d=$.extend(!0,{},a);d.class='tb_shadow_field',d.prop=null,o.className='tb_seperate_items tf_inline_b tb_shadow_inputs';for(let l in n)if(void 0!==n[l]){let e=n[l],t=L.createElement('li'),i=r+'_'+l;d.id=i,d.tooltip=e.label,d.units=e.units,d.selector=a.selector,t.appendChild(s.range.render(d,s)),o.appendChild(t),s.styles[i]={prop:a.prop,selector:a.selector}}let e=r+'_color';const t=L.createElement('li'),i={id:e,type:'color',class:d.class,selector:a.selector},l=(t.className='tb_shadow_color',s.styles[e]={prop:a.prop,selector:a.selector,type:'color'},t.appendChild(s.color.render(i,s)),o.appendChild(t),e=r+'_inset',L.createElement('li')),c={id:e,origID:r,type:'checkbox',class:d.class,isBoxShadow:!0,prop:a.prop,options:[{value:s.label.in_sh,name:'inset'}]},p=s.checkboxGenerate('checkbox',c);return s.styles[e]={prop:a.prop,selector:a.selector},l.className='tb_box_shadow_inset',l.appendChild(p),o.appendChild(l),o}},text_shadow:{update(l,e,a){const s=[a.label.h_sh,a.label.v_sh,a.label.bl],t=l+'_color';for(let i=2;-1<i;--i){let e=l+'_'+s[i],t=a.getEl(e);null!==t&&a.range.update(e,a.getStyleVal(e),a)}a.color.update(t,a.getStyleVal(t),a)},render(a,s){const n={hShadow:{label:s.label.h_sh,units:{px:{min:-200,max:200},em:{max:10}}},vShadow:{label:s.label.v_sh,units:{px:{min:-200,max:200},em:{max:10}}},blur:{label:s.label.bl,units:{px:{max:300},em:{max:10}}}},o=L.createElement('ul'),r=a.id,d=$.extend(!0,{},a);d.class='tb_shadow_field',d.prop=null,o.className='tb_seperate_items tf_inline_b tb_shadow_inputs';for(let l in n)if(n.hasOwnProperty(l)){let e=n[l],t=L.createElement('li'),i=r+'_'+l;d.id=i,d.tooltip=e.label,d.units=e.units,t.appendChild(s.range.render(d,s)),o.appendChild(t),s.styles[i]={prop:a.prop,selector:a.selector}}const e=L.createElement('li'),t=r+'_color',i={id:t,type:'color',class:d.class,selector:a.selector};return e.className='tb_shadow_color',s.styles[t]={prop:a.prop,selector:a.selector,type:'color'},e.appendChild(s.color.render(i,s)),o.appendChild(e),o}},border_radius:{render(e,t){return e.options=t.getOptions(e),t.createMarginPadding(e.type,e)}},outline:{render(e,t){return t.styles[e.id+'-c']=e.selector,t.styles[e.id+'-w']=e.selector,t.styles[e.id+'-s']=e.selector,t.create([{type:'multi',options:[{type:'color',id:e.id+'-c',class:'outline_color'},{type:'range',id:e.id+'-w',units:{px:{max:300}},class:'outline_width'},{type:'select',id:e.id+'-s',options:t.static.border,class:'outline_style'}]}])}},border:{changeControl(e){const t=e.parentNode,i=e.value,l=t.parentNode.children;for(let e=l.length-1;-1<e;--e)l[e]!==t&&l[e].classList.toggle('_tb_hide_binding','none'===i)},apply_all(i,e){const l=e.getElementsByTagName('input'),t=function(t,e){for(let e=l.length-1;-1<e;--e)l[e].parentNode.classList.toggle('_tb_disable',t&&'all'!==l[e].value);!0===t?i.dataset.checked=1:i.removeAttribute('data-checked'),!0===e&&k.triggerEvent(i.children[0].getElementsByTagName('select')[0],'change')};for(let e=l.length-1;-1<e;--e)l[e].addEventListener('change',function(){t('all'===this.value,!0)},{passive:!0}),!0===l[e].checked&&'all'===l[e].value&&t(!0,null)},update(s,e,n){const o=['top','right','bottom','left'],t=s+'-type';for(let a=0;a<4;++a){let e=s+'_'+o[a],t=e+'_color',i=e+'_style',l=e+'_width';n.color.update(t,n.getStyleVal(t),n),n.select.update(i,n.getStyleVal(i),n),this.changeControl(n.getEl(i)),n.range.update(l,n.getStyleVal(l),n)}n.radio.update(t,n.getStyleVal(t),n)},render(s,n){const o=['top','right','bottom','left'],r=L.createElement('ul'),d=s.id,c=$.extend(!0,{},s),p=this,u=$.extend(!0,{},s);u.options=[{value:'all',name:n.label.all,class:'style_apply_all',icon:'<i class="tic-border-all"></i>',label_class:'tb_radio_label_borders'}],u.option_js=!0,u.id=d+'-type',u.no_toggle=!0,u.default='top',u.prop=null,c.options=n.static.border,c.prop=null,r.className='tb_seperate_items tb_borders tb_group_element_border';for(let a=0;a<4;++a){let e=L.createElement('li'),t=d+'_'+o[a],i=(u.options.push({value:o[a],name:n.label[o[a]],icon:'<i class="tic-border-'+o[a]+'"></i>',label_class:'tb_radio_label_borders'}),e.className='tb_group_element_'+o[a],'top'===o[a]&&(e.className+=' tb_group_element_all'),n.styles[t+'_color']={prop:'border-'+o[a],selector:s.selector},c.id=t+'_color',c.type='color',c.class='border_color',e.appendChild(n.color.render(c,n)),n.styles[t+'_width']={prop:'border-'+o[a],selector:s.selector},c.id=t+'_width',c.type='range',c.class='border_width',c.wrap_class='range_wrapper',c.units={px:{max:300}},e.appendChild(n.range.render(c,n)),n.styles[t+'_style']={prop:'border-'+o[a],selector:s.selector},c.id=t+'_style',c.type='select',c.class='border_style tb_multi_field',n.select.render(c,n)),l=i.querySelector('select');e.appendChild(i),r.appendChild(e),l.addEventListener('change',function(e){p.changeControl(this)},{passive:!0}),'none'===l.value&&p.changeControl(l)}const e=L.createDocumentFragment();return e.appendChild(n.radioGenerate('icon_radio',u,n)),p.apply_all(r,e.querySelector('#'+u.id)),e.appendChild(r),e}},slider:{render(e,t){const i=e.label;return delete e.label,['crossfade','cover-fade','uncover-fade'].includes(t.values.effect_slider)&&(t.values.effect_slider='fade'),t.create([{type:'group',label:i,display:'accordion',options:t.getOptions(e),wrap_class:e.wrap_class}])}},custom_css:{render(e,t){e.class='large',e.control=!1,e.help=t.label.custom_css_help;const i=t.text.render(e,t);return S.Utils.changeOptions(i.querySelector('#'+e.id),e.type),i}},custom_css_id:{render(e,t){let i=[];e.custom_css&&i.push({id:e.custom_css,type:'custom_css'}),i.push({id:'custom_css_id',type:'text',label:t.label.id_name,help:t.label.id_help,control:!1,class:'large'});const l=t.create([{type:'group',label:t.label.cc,display:'accordion',options:i,wrap_class:'tb_field_group_css'}],t);return S.Utils.changeOptions(l.querySelector('#custom_css_id'),e.type),l}},hidden:{render(e,t){const i=L.createElement('input'),l=t.getStyleVal(e.id);return i.type='hidden',!0===t.is_repeat?(i.className=!0===t.is_sort?'tb_lb_sort_child':'tb_lb_option_child',i.dataset.inputId=e.id):(i.className='tb_lb_option',i.id=e.id),void 0!==e.class&&(i.className+=' '+e.class),void 0!==l?i.value=l:void 0!==e.value&&(i.value=e.value),t.initControl(i,e)}},frame:{render(e,t){return e.options=t.static.frame,e.class='tb_frame tf_scrollbar',e.binding={not_empty:{show:['tb_frame_multi_wrap','tb_frame_color']},empty:{hide:['tb_frame_multi_wrap','tb_frame_color']}},t.layout.render(e,t)}},title:{render(e,t){return e.class='large',e.control={event:'keyup',control_type:'change',selector:'.module-title'},t.text.render(e,t)}},url:{render(e,t){return e.input_type='url',t.text.render(e,t)}},advacned_link:{render(e,t){return t.create([{id:'link',type:'radio',label:'l',wrap_class:' tb_compact_radios',link_to:!0,binding:{permalink:{show:'open_link',hide:'custom_link'},custom:{show:'custom_link',hide:'open_link'},none:{hide:['custom_link','open_link','no_follow']}}},{id:'custom_link',type:'url',label:'cl'},{id:'open_link',type:'radio',label:'o_l',link_type:!0,control:!1,wrap_class:' tb_compact_radios',binding:{lightbox:{show:'tb_t_m_lightbox'},regular:{hide:'tb_t_m_lightbox'},newtab:{hide:'tb_t_m_lightbox'}}},{type:'multi',wrap_class:'tb_t_m_lightbox',label:'lg',options:[{id:'lightbox_w',type:'range',label:'w',control:!1,units:{px:{max:1e3},'%':''}},{id:'lightbox_h',type:'range',label:'ht',control:!1,units:{px:{max:1e3},'%':''}}]}])}},button:{render(e,t){const i=L.createElement('button');return i.className='builder_button',i.id=e.id,void 0!==e.class&&(i.className+=' '+e.class),i.textContent=e.name,t.initControl(i,e)}},row_anchor:{render(e,t){e.control=!1;const i=t.text.render(e,t);return S.Utils.changeOptions(i.querySelector('#'+e.id),e.type),i}},widget_form:{render(e,t){const i=L.createElement('div');return i.id=e.id,i.className='module-widget-form-container wp-core-ui tb_lb_option',i}},widget_select:{data:null,el:null,cache:[],mediaInit:null,textInit:null,render(n,o){const e=L.createDocumentFragment(),t=L.createElement('div'),i=L.createElement('i'),l=L.createElement('input'),r=L.createElement('div'),d=L.createElement('div'),c=(t.id='available-widgets-filter',t.className='selectwrapper',i.className='tb_loading_widgets tf_loader',l.type='text',l.id='widgets-search',l.dataset.validation='not_empty',l.dataset.errorMsg=o.label.widget_validate,l.autocomplete='off',l.placeholder=o.label.search_widget,r.id='available-widgets',r.className='tf_scrollbar',r.tabIndex=1,d.id=n.id,d.className='tb_lb_option tb_widget_select',this.el=d,t.appendChild(i),t.appendChild(l),r.appendChild(d),e.appendChild(t),e.appendChild(r),this),p=o.values[n.id],a=function(){const a=[],s=function(e,t){for(let e=a.length-1;-1<e;--e)a[e].classList.remove('selected');e.classList.add('selected');const i=e.dataset.value;l.value=e.getElementsByClassName('widget-title')[0].textContent,r.style.display='none',c.select(i,c.data[i].b,t,n)};for(let l in c.data){let t=L.createElement('div'),e=L.createElement('div'),i=L.createElement('h3');if(t.className='widget-tpl '+c.data[l].b,t.dataset.value=l,e.className='widget-title',i.textContent=c.data[l].n,e.appendChild(i),t.appendChild(e),t.addEventListener('click',function(e){e.preventDefault(),e.stopPropagation(),o.settings[n.id]=this.dataset.value,s(this,null)}),a.push(t),void 0!==c.data[l].d){let e=L.createElement('div');e.className='widget-description',e.innerHTML=c.data[l].d,t.appendChild(e)}d.appendChild(t),p===l&&s(t,o.values.instance_widget)}c.search(l,r),i.parentNode.removeChild(i),S.hasChanged=!0};if(null===c.data){$.ajax({type:'POST',url:themifyBuilder.ajaxurl,dataType:'json',data:{action:'tb_get_widget_items',nonce:themifyBuilder.tb_load_nonce},success(e){c.data=e,a()}});for(let e in themifyBuilder.widget_css)y.Themify.LoadCss(themifyBuilder.widget_css[e],themify_vars.version);themifyBuilder.widget_css=null}else setTimeout(a,5);return e},search(e,t){const s=this;e.addEventListener('focus',this.show.bind(this),{passive:!0}),e.addEventListener('blur',function(e){e.relatedTarget&&'available-widgets'===e.relatedTarget.id||(t.style.display='none')},{passive:!0}),e.addEventListener('keyup',function(e){s.show();const i=this.value.trim(),l=new RegExp(i,'i'),a=s.el.getElementsByClassName('widget-tpl');for(let t=0,e=a.length;t<e;++t)if(''===i)a[t].style.display='block';else{let e=a[t].getElementsByTagName('h3')[0];e=e.textContent||e.innerText,l.test(e)?a[t].style.display='block':a[t].style.display='none'}},{passive:!0})},show(){this.el.closest('#available-widgets').style.display='block'},hide(){this.el.closest('#available-widgets').style.display='none'},select(l,a,s,r){const d=this,c=$('#instance_widget',v.Lightbox.$lightbox);c.addClass('tb_loading_widgets_form').html('<div class="tf_loader"></div>'),s&&$.each(s,function(e,t){const i=e.match(/.*\[\d\]\[(.*)\]/);$.isArray(i)&&'undefined'!==i[1]&&(delete s[e],s[i[1]]=t)}),$.ajax({type:'POST',dataType:'json',url:themifyBuilder.ajaxurl,data:{action:'module_widget_get_form',tb_load_nonce:themifyBuilder.tb_load_nonce,load_class:l,tpl_loaded:1===d.cache[a]?1:0,id_base:a,widget_instance:s},success(e){if(e&&e.form){{var i=e;const n=function(){const t=$(i.form);if(c.addClass('open').html(t.html()),s)for(let e in s)t.find('[name="'+e+'"]').val(s[e]);if('text'===a?wp.textWidgets&&(d.textInit||(d.textInit=!0,wp.textWidgets.init()),s&&delete wp.textWidgets.widgetControls[s['widget-id']]):wp.mediaWidgets&&(d.mediaInit||(wp.mediaWidgets.init(),d.mediaInit=!0),s&&delete wp.mediaWidgets.widgetControls[s['widget-id']]),$(L).trigger('widget-added',[c]),'text'===a&&ThemifyConstructor.initControl(c.find('.wp-editor-area')[0],{control:{control_type:'wp_editor',type:'refresh'}}),'visual'===S.mode){const e=$.extend(!0,{},r);e.id=c[0].id,c.on('change',':input',function(){!1===S.is_ajax_call&&ThemifyConstructor.control.widget_select(c,e)}),l&&ThemifyConstructor.control.widget_select(c,e)}c.removeClass('tb_loading_widgets_form').find('select').wrap('<span class="selectwrapper"/>')},o=function(a,s){const t=a.length;var e=a[s].src;k.LoadAsync(e,function(){if(a[s].extra&&a[s].extra.after){var i=a[s].extra.after;let t='';if('object'==typeof i)for(let e in i)i[e]&&(t+=i[e]);if(''!==t){const e=L.createElement('script'),l=L.getElementsByTagName('script')[0];e.type='text/javascript',e.text=t,l.parentNode.insertBefore(e,l)}}++s<t?o(a,s):n()},i.v)};void 0===d.cache[a]?(i.template&&L.body.insertAdjacentHTML('beforeend',i.template),0<i.src.length?o(i.src,0):n()):n()}d.cache[a]=1}}})}},message:{render(e,t){const i=L.createElement('div');return void 0!==e.class&&(i.className+=e.class),i.innerHTML=e.comment,i}},filters:{render(n,o){const r={hue:{label:o.label.hue,units:{deg:{max:360}},prop:'hue-rotate'},saturation:{label:o.label.sat,units:{'%':{max:200}},prop:'saturate'},brightness:{label:o.label.bri,units:{'%':{max:200}},prop:'brightness'},contrast:{label:o.label.con,units:{'%':{max:200}},prop:'contrast'},invert:{label:o.label.inv,units:{'%':''},prop:'invert'},sepia:{label:o.label.se,units:{'%':''},prop:'sepia'},opacity:{label:o.label.op,units:{'%':''},prop:'opacity'},blur:{label:o.label.bl,units:{px:{max:50}},prop:'blur'}},d=L.createElement('ul'),c=n.id,p=$.extend(!0,{},n);p.class='tb_filters_field',p.prop=null,d.className='tb_seperate_items tb_filters_fields';for(let s in r)if(void 0!==r[s]){let e=r[s],t=L.createElement('li'),i=L.createElement('div'),l=L.createElement('span'),a=c+'_'+s;p.id=a,p.units=e.units,p.selector=n.selector,i.className='tb_label',l.className='tb_label_text',l.textContent=e.label,i.appendChild(l),t.appendChild(i),'hue'===s?(p.deg=!0,t.appendChild(o.angle.render(p,o)),delete p.deg):t.appendChild(o.range.render(p,o)),d.appendChild(t),o.styles[a]={prop:e.prop,selector:n.selector}}return d}},help(e){const t=L.createElement('div'),i=L.createElement('div'),l=L.createElement('i');return t.className='tb_help',i.className='tb_help_content',l.tabIndex=-1,l.className='icon',i.innerHTML=e,l.appendChild(tb_app.Utils.getIcon('ti-help')),t.appendChild(l),t.appendChild(i),t},hint(e){const t=L.createElement('span');return t.className='tb_tooltip_up',t.textContent=e,t},description(e){const t=L.createElement('small');return t.innerHTML=e,t},after(e){const t=L.createElement('span');return t.className='tb_input_after',t.textContent=void 0!==this.label[e.after]?this.label[e.after]:e.after,void 0!==e.label&&''!==e.label||void 0===e.help||''===e.help||t.appendChild(this.help(e.help)),t},height:{update(e,t,i){i.checkbox.update(e,i.getStyleVal(e),i)},render(e,t){e.isHeight=!0;const i=L.createDocumentFragment(),l=$.extend(!0,{},e);return l.label='ht',l.type='range',l.id=e.id,l.prop='height',l.wrap_class='tb_group_element_'+e.id+'_height tf_inline_b',l.units={px:{max:1200},vh:'','%':'',em:{max:200}},t.range.render(l,t),t.styles[e.id]={prop:'height',selector:e.selector},t.styles[e.id+'_auto_height']={prop:'height',selector:e.selector},i.appendChild(t.range.render(l,t)),i.appendChild(t.checkboxGenerate('checkbox',{id:e.id+'_auto_height',heightID:e.id,type:'checkbox',isHeight:!0,prop:'height',binding:{checked:{hide:'tb_group_element_ht_height'},not_checked:{show:'tb_group_element_ht_height'}},options:[{value:t.label.a_ht,name:'auto'}]})),i}},toggle_switch:{update(e,t,i){i.checkbox.update(e,i.getStyleVal(e),i)},controlChange(e,t){e.addEventListener('change',function(){this.value=!0===this.checked?t.on.name:void 0!==t.off?t.off.name:'','visibility'===ThemifyConstructor.clicked&&null!==S.activeModel&&S.Utils.visibilityLabel(L.querySelector('.tb_element_cid_'+S.activeModel.cid),S.activeModel)},{passive:!0})},render(e,t){const i=$.extend(!0,{},e),l={},a=L.createElement('div');let s='off',n=t.getStyleVal(e.id),o=(i.control=!1,void 0===i.class?i.class='toggle_switch':i.class+=' toggle_switch',i.options);void 0!==o&&'simple'!==o||('simple'===o?o={on:{name:'yes',value:t.label.y},off:{name:'no',value:t.label.no}}:(o={on:{name:'no',value:t.label.s},off:{name:'yes',value:t.label.hi}},void 0===i.default&&(i.default='on'))),void 0===n?('on'===i.default&&(s='on'),n='on'===s?o.on.name:void 0!==o.off?o.off.name:''):(!1===n&&(n=''),s=o.on.name===n?'on':'off');for(let e in o)void 0===i.after&&void 0!==o[e].value&&a.setAttribute('data-'+e,void 0!==t.label[o[e].value]?t.label[o[e].value]:o[e].value),l[e]=o[e];const r=Object.keys(o)[0],d=(delete i.binding,delete o[r].value,delete i.default,i.options=[o[r]],void 0===i.wrap_checkbox&&(i.wrap_checkbox=''),i.wrap_checkbox+=' tb_switcher',a.className='switch_label',t.checkboxGenerate('checkbox',i)),c=d.querySelector('.toggle_switch');return c.value=n,c.checked='on'===s,this.controlChange(c,l),c.parentNode.appendChild(a),t.initControl(c,e),d}},width:{update(e,t,i){i.checkbox.update(e,i.getStyleVal(e),i)},render(i,e){i.isWidth=!0;const t={id:i.id+'_auto_width',widthID:i.id,type:'checkbox',isWidth:!0,prop:'width',options:[{value:e.label.a_wd,name:'auto'}]},l=(e.styles[i.id+'_auto_width']={prop:'width',selector:i.selector},e.checkboxGenerate('checkbox',t)),a=l.querySelector('.tb_lb_option'),s=l.querySelector('input'),n=$.extend(!0,{},i),o=(s.addEventListener('change',function(e){const t=y.document.getElementsByClassName('tb_group_element_'+i.id+'_width')[0];t&&t.classList.toggle('hide-auto-height',e.target.checked)},{passive:!0}),n.label='w',n.type='range',n.id=i.id,n.prop='width',n.wrap_class='tb_group_element_'+i.id+'_width','auto'===e.values[i.id+'_auto_width']&&(n.wrap_class+=' hide-auto-height'),n.units={px:{min:-2e3,max:2e3},'%':'',em:{min:-20,max:20}},e.create([n])),r=(n.wrap_class='',n.label='mi_wd',n.id='min_'+i.id,n.prop='min-width',e.create([n])),d=(e.styles[n.id]={prop:n.prop,selector:i.selector},n.label='ma_wd',n.id='max_'+i.id,n.prop='max-width',e.create([n]));return e.styles[n.id]={prop:n.prop,selector:i.selector},e.afterRun.push(function(){const e=a.parentNode.closest('.tb_field');e.parentNode.insertBefore(o,e),e.parentNode.insertBefore(d,e.nextSibling),e.parentNode.insertBefore(r,e.nextSibling)}),l}},position:{render(l,a){const s={top:a.label.top,right:a.label.right,bottom:a.label.bottom,left:a.label.left},e=L.createElement('ul'),t=L.createElement('li'),n=L.createDocumentFragment(),i=L.createDocumentFragment(),o=l.id,r=$.extend(!0,{},l),d=$.extend(!0,{},l);d.options=[],d.option_js=!0,d.id=o+'-type',d.no_toggle=!0,d.default='top',d.prop=null,e.className='tb_seperate_items tb_group_element_position';for(let i in s){let e=L.createElement('li'),t=o+'_'+i;d.options.push({value:i,name:a.label[s[i]],icon:'<i class="tic-border-'+i+'"></i>',label_class:'tb_radio_label_borders'}),e.className='tb_group_element_'+i,a.styles[t]={prop:i,selector:l.selector},r.id=t,r.type='range',r.prop='position',r.wrap_class='range_wrapper '+t,r.units={px:{min:-2e3,max:2e3},'%':''},e.appendChild(a.range.render(r,a)),a.styles[t+'_auto']={prop:'position',selector:l.selector},e.appendChild(a.checkboxGenerate('checkbox',{id:t+'_auto',is_position:!0,posId:t,prop:i,type:'checkbox',selector:l.selector,options:[{name:'auto',value:a.label.auto}],wrap_checkbox:'tf_inline_b',binding:{checked:{hide:t},not_checked:{show:t}}})),n.appendChild(e)}return t.appendChild(a.radioGenerate('icon_radio',d,a)),e.insertBefore(t,e.childNodes[0]),e.appendChild(n),a.styles[o]={prop:'position',selector:l.selector},r.id=o,r.binding={empty:{hide:'tb_group_element_position'},absolute:{show:'tb_group_element_position'},fixed:{show:'tb_group_element_position'},relative:{hide:'tb_group_element_position'},static:{hide:'tb_group_element_position'}},r.type='select',r.prop='position',r.options={'':'',absolute:a.label.abs,fixed:a.label.fi,relative:a.label.re,static:a.label.st},r.class='tb_position_field tb_multi_field',i.appendChild(a.select.render(r,a)),i.appendChild(e),i}},transform:{_label(e){const t=L.createElement('div'),i=L.createElement('span');return t.className='tb_label',i.className='tb_label_text',i.textContent=e,t.appendChild(i),t},_xy(e,t,i,l,a){const s=L.createElement('li'),n=$.extend(!0,{},i);return s.appendChild(this._label(a)),n.prop=e,n.orig_id=i.id,n.options=[{id:'top',label:'X'},{id:'bottom',label:'Y'}],n.units=t,n.id=i.id+'_'+e,s.appendChild(l.createMarginPadding(i.type,n)),s},_rotate(i,l){const a=['x','y','z'],s=L.createElement('ul'),e=L.createElement('li'),n=(s.className='tb_seperate_items tf_inline_b tf_left tb_tr_rotate',e.appendChild(this._label(l.label.ro)),i.orig_id=i.id,$.extend(!0,{},i));for(let t in a)if(a.hasOwnProperty(t)){let e=L.createElement('li');n.id=i.id+'_rotate_'+a[t],n.prop='rotate',n.deg=!0,n.tooltip=a[t],e.appendChild(l.angle.render(n,l)),s.appendChild(e)}return e.appendChild(s),e},render(e,t){const i=L.createElement('ul');return i.className='tb_seperate_items tb_transform_fields',i.appendChild(this._xy('scale',{x:{min:-100,max:1e3,increment:.1}},e,t,t.label.sc)),i.appendChild(this._xy('translate',{px:{min:-2e3,max:2e3},'%':{min:-100,max:100},em:{min:0,max:100}},e,t,t.label.tl)),i.appendChild(this._rotate(e,t)),i.appendChild(this._xy('skew',{deg:{min:-180,max:180}},e,t,t.label.sk)),i}},code_editor:{load:t=>{if(void 0===y.wp.codeEditor){const i=function(e){delete themifyBuilder.c_e.assets[e],0===Object.keys(themifyBuilder.c_e.assets).length&&(delete themifyBuilder.c_e.assets,k.trigger('codemirror_loaded'),'function'==typeof t&&t())},l=Object.keys(themifyBuilder.c_e.assets);for(let e=l.length-1;-1<e;e--)'js'===themifyBuilder.c_e.assets[l[e]].t?y.Themify.LoadAsync(themifyBuilder.c_e.assets[l[e]].u,function(){i(l[e])},themifyBuilder.c_e.assets[l[e]].v):y.Themify.LoadCss(themifyBuilder.c_e.assets[l[e]].u,themifyBuilder.c_e.assets[l[e]].v,null,null,function(){i(l[e])})}else'function'==typeof t&&t()},setHeight:(e,l)=>{const a='tb_code_editor',t=JSON.parse(localStorage.getItem(a));t&&t[l]&&(e.style.height=t[l]+'px'),new ResizeObserver(e=>{const t=parseInt(e[0].target.style.height);if(!isNaN(t)){const i=JSON.parse(localStorage.getItem(a))||{};i[l]=t,localStorage.setItem(a,JSON.stringify(i))}}).observe(e)}}}}(jQuery,Themify,window.top,document);