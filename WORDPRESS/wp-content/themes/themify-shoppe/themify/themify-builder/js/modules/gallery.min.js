(($,o,e)=>{'use strict';const n=ThemifyBuilderModuleJs.cssUrl+'gallery_styles/',r={};let c=document.getElementById('tb_inline_styles');o.on('builder_load_module_partial',(e,l,t)=>{if(!0!==t||e[0].classList.contains('module-gallery')){const s=o.selectWithParent('module-gallery',e),i=[];for(let e=s.length-1;-1<e;--e)if(!o.cssLazy.tb_gallery_showcase&&s[e].classList.contains('layout-showcase'))o.cssLazy.tb_gallery_showcase=!0,o.LoadCss(n+'showcase.css');else if(!o.cssLazy.tb_gallery_lightboxed&&s[e].classList.contains('layout-lightboxed'))o.cssLazy.tb_gallery_lightboxed=!0,o.LoadCss(n+'lightboxed.css');else if(s[e].classList.contains('layout-grid')){o.cssLazy.tb_gallery_grid||(o.cssLazy.tb_gallery_grid=!0,o.LoadCss(n+'grid.css'));let a=s[e].getElementsByClassName('gallery-masonry')[0];if(a&&!a.classList.contains('gallery-columns-1')){let l='',e=window.getComputedStyle(a),t=e.getPropertyValue('--galN'),s=parseFloat(e.getPropertyValue('--galG'));if(s=s||1.5,!t){let l=a.classList;for(let e=l.length-1;-1<e;--e)if(-1!==l[e].indexOf('gallery-columns-')){t=l[e].replace('gallery-columns-','');break}}if(t){if(t=parseInt(t),r.block||(r.block=!0,l='.gallery-masonry.masonry-done{display:block}.gallery-masonry.masonry-done>.gutter-sizer{width:'+s+'%}'),!r[t]){r[t]=!0;let e=parseFloat((100-(t-1)*s)/t).toFixed(2).replace('.00','');l+='.gallery-columns-'+t+'.masonry-done .gallery-item{width:'+e+'%}'}''!==l&&(null===c?((c=document.createElement('style')).textContent=l,document.head.prepend(c)):c.innerText+=l),i.push(a)}}}0<i.length&&o.isoTop(i,{itemSelector:'.gallery-item',columnWidth:!1})}}).body.on('click','.module-gallery .pagenav a',function(e){e.preventDefault();const s=$(this).closest('.module-gallery'),l=s[0].classList;$.ajax({url:this,beforeSend(){l.add('builder_gallery_load')},complete(){l.remove('builder_gallery_load')},success(e){if(e){const l=s[0].className.match(/tb_?.[^\s]+/),t=(null!==l&&void 0!==l[0]?s.html($(e).find('.'+l[0]).first().html()):s.html($(e).find('.module-gallery').first().html()),s[0].getElementsByClassName('gallery-masonry'));t&&o.isoTop(t,{itemSelector:'.gallery-item',columnWidth:!1})}}})}).on('click','.layout-showcase.module-gallery a',function(e){e.preventDefault(),e.stopPropagation();const l=this.closest('.gallery').getElementsByClassName('gallery-showcase-image')[0],t=l.getElementsByClassName('gallery-showcase-title')[0],s=l.getElementsByClassName('gallery-showcase-title-text')[0],a=l.getElementsByClassName('gallery-showcase-caption')[0],i=new Image;t&&(t.innerText.trim()?t.style.opacity=t.style.visibility='':(t.style.opacity=0,t.style.visibility='hidden')),l.classList.add('tf_lazy'),i.decoding='async',i.alt=this.getElementsByTagName('img')[0].alt,s&&(s.innerHTML=this.title),a&&(a.innerHTML=this.getAttribute('data-caption')),i.src=this.getAttribute('data-image'),i.decode().finally(()=>{const e=l.getElementsByTagName('img')[0];e.parentNode.replaceChild(i,e),l.classList.remove('tf_lazy')})})})(jQuery,Themify);