(($,i,a,o)=>{'use strict';const r='builder-parallax-scrolling',s=[],h={xpos:'50%',speedFactor:.1},n=()=>{for(let e=s.length-1;-1<e;--e)s[e]&&s[e].element?s[e].update(e):u(e)},c=e=>{e&&(d=e.h);for(let e=s.length-1;-1<e;--e)s[e]&&s[e].element?(s[e].top=s[e].element.offset().top,s[e].update(e)):u(e)},u=e=>{s[e]&&(s[e].classList&&s[e].classList.remove(r),s.splice(e,1),0===s.length&&(i.off('tfsmartresize',c),a.removeEventListener('scroll',n,{passive:!0}),p=null))};let d=null,p=null;function m(e){this.element=e,this.init()}m.prototype={top:0,init(){this.top=this.element.offset().top;const t=this.element.css('background-image').replace(/(url\(|\)|")/g,'');if(t&&'none'!==t&&t.match(/\.(jpe?g|gif|png|svg)$/)){const e=new Image,l=this;e.src=t,e.decode().then(()=>{l.w=e.width,l.h=e.height}).catch(e=>{console.error('Parrallax('+t+'): '+e)}).finally(()=>{s.push(l),l.update()})}else s.push(this),this.update();null===p&&(d=i.h,i.on('tfsmartresize',c),a.addEventListener('scroll',n,{passive:!0}),p=!0)},update(e){if(!1!==o.body.contains(this.element[0])&&this.element[0].classList.contains(r)){const t=a.pageYOffset,l=this.element.offset().top,s=this.element.outerHeight(!0),i=(l-t)*h.speedFactor;if(!(l+s<t||l>t+d)){this.element[0].style.backgroundPositionY='calc(50% + '+Math.round(i)+'px)';const n=Math.max(this.element.outerWidth(!0)/this.w,s/this.h);let e=Math.round(this.w*n),t=Math.round(this.h*n);t===Math.round(s)?(e*=1.3,t*=1.3,this.element[0].style.backgroundSize=Math.round(e)+'px '+Math.round(t)+'px'):this.element[0].style.backgroundSize=''}}else u(e)}},i.on('builder_load_module_partial',(e,t,l)=>{let s;if(!0===l){if(!e[0].classList.contains('builder-parallax-scrolling'))return;s=[e[0]]}else s=i.selectWithParent('builder-parallax-scrolling',e);for(let t=s.length-1;-1<t;--t){let e=$(s[t]);e.data('plugin_builderParallax')||e.data('plugin_builderParallax',new m(e))}})})(jQuery,Themify,window,document);