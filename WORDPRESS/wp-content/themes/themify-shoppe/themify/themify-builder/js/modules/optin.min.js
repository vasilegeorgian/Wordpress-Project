(($,i)=>{'use strict';i.on('builder_load_module_partial',(e,t,a)=>{if(!0!==a||e[0].classList.contains('module-optin')){const o=i.selectWithParent('tb_optin_form',e);o[0]&&i.requestIdleCallback(()=>{{var t=o[0];const s=t=>{const e=new FormData(t),a=t.querySelector('[name="g-recaptcha-response"]');null!==a&&e.append('contact-recaptcha',a.value),$.ajax({url:t.getAttribute('action'),method:'POST',processData:!1,contentType:!1,cache:!1,data:e,success(e){e.success?'s1'===t.dataset.success?window.location.href=e.data.redirect:$(t).fadeOut().closest('.module').find('.tb_optin_success_message').fadeIn():window.console&&console.log(e.data.error)},complete(){t.classList.remove('processing'),'object'==typeof grecaptcha&&'v2'===t.find('.themify_captcha_field').data('ver')&&grecaptcha.reset()}})},a=c=>{i.is_builder_active||c.addEventListener('submit',function(e){e.preventDefault();const a=this;if(a.classList.contains('processing'))return!1;a.className+=' processing';const t=c.getElementsByClassName('themify_captcha_field')[0];t&&'v3'===t.dataset.ver&&'undefined'!=typeof grecaptcha?grecaptcha.ready(()=>{grecaptcha.execute(t.dataset.sitekey,{action:'captcha'}).then(e=>{const t=document.createElement('input');t.type='hidden',t.name='g-recaptcha-response',t.value=e,a.insertBefore(t,a.firstChild),s(a)})}):s(a)})},c=t.getElementsByClassName('themify_captcha_field')[0];if(c&&'undefined'==typeof grecaptcha){const n=c.getAttribute('data-sitekey');if(n){let e='https://www.google.com/recaptcha/api.js';'v3'===c.getAttribute('data-ver')&&(e+='?render='+n),i.LoadAsync(e,()=>{a(t)},!1,!0,()=>'undefined'!=typeof grecaptcha)}}else a(t)}},300)}})})(jQuery,Themify);