(($,h)=>{'use strict';let i=!1;const c=ThemifyBuilderModuleJs.cssUrl+'accordion_styles/',r=()=>{h.body.off('click.tb_accordeon').on('click.tb_accordeon','.accordion-title',function(e){e.preventDefault(),e.stopPropagation();const t=$(this),a=t.next(),o=t.closest('li'),i=o.parent(),c=i[0].parentNode.hasAttribute('data-hashtag'),r=o.find('>.accordion-title .accordion-active-icon'),s=o.find('>.accordion-title .accordion-icon'),d=i.closest('.module-accordion[data-behavior]').data('behavior'),n=o.toggleClass('current').siblings().removeClass('current');if(i.hasClass('tf-init-accordion')||i.addClass('tf-init-accordion'),'accordion'===d&&(n.find('.accordion-content').slideUp().closest('li').removeClass('builder-accordion-active'),n.find('.accordion-title > a').attr('aria-expanded','false'),n.find('>.accordion-title .accordion-icon').removeClass('tf_hide').end().find('>.accordion-title .accordion-active-icon').addClass('tf_hide')),o.hasClass('builder-accordion-active'))r.addClass('tf_hide'),s.removeClass('tf_hide'),a.slideUp(),o.removeClass('builder-accordion-active').find('>.accordion-title > a').attr('aria-expanded','false'),a.attr('aria-hidden','true'),!0===c&&window.location.hash===e.target.closest('a').getAttribute('href')&&(window.history&&window.history.pushState?window.history.pushState('','',window.location.pathname):window.location.href=window.location.href.replace(/#.*$/,'#'));else{r.removeClass('tf_hide'),s.addClass('tf_hide'),o.addClass('builder-accordion-active'),a.slideDown(),o.find('>.accordion-title > a').attr('aria-expanded','true'),a.attr('aria-hidden','false');const l=!!a.hasClass('default-closed')&&a.find('.themify_map');if(l)for(let e=l.length-1;-1<e;--e){let t=$(l[e]).data('gmap_object');if(void 0===t.already_centered||t.already_centered||(t.already_centered=!1),!t.already_centered){let e=t.getCenter();google.maps.event.trigger(t,'resize'),t.setCenter(e),t.already_centered=!0}}!0===c&&(window.history&&window.history.pushState?window.history.pushState(null,null,e.target.closest('a').getAttribute('href')):window.location.href=e.target.closest('a').getAttribute('href'))}h.trigger('tb_accordion_switch',[a]),$(window).triggerHandler('resize')})},s=()=>{const t=window.location.hash.replace('#','');if(''!==t&&'#'!==t){const e=document.querySelector('.module-accordion [data-id="'+t+'"]');if(e){let e=document.querySelector('.accordion-title a[href="#'+t+'"]');e.click()}}};h.on('builder_load_module_partial',(e,t,a)=>{if(!0!==a||e[0].classList.contains('module-accordion')){const o=h.selectWithParent('module-accordion',e);for(let e=o.length-1;-1<e;--e)!h.cssLazy.tb_accordion_separate&&o[e].classList.contains('separate')&&(h.cssLazy.tb_accordion_separate=!0,h.LoadCss(c+'separate.css')),!h.cssLazy.tb_accordion_transparent&&o[e].classList.contains('transparent')&&(h.cssLazy.tb_accordion_transparent=!0,h.LoadCss(c+'transparent.css'));!0===a&&!1!==i||(h.requestIdleCallback(r,50),window.addEventListener('hashchange',s,{passive:!0}),h.requestIdleCallback(s,51),i=!0)}})})(jQuery,Themify);