(s=>{'use strict';const i=ThemifyBuilderModuleJs.cssUrl+'video_styles/',o=t=>{const a=s.selectWithParent('module-video',t);for(let e=a.length-1;-1<e;--e){let d=a[e],u=d.getAttribute('data-url'),t=d.getElementsByClassName('tb_video_overlay')[0];if(u){if(!s.cssLazy.tb_video_overlay&&d.classList.contains('video-overlay')&&(s.cssLazy.tb_video_overlay=!0,s.LoadCss(i+'overlay.css')),t)s.cssLazy.tb_video_play_button||(s.cssLazy.tb_video_play_button=!0,s.LoadCss(i+'play_button.css')),t.addEventListener('click',l,{once:!0});else{let i=s.parseVideo(u),t=d.getElementsByClassName('video-wrap')[0],o,l=d.hasAttribute('data-auto'),r=!(!l||d.hasAttribute('data-clicked'))||d.hasAttribute('data-muted');if(null===t.querySelector('iframe,video')){if('youtube'===i.type||'vimeo'===i.type){let t='',e='',a=!!d.hasAttribute('data-start')&&d.dataset.start,s=!!d.hasAttribute('data-end')&&d.dataset.end;o=document.createElement('iframe');const n=u.split('?')[1],c=!!n&&new URLSearchParams(n);if('youtube'===i.type){if(t='https://www.youtube'+(d.hasAttribute('data-privacy')?'-nocookie':'')+'.com/embed/'+i.id+'?autohide=1&border=0&wmode=opaque&playsinline=1',!1!==c){const y=c.get('list'),b=c.get('rel');(a=a||c.get('t'))&&(t+='&start='+a),s&&(t+='&end='+s),y&&(t+='&list='+y),null!==b&&(t+='&rel='+b)}e='accelerometer;encrypted-media;gyroscope;picture-in-picture'}else{if(t='https://player.vimeo.com/video/'+i.id+(a?'#t='+a+'s':'')+'?portrait=0&title=0&badge=0',i.h)t+='&h='+i.h;else if(!1!==c){const p=c.get('h');p&&(t+='&h='+p)}e='fullscreen'}r&&(t+='youtube'===i.type?'&mute=1':'&muted=1'),l&&(e+=';autoplay',t+='&autoplay=1'),d.hasAttribute('data-hide-controls')&&(t+='&controls=0'),d.hasAttribute('data-loop')&&(t+='&playlist='+i.id+'&loop=1'),d.hasAttribute('data-branding')&&(e+=';modestbranding',t+='&modestbranding=1'),o.setAttribute('allow',e),o.setAttribute('allowfullscreen',''),o.setAttribute('src',t)}else(o=document.createElement('video')).src=u,o.controls=!0,o.setAttribute('webkit-playsinline',1),o.setAttribute('playsinline',!0),l&&(o.autoplay=!0),r&&(o.muted=!0);o.className='tf_abs tf_w tf_h',t.appendChild(o),'youtube'!==i.type&&'vimeo'!==i.type&&s.video([o])}}d.classList.remove('tf_lazy')}}},l=function(t){t.preventDefault(),t.stopPropagation();const e=this.closest('.module-video');e.setAttribute('data-auto',1),e.setAttribute('data-clicked',1),this.remove(),o(e)};s.on('builder_load_module_partial',(t,e,a)=>{!0===a&&!t[0].classList.contains('module-video')||o(t)})})(Themify);