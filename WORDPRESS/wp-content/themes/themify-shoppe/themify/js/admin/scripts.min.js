!function($){'use strict';$(function(){var e,o,l,t=$('body'),i=$('#themify'),a=$('#setting>.subtabnav'),n=$('#themify_404_page_autocomplete'),s=(i.find('.maintab').not('[aria-expanded="false"]').each(function(){$(this).find('.subtab').css('minHeight',$(this).find('.subtabnav').outerHeight())}),0<n.length&&(o={},l=n.closest('.themify_404_autocomplete_wrap'),n.autocomplete({minLength:2,autoFocus:!0,classes:{"ui-autocomplete":"highlight"},source:function(e,n){var s=e.term;l.addClass('themify_autocomplete_run'),s in o?(n(o[s]),l.removeClass('themify_autocomplete_run')):$.ajax({url:ajaxurl,dataType:"json",type:'POST',data:{term:s,action:'themify_get_404_pages'},success:function(e){for(const a in e)e[a].label=(t=e[a].label,i=void 0,(i=document.createElement('textarea')).innerHTML=t,i.innerText);var t,i;o[s]=e,n(e.length?e:[themify_js_vars.page_not_found]),l.removeClass('themify_autocomplete_run')}})},select:function(e,t){e.preventDefault(),t.item.value!==themify_js_vars.page_not_found&&n.val(t.item.label).next('input[type="hidden"]').val(t.item.value)},change:function(e,t){t.item||e.target.value||n.next('input[type="hidden"]').val('')}}).focus(function(){$(this).autocomplete('search')})),0<a.length&&(e=a.offset().top-32),!1),r=function(e,t){$('.search-setting-holder .clear-search').trigger('click');var t='tabscreate'===e.type?window.location:t.newTab.find('a')[0];'replaceState'in history&&history.replaceState(null,null,t.hash||null),'tabscreate'!==e.type||s||(s=!0,(t=$('#themify div#setting div.subtab')).each(function(){var e=$(this).find('fieldset');2<e.length?e.children('.themify_panel_fieldset_wrap').hide():e.find('legend').addClass('themify_panel_fieldset_nocollapse')}),t.find('legend:not(.themify_panel_fieldset_nocollapse)').on('click',function(){var e=$(this),a=e.children('i');a.hasClass('tf_plus_icon')?e.siblings().slideDown("fast",function(){if(this.getElementsByClassName('CodeMirror').length<1){const i=this.getElementsByClassName('tf_code_editor');for(let e=i.length-1;-1<e;--e){var t=i[e];if(wp&&wp.codeEditor&&themify_js_vars.code_editor){let e=wp.codeEditor.initialize(t,themify_js_vars.code_editor);e.codemirror.on('change',function(){e.codemirror.save()}),e.codemirror.refresh()}}}a.removeClass('tf_plus_icon').addClass('ti-minus')}):e.siblings().slideUp("fast",function(){a.removeClass('ti-minus').addClass('tf_plus_icon')})}))};$('.maintab, #content').tabs({fx:{opacity:'toggle',duration:200},cache:!0,select:function(){$(this).css({height:$(this).height(),overflow:'hidden'})},show:function(){$(this).css({height:'auto',overflow:'visible'}),0<a.length&&(e=a.offset().top-32)},beforeActivate:r,create:r});let c=window.location.hash&&document.querySelector('a[href="'+window.location.hash+'"]');if(c&&c.closest('.subtabnav')){let e=c.closest('.maintab').getAttribute('id');(e=e&&document.getElementById('maintabnav').querySelector('a[href="#'+e+'"]'))&&e.click()}0<a.length&&$(window).on('scroll',function(){$(this).scrollTop()>e?a.hasClass('themify_settings_fixed')||a.addClass('themify_settings_fixed'):a.removeClass('themify_settings_fixed')});var d=function(){var e=$("#search-setting").val();e.length<=0?(f(),$(".subtab",'#setting').unmark({done:function(){$('.searching').removeClass('searching'),$('.contain-result').removeClass('contain-result'),$('#setting').removeClass('not-found')}})):(e.length&&!$('.search-setting-holder .clear-search').hasClass('show')&&f(),$(".subtab",'#setting').unmark({done:function(){$('.searching').removeClass('searching'),$('.contain-result').removeClass('contain-result'),$('#setting').removeClass('not-found'),$("*:not(:input):contains('"+e+"')","#setting .subtab").mark(e,{diacritics:!0,separateWordSearch:!0,exclude:["option",".tm-option-title-fw"],filter:function(e,t,i,a){if("#text"===e.nodeName){if('none'===$(e).parent().parent().css('display'))return!1}else if('none'===$(e).parent().css('display'))return!1;return!0},each:function(e){$(e).closest('fieldset').addClass('contain-result'),$(e).closest('.subtab').addClass('contain-result')},done:function(){$('#setting').addClass('searching')},noMatch:function(){$('#setting').addClass('not-found')}})}}))};function f(){var e=$('.search-setting-holder .clear-search');e.prev().val().length<=0?e.removeClass('show'):e.addClass('show')}function m(){S();var e=i.serialize();$.post(ajaxurl,{action:'themify_save',data:e,nonce:themify_js_vars.nonce},function(){I(),$('body').triggerHandler('themify_save')})}$("#search-setting").on("input",d),$('.search-setting-holder .clear-search').on('click',function(){$(this).prev().val(''),d()}),$('.valid_num').on('keyup input paste',function(){!function(e){for(var t,i=!0,a=0;a<e.length&&!0===i;a++)t=e.charAt(a),-1===" 0123456789.+-".indexOf(t)&&(i=!1);return i}($(this).val())&&$(this).val($(this).val().substring(0,$(this).val().length-1))}),$('.save-button').on('click',function(e){return m(),!1}),0<i.length&&$(document).on('keydown',function(e){83!=e.which||1!=e.ctrlKey&&1!=e.metaKey||(e.preventDefault(),m())}),$('#reset-setting').on('click',function(e){e.preventDefault();e='reset-setting'!==$(this).prop('id')?'styling':'settings';confirm(themify_lang['confirm_reset_'+e])&&(S(),$.post(ajaxurl,{action:'themify_reset_'+e,data:i.serialize(),nonce:themify_js_vars.nonce},function(){I(),window.location.reload(!0)}))});{let t=document.getElementById('tf_message'),i=localStorage.getItem('tf_message'),e=localStorage.getItem('tf_message_dismiss'),a=function(){t.className='show',t.innerHTML=i+' ';let e=document.createElement('a');e.href='#',e.textContent=t.dataset.dismiss,e.addEventListener('click',function(e){e.preventDefault(),t.style.display='none',localStorage.setItem('tf_message_dismiss',1)}),t.appendChild(e)};t&&!e&&(null===i?$.ajax({url:'https://themify.me/public-api/update-message/index.txt',success:function(e){i=e,localStorage.setItem('tf_message',i),''!==i.trim()&&a()}}):''!==i&&a())}$('.themify_changelogs').on('click',function(e){e.preventDefault();e=$(this).data('changelog');$('.show-login, .show-error').hide(),$('.overlay, .prompt-box').fadeIn(300),$('.prompt-box iframe').remove(),$('.tb_alert').addClass('busy').fadeIn(300),$('<iframe src="'+e+'" />').on('load',function(){$('.tb_alert').removeClass('busy').fadeOut(300)}).prependTo('.prompt-box'),$('.prompt-box').addClass('show-changelog')}),$('.overlay').on('click',function(){$(this).add('.prompt-box').fadeOut()}),$(".feature-box-display").on('click',function(){"images"===$(this).val()?$(this).parent().parent().find(".feature_box_posts").fadeOut(200,function(){$(this).parent().parent().find(".feature_box_images").fadeIn(200)}):$(this).parent().parent().find(".feature_box_images").fadeOut(200,function(){$(this).parent().parent().find(".feature_box_posts").fadeIn(200)})}),$(".block-toggle").on('click',function(){var e=$(this),t=e.val(),i=e.data('hide');e.parent().parent().find('.feature_box_'+i).fadeOut(200,function(){e.parent().parent().find('.feature_box_'+t).fadeIn(200)})}),$(".feature_box_enabled_check").on('change',function(){'on'===$(this).val()?$(this).closest('fieldset').find(".feature_box_enabled_display").fadeIn(200):$(this).closest('fieldset').find(".feature_box_enabled_display").fadeOut(200)});var r=$('.box_enabled_check'),h=(r.on('click',function(){$(this).is(":checked")?$(this).parent().find(".box_enabled_display").fadeIn(200):$(this).parent().find(".box_enabled_display").fadeOut(200)}),r.is(":checked")&&r.parent().find(".box_enabled_display").show(),$('.disable_img_php'));h.on('click',function(){h.is(":checked")?($('.show_if_disabled_img_php').fadeIn(200),$('.show_if_enabled_img_php').fadeOut(200)):($('.show_if_disabled_img_php').fadeOut(200),$('.show_if_enabled_img_php').fadeIn(200))}),h.is(":checked")?$(".show_if_disabled_img_php").show():h.not(":checked")&&$(".show_if_enabled_img_php").show(),$('.gallery_lightbox_type').on('change',function(){1!=$('.gallery_lightbox_type').prop('selectedIndex')?$('.show_if_photoswipe_enabled').fadeOut(200):$('.show_if_photoswipe_enabled').fadeIn(200)}).trigger('change'),$("#skins .skin-preview").on('click',function(e){$(e.target).parent().hasClass('view-demo')||e.preventDefault(),$("#skins .skin-preview").removeClass('selected'),$(this).addClass('selected'),$("input[name='skin']").val($(this).attr('data-skin'))});var r=$('.featimgcontrol'),u=(0<r.length&&0<$('.featimgdropdown').length&&r.each(function(){$(this).append($(this).next('.featimgdropdown'))}),$('#social-link-type')),p=$('#social-links-wrapper'),_=$('#setting-link_field_ids'),g=$('#setting-link_field_hash'),v=($('input[value="font-icon"]',u).prop('checked')?($('.image-icon',p).fadeOut(),$('.font-icon',p).fadeIn()):($('.font-icon',p).fadeOut(),$('.image-icon',p).fadeIn()),$('input',u).on('click',function(){var e=$(this);e.prop('checked')&&($('.'+e.data('hide'),p).fadeOut(),$('.'+e.val(),p).fadeIn())}),p.length&&p.sortable({placeholder:'social-link-placeholder',handle:'.social-drag',update:function(){var e={};$('.social-link-item').each(function(){e[$(this).attr('id')]=$(this).attr('id')}),_.val(JSON.stringify(e))}}).on('click','.remove-item',function(e){e.preventDefault();var e=JSON.parse(_.val()),t=$(this).data('removelink');$('#'+t).remove(),delete e[t],_.val(JSON.stringify(e))}),$('.add-social-link a').on('click',function(e){var a=JSON.parse(_.val()),n=parseInt(g.val()),t='image-icon';e.preventDefault(),$('input[value=font-icon]',u).prop('checked')&&(t='font-icon'),$.post(ajaxurl,{action:'themify_add_link_field',nonce:themify_js_vars.nonce,fid:n,type:t},function(e){let t=$('#social-links-wrapper'),i=$(e);t.append(i);e=$('#themify-link-'+g.val()+' .plupload-upload-uic');a['themify-link-'+g.val()]='themify-link-'+g.val(),_.val(JSON.stringify(a)),0<e.length&&themify_create_pluploader(e),window.Themify_Metabox.color_picker(i),g.val(n+1)})}),$('.slug-rewrite').each(function(){$(this).on('keypress',function(e){var t=new RegExp("^[a-z0-9_-]+$"),i=String.fromCharCode(e.charCode||e.which);if(!t.test(i))return e.preventDefault(),!1})}),{target:'',getDocHeight:function(){var e=document;return Math.max(Math.max(e.body.scrollHeight,e.documentElement.scrollHeight),Math.max(e.body.offsetHeight,e.documentElement.offsetHeight),Math.max(e.body.clientHeight,e.documentElement.clientHeight))},showLightbox:function(e){var t=$(document).scrollTop()+80,i=$(".themify-admin-lightbox-"+e);i.length||($('.themify-admin-lightbox:first').clone().removeClass('themify-admin-lightbox-1').addClass('themify-admin-lightbox-'+e).data('item',e).insertAfter('.themify-admin-lightbox:last'),1<$('.themify-admin-lightbox').length&&$('.lightbox_container','.themify-admin-lightbox-'+e).html(''),(i=$(".themify-admin-lightbox-"+e)).removeClass('is-loaded')),$('#themify_lightbox_overlay').show(),i.hasClass('is-loaded')?(i.show().css('top',v.getDocHeight()).animate({top:t},800),$('.themify-visibility-toggle').html($('.themify-visibility-toggle').data('text'))):$.ajax({type:'POST',url:ajaxurl,data:{action:'themify_get_visibility_options',selected:v.target.val(),nonce:themify_js_vars.nonce},success:function(e){$('.lightbox_container',i).append(e),i.show().css('top',v.getDocHeight()).animate({top:t},800),$('#visibility-tabs',i).tabs(),$('#visibility-tabs .themify-visibility-inner-tabs',i).tabs(),$('.themify-visibility-toggle').html($('.themify-visibility-toggle').data('text'))}})},closeLightbox:function(e,t){$('.themify-admin-lightbox-'+e).animate({top:v.getDocHeight()},800,function(){$('#themify_lightbox_overlay').hide(),$('.themify-admin-lightbox-'+e).hide(),'function'==typeof t&&t()}).addClass('is-loaded')},clearOptions:function(){$('#themify_lightbox_visibility').find('.lightbox_container').empty()}});t.on('click','.themify-visibility-toggle',function(){var e=$(this),t=e.html();return e.html('<span class="tb_slider_loader_wrapper"><span class="tb_slider_loader"></span></span>'+t),v.target=$(this).next(),v.showLightbox($(this).data('item')),!1}).on('click','.themify_lightbox_visibility .close_lightbox, #themify_lightbox_overlay',function(){return v.closeLightbox($(this).parents('.themify_lightbox_visibility').data('item')),!1}),t.on('click','.themify-visibility-pagination a.page-numbers',function(e){e.preventDefault();var e=$(this),t=e.parents('.themify-visibility-options'),i=e.parents('.themify-visibility-items-inner'),a=$('.themify-visibility-pagination',i),n=parseFloat($('.themify-visibility-pagination .current',i).text()),s=1,o=(e.hasClass('next')?s=n+1:e.hasClass('prev')?s=n-1:e.hasClass('page-numbers')&&(s=parseFloat(e.text())),$('.themify-visibility-items-inner',t));$.ajax({url:ajaxurl,type:'post',data:{action:'themify_create_page_pagination',current_page:s,num_of_pages:i.data('pages'),nonce:themify_js_vars.nonce},beforeSend:function(){$('.tb_slider_loader',t).remove(),a.hide(),o.append('<div class="tb_slider_loader"></div>')},success:function(e){$('.tb_slider_loader',t).remove(),$('.themify-visibility-items-page',i).addClass('is-hidden'),$('.themify-visibility-items-page-'+s,i).removeClass('is-hidden'),a.html(e).show()}})}).on('click','#visibility-tabs .themify-visibility-tab',function(e){e.preventDefault();var t,i,a=$(this),n=$('#themify-original-conditions');a.data('active')||(e=a.data('type'),t=a.parents('#visibility-tabs').find('.themify-visibility-type-options[data-type='+e+']'),i=a.parents('.themify_lightbox_visibility').data('item'),i=$('#setting-hooks-'+i+'-visibility').val(),$.ajax({url:ajaxurl,type:'post',data:{action:'themify_create_inner_page',type:e,selected:i,nonce:themify_js_vars.nonce,original_values:n.val()},beforeSend:function(){t.html('<div class="tb_slider_loader"></div>')},success:function(e){e=JSON.parse(e),t.html(e.html),a.data('active','on'),n.val(e.original_values)}}))}).on('click','.visibility-save',function(){for(var e=$(this).parents('.themify_lightbox_visibility'),t=e.data('item'),i=$('form',e).serialize(),e=''===(e=$('#themify-original-conditions',e).val())?[]:e.split('&'),a=''===i?[]:i.split('&'),i=e.concat(a).concat(),n=0;n<i.length;++n)for(var s=n+1;s<i.length;++s)i[n]===i[s]&&i.splice(s--,1);return i=i.join('&'),$('.setting-hooks-'+t+'-visibility').val(i),v.target.val(i),v.closeLightbox($(this).parents('.themify_lightbox_visibility').data('item')),!1}).on('click','.themify_lightbox_visibility .uncheck-all',function(){$(this).before('<span class="tb_slider_loader_wrapper"><span class="tb_slider_loader"></span></span>');const e=$(this),t=e.parents('.themify_lightbox_visibility'),i=t.data('item');return $('#setting-hooks-'+i+'-visibility').val(''),$('#themify-original-conditions',t).val(''),$('input:checkbox',t).removeAttr('checked'),e.parent().find('.tb_slider_loader_wrapper').remove(),!1}),$('#setting-hooks').on('click','.remove-item',function(e){e.preventDefault();const i=JSON.parse($('#themify-hooks-field-ids').val()),a=$(this).closest('.social-link-item').fadeOut('fast',function(){const t=a.attr('data-id');for(let e in i)i.hasOwnProperty(e)&&i[e]==t&&i.splice(e,1);$('#themify-hooks-field-ids').val(JSON.stringify(i)),$('.themify-admin-lightbox-'+t).removeClass('is-loaded').find('.lightbox_container').html('')})}).on('click','.themify-add-hook a',function(e){e.preventDefault(),$(this).before('<span class="tb_slider_loader_wrapper"><span class="tb_slider_loader"></span></span>');let i=JSON.parse($('#themify-hooks-field-ids').val()),a=1;0<i.length?a=Math.max.apply(null,i)+1:i=[],$.ajax({url:ajaxurl,type:'post',data:{action:'themify_hooks_add_item',field_id:a,nonce:themify_js_vars.nonce},success:function(e){const t=$('#hook-content-list');i.push(a),$('#themify-hooks-field-ids').val(JSON.stringify(i)),$('#setting-hooks .tb_slider_loader_wrapper').remove(),t.append(e),$('textarea[name=setting-hooks-'+a+'-code]',t).html(''),$('select[name=setting-hooks-'+a+'-location] optgroup:first-child option[value=themify_body_start]',t).attr('selected',!0),1<t.find('li').length&&$('.themify-admin-lightbox:first').clone().removeClass('themify-admin-lightbox-1').addClass('themify-admin-lightbox-'+a).data('item',a).insertAfter('.themify-admin-lightbox:last'),$('.lightbox_container','.themify-admin-lightbox-'+a).html(''),$('#setting-hooks-'+a+'-visibility',t).val(''),$('.themify-admin-lightbox:last').removeClass('is-loaded'),t.find('li[data-id="'+a+'"] .tf_hook_repeat').hide()}})});const y=$('#hook-content-list');y.length&&y.sortable({placeholder:'social-link-placeholder',handle:'.social-drag',update:function(){var e=[];y.find('li').each(function(){e.push(parseInt($(this).attr('data-id')))}),$('#themify-hooks-field-ids').val(JSON.stringify(e))}}),$('body').on('click','.see-hook-locations',function(e){e.preventDefault(),window.tf_hook_target=this.closest('li').querySelector('select'),$.magnificPopup.open({items:[this],type:'iframe',iframe:{markup:"<div class=\"mfp-iframe-scaler\" style=\"max-width: 100% !important; height: 100%;\"><div role=\"button\" class=\"tf_close mfp-close\"></div><iframe id=\"tf_hook_location_iframe\" class=\"mfp-iframe\" frameborder=\"0\" allowfullscreen></iframe></div>"}})}).on('change','.tf_hook_location',function(){let e=$('option:selected',this).closest('optgroup').data('key');$(this).closest('li').find('.tf_hook_repeat').toggle('layout'!==e&&'general'!==e&&'ecommerce'!==e).find('span').eq(0).toggle('post_content'!==e).end().eq(1).toggle('post_content'===e)}).find('.tf_hook_location').each(function(){$(this).trigger('change')}),$('#setting-editor-gfonts-list').on('change',function(){$(this).next().val(JSON.stringify($(this).val()))}).trigger('change'),t.on('click','#demo-import-notice .skin-preview',function(e){$(e.target).parent().hasClass('view-demo')||e.preventDefault(),$("#demo-import-notice .skin-preview").removeClass('selected'),$(this).addClass('selected'),$('#skins .skin-preview[data-skin="'+$(this).data('skin')+'"]').trigger('click')}),$('#demo-import-notice .skin-demo-import').on('click',function(){$('#skins .skin-preview.selected .skin-demo-import').trigger('click')}),t.on('click','#skins .skin-demo-import',O).on('click','#skins .skin-erase-demo',function(e){e.preventDefault();e=$(this).closest('.skin-demo-content');$.ajax({url:ajaxurl,data:{action:'themify_erase_sample_content',skin:e.data('skin'),nonce:themify_js_vars.nonce},type:'POST',success:function(e){e.success||alert(e.data.error)},beforeSend:function(){S()},complete:function(){I()}})}),$('#demo-import-notice .import-sample-content').on('click',function(){$('#demo-import .import-sample-content').trigger('click')}),$('#demo-import .import-sample-content').on('click',O),$('.erase-sample-content').on('click',function(){const e=$(this);return e.hasClass('disabled')||(e.addClass('disabled'),$.ajax({url:ajaxurl,data:{action:'themify_erase_sample_content',nonce:themify_js_vars.nonce},type:'POST',success:function(e){e.success||alert(e.data.error)},beforeSend:function(){e.find('span').text(e.attr('data-erasing')),S()},complete:function(){e.find('span').text(e.attr('data-success')),I()}})),!1}),$('.themify-modal .dismiss-import-notice').on('click',function(){return $(this).closest('.themify-modal').fadeOut(),E('close'),!1}),D(i),r=$('#themify, .toplevel_page_themify-builder #wpbody-content').find('[data-show-if-element]').map(function(){return $(this).data('show-if-element')}).get().filter(function(e,t,i){return t===i.indexOf(e)}),$.each(r,function(e,t){var i=t;j(i),$(document).on('change',i,function(e){j(i)})}),$('.js-clear-cache').on('click',function(e){e.preventDefault();const t=$(this);t.hasClass('disabled')||(t.addClass('disabled'),$.ajax({url:ajaxurl,data:{action:t.data('action'),data:'all'===t.data('send')?i.serialize():'',nonce:themify_js_vars.nonce},type:'POST',dataType:'json',beforeSend:function(){t.find('span').text(t.data('clearing-text')).end().find('i').removeClass().addClass('tf_loader')},error:function(){t.removeClass('disabled')},success:function(e){e&&e.error&&alert(e.error),t.find('span').text(t.data('done-text')).end().find('i').removeClass(),e&&e.remove_after?setTimeout(function(){t.closest('.pushlabel').remove()},3e3):setTimeout(function(){t.find('span').text(t.data('default-text')).end().find('i').removeClass().addClass(t.data('default-icon')).end().removeClass('disabled')},5e3)}}))}),$('.input-range .range-slider').each(function(){let i=$(this),a=i.next(),n=!!a.data('range');i.slider({range:n,min:a.data('min'),max:a.data('max'),values:a.val().split('-'),slide:function(e,t){t.values[0]!=t.values[1]&&n?a.val(t.values[0]+'-'+t.values[1]):a.val(t.values[0])}}),a.on('keyup',function(){const e=$(this),t=parseInt(e.val());t<parseInt(e.data('default-min'))&&i.slider("option","min",t),t>parseInt(e.data('default-max'))&&i.slider("option","max",t),i.slider("values",[t])})}),void 0!==window.wp&&void 0!==window.wp.media&&void 0!==wp.media.featuredImage&&($('body').on('themify_metabox_lib_selected',function(e,t,i,a){t.data('submit').featured&&wp.media.featuredImage.set(i.id)}).on('themify_plupload_selected',function(e,t,i){t.data('featured')&&wp.media.featuredImage.set(i.id)}).on('themify_wp_media_featured_image_set',function(e,t,i){const a=$('#post_image').closest('.themify_field_row');-1==t?a.find('.themify_featimg_remove a').trigger('click'):themifyMediaLib.setPreviewIcon(a,$(i).find('#set-post-thumbnail img').attr('src'))}),$('#post_image').closest('.themify_field_row').find('.themify_featimg_remove a').on('click',function(){$('#remove-post-thumbnail').trigger('click')}),wp.media.featuredImage.set=function(t){var e=wp.media.view.settings;e.post.featuredImageId=t,wp.media.post('get-post-thumbnail-html',{post_id:e.post.id,thumbnail_id:e.post.featuredImageId,_wpnonce:e.post.nonce}).done(function(e){'0'==e?window.alert(window.setPostThumbnailL10n.error):($('.inside','#postimagediv').html(e),$('body').triggerHandler('themify_wp_media_featured_image_set',[t,e]))})}),$('#builder-regenerate-css-files').on('click',function(){const t=$(this).attr({value:'Regenerating ...',disabled:'disabled'});$.ajax({url:ajaxurl,type:'post',data:{action:'themify_regenerate_css_files_ajax',nonce:themify_js_vars.nonce,all:$('#tmp_regenerate_all_css').is(':checked')?1:0},success:function(e){t.removeAttr('disabled').attr('value','Regenerate CSS Files'),'finished'!==e&&alert(e)}})}),$('#builder-find-and-replace-btn').on('click',function(){''===$('#original_string').val()?alert('Please fill original value for search!'):confirm("WARNING: This will replace all data in your database. It can not be undone. Please backup your database before proceeding.")&&($(this).attr({value:'Replacing ...',disabled:'disabled'}),$.ajax({url:ajaxurl,type:'post',data:{action:'themify_get_builder_posts',from_ajax:!0,nonce:themify_js_vars.nonce},success:function(e){if(''==(e=JSON.parse(e)).posts)alert('No builder data found!'),$('#builder-find-and-replace-btn').removeAttr('disabled').attr('value','Replace');else for(var t,i=$('#original_string').val(),a=$('#replace_string').val(),n=1;n<=e.groups;++n)t={group:n,total:e.groups,originalString:i,replaceString:a},$.ajax({url:ajaxurl,type:'post',data:{action:'themify_find_and_replace_ajax',group_number:t.group,total_groups:t.total,original_string:t.originalString,replace_string:t.replaceString,nonce:themify_js_vars.nonce},success:function(e){-1!==e.indexOf('finished-')&&($('#builder-find-and-replace-btn').removeAttr('disabled').attr('value','Replace'),alert('Replace operation was completed successfully. '+e.replace('finished-','')+' strings found and replaced.'))}})}}))});{const N=document.getElementById('setting-page_builder_maintenance_page');null!==N&&N.addEventListener('mousedown',function(t){var i=this;$.ajax({url:ajaxurl,type:'POST',data:{action:'themify_load_maintenance_pages',nonce:themify_js_vars.nonce},success:function(e){i.innerHTML=e,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)&&(i.blur(),i.dispatchEvent(t))}})},{once:!0,passive:!0})}T(document.getElementsByClassName('license-link'));const b=document.getElementById('tb_option_flush_twitter'),x=(b&&b.addEventListener('click',function(e){e.preventDefault(),S(),$.ajax({url:ajaxurl,type:'POST',data:{action:'themify_twitter_flush',nonce:themify_js_vars.nonce},success:function(){I()}})}),document.getElementById('tf_font_import')),k=document.getElementById('tf_font_size_slider_wrap');if(x&&($(x).insertAfter('.wp-header-end'),document.getElementById('tf_font_import_submit').addEventListener('click',function(){S(),jQuery.ajax({type:'POST',url:ajaxurl,data:{action:'tf_import_font',nonce:themify_js_vars.nonce,font_name:x.querySelector('select').value},success:function(e){I(),e.success?location.reload():console.log(e.data)}})})),k){$("#tf_font_size_slider_wrap").appendTo('th#font_preview');let t=document.getElementById('tf_font_preview_style'),e=localStorage.getItem('tf_font_preview_size')||1,i=function(e){t.innerText='.font_preview span { font-size: '+e+'em; }'};i(e),$("#tf_font_size_slider").slider({value:e,min:.5,max:4,step:.1,slide:function(e,t){i(t.value),localStorage.setItem('tf_font_preview_size',t.value)}})}let w=document.getElementsByClassName('generate-child-theme');for(let t=0;t<w.length;t++)w[t].addEventListener('click',e=>{e.preventDefault(),window.confirm(w[t].dataset.confirm)&&(S(),$.ajax({url:ajaxurl,type:'POST',data:{action:'themify_generate_child_theme',nonce:themify_js_vars.nonce,import_customizer:w[t].closest('div').querySelector('input[type="checkbox"]').checked?1:0},success:e=>{I(),e.success?(w[t].classList.add('disabled'),w[t].closest('.tf_generate_child_theme').classList.add('tf_done')):window.alert(e.data[0].message)}}))});function j(e){$('[data-show-if-element="'+e+'"]').each(function(){var e=$(this),t=e.data('show-if-value'),i=$(e.data('show-if-element').toString());i.length<=0||(i=i.is(':checkbox')?i.is(':checked')?'true':'false':i.is(':radio')?i.filter(':checked').val():i.val().trim(),t=Array.isArray(t)?t:[t.toString()],void 0!==i&&-1!==$.inArray(i,t)?e.slideDown({duration:550}):e.slideUp({duration:550}))})}function C(e,i){var a=[],n=0;if(void 0!==e.data.actions&&$.each(e.data.actions,function(i,e){$.each(e,function(e,t){a.push({action:'themify_import_sample_actions',_action:i,nonce:themify_js_vars.nonce,data:t})})}),0===a.length)i();else for(let e=0;e<5;++e)!function t(){if(0!==a.length&&!(5<n)){const e=a.shift();++n,$.ajax({url:ajaxurl,dataType:'json',type:'POST',data:e,complete:function(e){--n,t(),n<1&&i()}})}}()}function S(){$(".tb_alert").addClass("busy").fadeIn(800)}function I(e){'error'===e?(e='error',$(".overlay, .prompt-box").delay(900).fadeIn(500),$('.prompt-box .show-error').show(),$('.prompt-box .show-error p').remove(),$('.prompt-box .error-msg').after("<p class=\"prompt-error\">undefined</p>"),$('.prompt-box .show-login').hide()):e='done',$(".tb_alert").removeClass("busy").addClass(e).delay(800).fadeOut(800,function(){$(this).removeClass(e)})}function O(e){e.preventDefault();const r=this,t=document.querySelector('.required-addons.themify-modal');let c=!1;if(t)if(r.dataset.id&&t.dataset.skin!==r.dataset.id)t.remove();else{if(!t.classList.contains('reload'))return $(t).fadeIn(),void E();t.classList.remove('reload'),c=t}const i=new FormData;i.append('action','themify_required_plugins_modal'),i.append('nonce',themify_js_vars.nonce),null===document.getElementById('license-modal')&&i.append('license','1'),r.dataset.plugins&&''!==r.dataset.plugins&&i.append('plugins',r.dataset.plugins),r.dataset.id&&''!==r.dataset.id&&i.append('skin',r.dataset.id),$('.tb_alert').addClass('busy').fadeIn(300),fetch(ajaxurl,{method:'POST',headers:new Headers({Accept:'application/json','X-Requested-With':'XMLHttpRequest'}),body:i}).then(e=>e.text()).then(function(e){let t=(new DOMParser).parseFromString(e,'text/html').getElementsByClassName('themify-modal')[0];!1!==c?(c.innerHTML=t.innerHTML,t=c):document.getElementById('themify').appendChild(t);const i=$(t);if(!1===c&&(i.fadeIn(),E()),$('.tb_alert').removeClass('busy').fadeOut(300),t.querySelector('.dismiss-import-notice').addEventListener('click',function(e){e.preventDefault(),i.fadeOut(300),E('close')}),T(t.getElementsByClassName('license-link')),r.classList.contains('import-sample-content')){var e=i,a=$(r);e.find('.proceed-import').off().on('click',function(e){var t;e.preventDefault(),e=$(this).parent().find('.tf_import_images input:checkbox').is(':checked'),t=$(this).closest('div').find('.erase-demo').is(':checked'),$.ajax({url:ajaxurl,dataType:'json',data:{action:'themify_import_sample_content',import_images:e?'yes':'no',clear_old_imports:t?'yes':'no',nonce:themify_js_vars.nonce},type:'POST',success:function(e){e.success?C(e,function(){a.find('span').text(a.attr('data-success')),I(),window.location=themify_js_vars.admin_url}):(I(),alert(e.data.error))},beforeSend:function(){a.find('span').text(a.attr('data-importing')),S()}})}).end().find('a.external-link').on('click',function(){window.location=$(this).attr('href')})}else if(r.classList.contains('skin-demo-import')){var e=r,n=i;const s=$(e),o=s.closest('.skin-preview').find('.skin-demo-content'),l=o.data('skin');n.fadeIn().find('.proceed-import').off().on('click',function(e){var t;e.preventDefault(),e=$(this).parent().find('.tf_import_images input:checkbox').is(':checked'),t=$(this).closest('div').find('.erase-demo').is(':checked'),$.ajax({url:ajaxurl,data:{action:'themify_import_sample_content',skin:l,import_images:e?'yes':'no',clear_old_imports:t?'yes':'no',nonce:themify_js_vars.nonce},type:'POST',success:function(e){e.success?C(e,function(){I(),window.location=themify_js_vars.admin_url}):(I(),alert(e.data.error))},beforeSend:function(){S()}})}).end().find('a.external-link').on('click',function(){window.location=$(this).attr('href'),E()})}i.find('.themify-ajax-installer').on('click',L)})}function E(e='open'){'open'===e?document.body.classList.add('themify-modal-active'):document.body.classList.remove('themify-modal-active')}function T(t){const i=t.length;if(0!==i){const s=document.getElementById('license-modal');if(null!==s){for(let e=i-1;-1<e;--e)t[e].addEventListener('click',function(e){e.preventDefault(),s.dataset.src=this.dataset.src,$(s).fadeIn(),E()});s.dataset.init||(s.dataset.init=!0,s.getElementsByClassName('close')[0].addEventListener('click',function(e){e.preventDefault(),$(s).fadeOut(300),E('close')}),s.getElementsByClassName('update-license')[0].addEventListener('click',function(e){e.preventDefault();const t=s.querySelector('[name="themify_username"]').value,i=s.querySelector('[name="updater_licence"]').value,a=e.target.closest('.themify-modal').dataset.src;if(''===t||''===i)alert(themify_js_vars.empty_li);else{const n=new FormData;n.append('action','themify_update_license'),n.append('nonce',themify_js_vars.nonce),n.append('src',a),n.append('themify_username',t),n.append('updater_licence',i),$('.tb_alert').addClass('busy').fadeIn(300),fetch(ajaxurl,{method:'POST',headers:new Headers({Accept:'application/json','X-Requested-With':'XMLHttpRequest'}),body:n}).then(e=>e.json()).then(function(e){if(!0===e.result){if('import'===a){const i=document.getElementsByClassName('required-addons')[0].dataset.skin;document.querySelector('.required-addons.themify-modal[data-skin="'+i+'"]').classList.add('reload'),$(''===i?'a.import-sample-content':'.skin-demo-import[data-id="'+i+'"]').trigger('click')}const t=document.getElementById('update-main');t.innerHTML=(new DOMParser).parseFromString(e.html,'text/html').body.innerHTML,D($(t)),ThemifyUpdater.updateThemeBtn(),s.remove(),'import'!==a&&$('.tb_alert').removeClass('busy').fadeOut(300)}else $('.tb_alert').removeClass('busy').fadeOut(300),alert(e.err)})}}))}}}function L(e){if(!this.dataset.loading){e.preventDefault();const i=this,a=i.classList.contains('themify-updater');(i.dataset.loading=!0)===a&&(i.dataset.ajax=document.querySelector('#update-main .themify-ajax-installer').dataset.ajax),S(),fetch(i.dataset.ajax,{headers:new Headers({'X-Requested-With':'XMLHttpRequest'})}).then(e=>e.text()).then(function(e){if(delete i.dataset.loading,i.dataset.required){const t=document.createElement('span');t.className='ti-check',i.parentNode.replaceChild(t,i)}else!0===a?(document.querySelector('.required-addons.themify-modal[data-skin="'+i.dataset.skin+'"]').classList.add('reload'),$(''===i.dataset.skin?'a.import-sample-content':'.skin-demo-import[data-id="'+i.dataset.skin+'"]').trigger('click')):window.location.reload();I('done')}).catch(function(e){I('error'),delete i.dataset.loading})}}function D(e){e.find('select').not('[multiple]').wrap('<div class="selectwrapper"></div>'),e.find('.selectwrapper').on('click',function(){$(this).toggleClass('clicked')})}$('.themify-ajax-installer').on('click',L),$(function(){const e=$('#themify .preview-icon');e.length&&e.each(function(){var e=$(this),t=e.attr('title');e.removeAttr('title').append('<span class="tm-option-title-fw">'+t+'</span>')})}),$('#themify_feed_settings select').on('change',function(){$(this).next().val($(this).val().join(','))})})}(jQuery);