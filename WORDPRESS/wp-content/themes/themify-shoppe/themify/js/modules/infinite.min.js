(($,S,j,E)=>{'use strict';let A=null,i=null;const N=[],w=(t,e)=>{null===i&&(i=new IntersectionObserver((e,t)=>{for(let t=e.length-1;-1<t;--t)!0===e[t].isIntersecting&&j.history.replaceState(null,null,e[t].target.getAttribute('data-tf-history'))},{rootMargin:'100% 0px -100% 0px'})),t.setAttribute('data-tf-history',I(e)),i.observe(t)},I=t=>S.UpdateQueryString('tf-scroll',null,t),T=t=>S.UpdateQueryString('tf-scroll',1,t),s=x=>{if(!0!==x.isWorking){x.isWorking=!0,x.status.classList.add('tf_scroll_request');let t,e={headers:new Headers({'X-Requested-With':'XMLHttpRequest'})};if(x.filter){const i=x.filter.hasAttribute('data-sort'),a=x.filter.querySelector('.cat-item.active');if(a){x.ajax_loading=a;const n=new FormData;if(n.append('action','themify_ajax_load_more'),n.append('module',x.filter.dataset.el),n.append('id',x.filter.dataset.id),n.append('page',a.dataset.p),!a.classList.contains('cat-item-all')){const l=a.getAttribute('class').replace(/(current-cat)|(cat-item)|(-)|(active)/g,'').replace(' ','');n.append('tax',l.trim())}if(i){const s=x.filter.querySelector('.tf_ajax_sort_order.active'),o=x.filter.querySelector('.tf_ajax_sort_order_by .active');s&&n.append('order',s.dataset.type),o&&n.append('orderby',o.dataset.orderBy)}e.method='POST',e.body=n,t=themify_vars.ajax_url}}x.ajax_loading||(t=T(x.button.href)),fetch(t,e).then(t=>t.text()).then(t=>{const e=(new DOMParser).parseFromString(t,'text/html'),i=e.querySelector(x.id),a=I(x.button.href),n=x.container;let l=null;if(null!==i){{t=n;var s=e;var o=!!x.ajax_loading;S.lazyScroll(S.selectWithParent('[data-lazy]',t),!0);const g=$(t);if(!o&&void 0!==j.Isotope){const h=j.Isotope.data(t);if(h){const p=t.previousElementSibling;if(null!==p&&p.classList.contains('post-filter')){const m=p.querySelector('.cat-item.active:not(.cat-item-all)');void 0!==m&&$(m).trigger('click.tf_isotop_filter')}}}g.triggerHandler('infinitebeforeloaded.themify',s),S.trigger('infinitebeforeloaded.themify',[g,s]),setTimeout(()=>{S.trigger('tf_isotop_layout')},1500)}const f=e.createDocumentFragment(),u=S.convert(i.children);if(!(l=null===(l=(l=i.getElementsByClassName('load-more-button')[0])||i.nextElementSibling)||(l=l.classList.contains('load-more-button')?l:l.children[0])&&l.classList.contains('load-more-button')?l:null)||'A'===l.tagName||(l=l.children[0])&&'A'===l.tagName||(l=null),void 0!==u[0]){for(let t=0,e=u.length;t<e;++t)f.appendChild(u[t]);n.appendChild(f),x.history&&w(u[0],a);{var r=u;o=n;var c=x;const b=r.length,y=$(o),_=void 0!==j.Isotope?j.Isotope.data(o):null;null===A&&(A=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),r[0].className+=' tf_firstitem';var d=0;for(let t=0;t<b;++t)r[t].style.opacity=0,S.imagesLoad(r[t],t=>{if(A){const e=t.querySelector('img[srcset]');null!==e&&(e.outerHTML=e.outerHTML)}if(++d,_&&_.appended(t),t.style.opacity='',d===b){if(_||y[0].classList.contains('auto_tiles')){if(!c.ajax_loading){const a=y[0].previousElementSibling;null!==a&&a.classList.contains('post-filter')&&S.body.triggerHandler('themify_isotop_filter',[a])}y[0].classList.contains('auto_tiles')&&S.autoTiles(y[0])}const i=$(r);for(let t=0;t<b;++t)S.lazyScroll(S.convert(S.selectWithParent('[data-lazy]',r[t])).reverse(),!0);if(y.triggerHandler('infiniteloaded.themify',[i]),S.trigger('infiniteloaded.themify',[y,i]),'scroll'===c.scrollToNewOnLoad){let t=y[0].getElementsByClassName('tf_firstitem'),e=(t=t[t.length-1],$(t).offset().top);const n=800<=e?800+Math.abs(e/10):800,l=E.getElementById('headerwrap');null!==l&&(l.classList.contains('fixed-header')||S.body[0].classList.contains('fixed-header'))&&(e-=$(l).outerHeight(!0)),(!1===c.scrollThreshold||e-E.docElement.scrollTop>c.scrollThreshold)&&S.scrollTo(e,n)}S.fontAwesome(),S.loadWPEmbed(E.getElementsByClassName('wp-embedded-content')),S.checkLargeImages()}})}}else l=null;x.ajax_loading&&null===l&&(x.ajax_loading.dataset.done=!0,x.filter.parentNode.classList.add('tb_hide_loadmore'))}if(x.ajax_loading)x.ajax_loading.dataset.p=parseInt(x.ajax_loading.dataset.p)+1,x.isWorking=null;else{if(null===l)x.button.remove(),x.button=null;else{const v=T(l.href);void 0!==x.prefetchBtn&&void 0===N[v]&&(N[v]=!0,x.prefetchBtn.setAttribute('href',v)),x.button.href=v,j.addEventListener('scroll',function(t,e){t.isWorking=null}.bind(null,x),{passive:!0,once:!0})}if(void 0!==j.ga){const L=e.createElement('a');L.href=a,ga('set','page',L.pathname),ga('send','pageview')}x.history&&j.history.replaceState(null,null,a)}return x.status.classList.remove('tf_scroll_request'),i}).catch(t=>{console.warn('InfiniteScroll error.',t)})}};S.on('tf_infinite_init',(t,n)=>{let e=(t=t instanceof jQuery?t[0]:t).getElementsByClassName('load-more-button')[0];if(e=e||t.nextElementSibling){let i=e;if((e.classList.contains('load-more-button')||(e=e.children[0])&&e.classList.contains('load-more-button'))&&('A'===e.tagName||(e=e.children[0])&&'A'===e.tagName)&&(n.id||(n.id=t.getAttribute('id'),n.id?n.id='#'+n.id:n.id='.'+t.className.split(' ').join('.'),n.id))){S.cssLazy.tf_infinite||(S.cssLazy.tf_infinite=!0,S.LoadCss(S.url+'/css/modules/infinite.css'));const a=E.createElement('div');if(a.className='tf_load_status tf_loader tf_clear tf_hide',t.parentNode.insertBefore(a,t.nextSibling),n.status=a,n.button=e,(n.container=t).classList.contains('tb_ajax_pagination')){const l=t.previousElementSibling;l&&l.classList.contains('post-filter')&&(n.filter=l)}!1!==n.scrollThreshold?j.addEventListener('scroll',()=>{const t=E.createElement('link'),e=T(n.button.getAttribute('href'));var a;t.setAttribute('as','document'),t.setAttribute('rel','prefetch'),t.setAttribute('href',e),n.button.parentNode.insertBefore(t,n.button.nextSibling),n.prefetchBtn=t,N[e]=!0,w(n.container.children[0],j.location.href),a=n,new IntersectionObserver((e,i)=>{for(let t=e.length-1;-1<t;--t)!0===e[t].isIntersecting&&(null===a.button?i.disconnect():s(a))},{threshold:.1}).observe(i)},{passive:!0,once:!0}):(w(t.children[0],j.location.href),e.style.display='inline-block',e.addEventListener('click',t=>{t.preventDefault(),delete n.ajax_loading,s(n)}))}}})})(jQuery,Themify,window,document);