((L,b)=>{'use strict';L.on('themify_overlay_search_init',e=>{let a,s=e.closest('.tf_search_form');if(!s){if(!(s=b.getElementById('searchform')))return;s=s.closest('.tf_search_form')}const t=s.getElementsByTagName('form')[0],r=!!t.closest('.tf_search_overlay'),l=t.querySelector('input[name="s"]'),c=new URL(t.getAttribute('action')).searchParams,i=c.get('term'),n=c.get('post_type'),o={},f=b.createElement('div'),d=b.createElement('div'),_=new Headers({Accept:'application/json','X-Requested-With':'XMLHttpRequest'}),h=new FormData;if(f.className='tf_search_result tf_w tf_box tf_hide',d.className='tf_loader tf_hide',r){s=b.createElement('div');const p=b.createElement('div'),v=b.createElement('a'),g=b.createElement('span'),y=function(){s.classList.toggle('search-active',0<l.value.length)};e.addEventListener('click',function(e){e.preventDefault(),y(),s.classList.add('tf_fd_in'),l.focus(),L.body[0].style.overflowY='hidden',L.body[0].classList.add('searchform-slidedown')}),v.addEventListener('click',function(e){e.preventDefault(),y(),a&&a.abort(),a=null,s.classList.remove('tf_fd_in'),L.body[0].style.overflowY='',L.body[0].classList.remove('searchform-slidedown')}),s.className='tf_search_lightbox tf_hide tf_w tf_box tf_opacity tf_h tf_scrollbar',p.className='tf_searchform_inner tf_opacity',v.className='tf_close_search tf_close',g.className='screen-reader-text',v.appendChild(g),s.appendChild(p),s.appendChild(v),t.after(s),p.appendChild(t)}else f.className+=' tf_scrollbar',f.setAttribute('tabindex','-1');l.after(f),l.before(d);const m=e=>{let a=e.getAttribute('href').replace('#','');'all'===a&&(a='item');const s=e.closest('li'),r=f.getElementsByClassName('tf_search_item');for(let e=r.length-1;-1<e;--e)r[e].classList.remove('tf_fd_in'),r[e].classList.add('tf_fd_out');for(let e=s.parentNode.children,t=e.length-1;-1<t;--t)'LI'===e[t].tagName&&e[t].classList.remove('active');s.classList.add('active'),setTimeout(()=>{const t=f.getElementsByClassName('tf_view_button'),e=f.querySelector('#tf_result_link_'+a);for(let e=t.length-1;-1<e;--e)t[e].classList.add('tf_hide');e&&e.classList.remove('tf_hide');for(let t=r.length-1;-1<t;--t){let e=r[t].classList;e.contains('tf_search_'+a)?(e.remove('tf_hide','tf_fd_out'),e.add('tf_fd_in')):e.add('tf_hide')}},401)},u=()=>{let e=f.querySelector('.tf_search_tab .active a');if(e=e&&e.getAttribute('href')){const t=f.querySelector('.tf_search_tab a[href="'+e+'"]');t&&m(t)}};f.addEventListener('click',function(e){const t=e.target;'A'===t.tagName&&t.closest('.tf_search_tab')&&(e.preventDefault(),m(t))}),h.append('action','themify_search_autocomplete'),h.append('post_type',n||''),i&&(h.append('term',i),h.append('tax',c.get('tax'))),l.autocomplete='off',l.addEventListener('keyup',function(e){setTimeout(()=>{const t=this.value.trim();a&&a.abort(),t?(s.classList.add('search-active'),o[t]?(f.innerHTML=o[t],u()):(s.classList.add('tf_search_loading'),h.set('s',t),a=new AbortController,fetch(themify_vars.ajax_url,{signal:a.signal,method:'POST',headers:_,body:h}).then(e=>e.text()).then(e=>{e&&(f.innerHTML=e,u(),o[t]=e)}).catch(e=>{'AbortError'!==e.name&&console.error('Uh oh, an error!',e)}).finally(()=>{s.classList.remove('tf_search_loading'),a=null}))):(s.classList.remove('search-active'),f.innerHTML='')},100)},{passive:!0}),t.classList.remove('tf_hide'),l.value.trim()&&L.triggerEvent(l,'keyup')})})(Themify,document);