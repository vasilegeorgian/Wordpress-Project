((x,w)=>{'use strict';const k=x.isTouch?window.PointerEvent?'pointerdown':'touchstart':'click',B=/iPhone|iPad|iPod|Mac OS/i.test(window.navigator.userAgent),P=t=>{t=1/0===t?0:t;const e=new Date(1e3*t).toISOString().substr(11,8).split(':');return'00'===e[0]&&e.splice(0,1),e.join(':')},i=(n,t)=>{if(!n.previousElementSibling||!n.previousElementSibling.classList.contains('tf_audio_container')){const e=w.createElement('div'),i=w.createElement('div'),l=w.createElement('div'),d=w.createElement('div'),o=w.createElement('div'),r=(w.createElement('div'),w.createElement('div')),c=w.createElement('input'),p=w.createElement('input'),u=w.createElement('div'),f=w.createElement('div'),m=w.createElement('div'),_=w.createElement('button'),v=w.createElement('button'),h=w.createElement('div'),g=n.parentNode.closest('.track'),y=w.createElement('div'),E=t&&t.tracks&&!0;let a=!0,s=!1;if(e.className='tf_audio_container tf_w tf_rel tf_box',i.className='tf_audio_wrap tf_w tf_rel tf_box',m.className='tf_audio_controls',l.className='tf_audio_progress_wrap tf_rel tf_textl',d.className='tf_audio_progress_loaded tf_w tf_h tf_abs',o.className='tf_audio_progress_current tf_w tf_h tf_abs',c.className='tf_audio_progress_range tf_h tf_abs',p.min=c.min=0,p.max=c.max=100,p.type=c.type='range',c.value=0,p.value='50%',u.className='tf_audio_volumn_wrap',f.className='tf_audio_volumn_inner',p.className='tf_audio_volumn_range tf_h tf_overflow',_.className='tf_audio_mute',v.className='tf_auido_play',v.tabIndex=_.tabIndex=0,v.type=_.type='button',n.muted&&(_.className+=' tf_muted'),h.className='tf_audio_current_time',y.className='tf_audio_total_time',r.className='tf_audio_hover tf_abs tf_hide tf_box tf_textc',h.textContent=P(n.currentTime),y.textContent=P(n.duration),v.addEventListener(k,function(t){'click'===t.type&&(t.preventDefault(),t.stopPropagation()),n.paused?n.play():n.pause()},{passive:'click'!==k}),g){const N=g.getElementsByClassName('track-title')[0];N&&N.addEventListener(k,function(t){t.preventDefault(),x.triggerEvent(v,k)})}if(_.addEventListener(k,function(t){'click'===t.type&&(t.preventDefault(),t.stopPropagation()),n.muted=!n.muted},{passive:'click'!==k}),x.isTouch||l.addEventListener('mouseenter',function(){if(!isNaN(n.duration)){r.classList.remove('tf_hide');const a=this.clientWidth,s=parseFloat(r.clientWidth/2),i=n.duration,t=function(t){const e=void 0!==t.layerX?t.layerX:t.offsetX;0<e-s&&t.layerX<=a&&(r.style.transform='translateX('+(e-s)+'px)',r.textContent=P(parseFloat(e/a)*i))};this.addEventListener('mouseleave',function(){r.classList.add('tf_hide'),this.removeEventListener('mousemove',t,{passive:!0})},{passive:!0,once:!0}),this.addEventListener('mousemove',t,{passive:!0})}},{passive:!0}),c.addEventListener('input',function(t){if(t.preventDefault(),t.stopPropagation(),!isNaN(n.duration)){n.paused||!0!==a||n.pause(),s=!0;const e=parseInt(this.value);n.currentTime=100===e?n.duration-1:parseFloat(e*n.duration/100).toFixed(4)}}),c.addEventListener('change',function(t){t.preventDefault(),t.stopPropagation(),isNaN(n.duration)||(s=a=!1,n.paused&&n.play().then(t=>{a=!0}).catch(t=>{a=!0}))}),n.addEventListener('progress',function(){0<this.buffered.length&&(d.style.transform='scaleX('+parseFloat(this.buffered.end(0)/this.duration).toFixed(4)+')')},{passive:!0}),n.addEventListener('durationchange',function(){y.textContent=P(this.duration)},{passive:!0}),n.addEventListener('waiting',function(){l.classList.add('tf_audio_waiting'),this.addEventListener('playing',function(){l.classList.remove('tf_audio_waiting')},{passive:!0,once:!0})},{passive:!0}),n.addEventListener('emptied',function(){l.classList.add('tf_audio_waiting'),this.addEventListener('playing',function(){l.classList.remove('tf_audio_waiting')},{passive:!0,once:!0})},{passive:!0}),n.addEventListener('pause',function(){v.classList.remove('tf_audio_playing')},{passive:!0}),n.addEventListener('play',function(){v.classList.add('tf_audio_playing');const e=w.getElementsByTagName('audio');for(let t=e.length-1;-1<t;--t)e[t]!==this&&e[t].pause()},{passive:!0}),n.addEventListener('timeupdate',function(){if(!isNaN(this.duration)){h.textContent=P(this.currentTime);let t=parseFloat(this.currentTime/this.duration);o.style.transform='scaleX('+t.toFixed(4)+')',!1===s&&(c.value=parseInt(100*t))}},{passive:!0}),n.addEventListener('volumechange',function(){0!==this.volume&&_.classList.remove('tf_mute_disabled'),!0===this.muted||0===this.volume?(0===this.volume&&_.classList.add('tf_mute_disabled'),_.classList.add('tf_muted')):_.classList.remove('tf_muted')},{passive:!0}),l.appendChild(d),l.appendChild(o),l.appendChild(c),l.appendChild(r),u.appendChild(_),!1===B&&(p.addEventListener('input',function(t){t.preventDefault(),t.stopPropagation(),n.volume=parseFloat(this.value/100).toFixed(3)}),f.appendChild(p),u.appendChild(f)),i.appendChild(m),i.appendChild(h),i.appendChild(l),i.appendChild(y),i.appendChild(u),e.appendChild(i),E){const b=e.appendChild(((t,u)=>{const f=t.tracks,m=!!t.artists,_=!!t.images,l=!!t.tracknumbers,v=w.createElement('div'),d=w.createElement('div');d.className='tf_audio_playlist',v.className='tf_playlist_current';for(let n=0,t=f.length;n<t;++n)if(f[n].src){f[n].src=f[n].src.trim();let t=w.createElement('div'),e=w.createElement('a'),a=new Audio(f[n].src),s=w.createElement('div'),i=w.createElement('span');if(!f[n].type||a.canPlayType(f[n].type)){if(t.className='tf_playlist_item tf_w tf_rel',e.href=f[n].src,e.className='tf_playlist_caption tf_w',s.className='tf_playlist_length',!isNaN(a.duration)||f[n].meta&&f[n].meta.length_formatted?(s.textContent=isNaN(a.duration)?f[n].meta.length_formatted:P(a.duration),a=null):(t.className+=' tf_lazy',a.addEventListener('durationchange',function(){s.textContent=P(this.duration),a=null,t.classList.remove('tf_lazy')},{passive:!0,once:!0})),1==l&&(e.textContent=n+1+'.'),i.className='tf_playlist_title',f[n].caption?i.textContent=f[n].caption:f[n].title&&(i.textContent=f[n].title),1==m&&f[n].meta&&f[n].meta.artists){let t=w.createElement('span');t.className='tf_playlist_artist',t.textContent='-'+f[n].meta.artists,e.appendChild(t)}e.appendChild(i),t.appendChild(e),t.appendChild(s),d.appendChild(t)}else f.slice(n,1)}else f.slice(n,1);let h=!0;return d.addEventListener(k,function(t){const e=t.target.closest('.tf_playlist_caption'),a=e.parentNode.classList.contains('tf_audio_current');if(e){if(t.preventDefault(),t.stopPropagation(),!a||u.paused)if(a)u.play();else{const s=this.getElementsByClassName('tf_audio_current')[0],i=x.convert(this.children).indexOf(e.parentNode),n=w.createElement('div'),l=w.createElement('span');if(n.className='tf_playlist_caption',!(l.className='tf_playlist_title')===h&&(u.pause(),u.addEventListener('loadedmetadata',function(){this.play()},{passive:!0,once:!0}),u.setAttribute('src',e.getAttribute('href')),u.load()),s&&s.classList.remove('tf_audio_current'),e.parentNode.classList.add('tf_audio_current'),v.innerHTML='',f[i]){const d=f[i];if(_&&d.thumb&&d.thumb.src){const o=new Image,r=(void 0!==d.thumb.width&&(o.width=d.thumb.width),void 0!==d.thumb.height&&(o.height=d.thumb.height),o.decode='async',o.src=d.thumb.src,w.createElement('div'));r.className='post-image',o.decode().then(()=>{r.appendChild(o)}),v.appendChild(r)}if(l.textContent=d.title||d.caption||'',n.appendChild(l),f.meta){if(f.meta.album){const c=w.createElement('span');c.className=' tf_playlist_album',c.textContent=f.meta.album,n.appendChild(c)}if(m&&f.meta.artists){const p=w.createElement('span');p.className=' tf_playlist_artist',p.textContent=f.meta.artists,n.appendChild(p)}}v.appendChild(n)}}h=!1}}),u.parentNode.insertBefore(v,u),x.triggerEvent(d.getElementsByClassName('tf_playlist_caption')[0],k),d})(t,n)),C=w.createElement('button'),L=w.createElement('button');C.className='tf_playlist_prev tf_play_disabled',L.className='tf_playlist_next',b.children.length<=1&&(L.className+=' tf_play_disabled'),C.tabIndex=L.tabIndex=0,C.type=L.type='button',m.addEventListener(k,function(t){const e=t.target,a=e.classList;if(!a.contains('tf_play_disabled')&&(a.contains('tf_playlist_prev')||a.contains('tf_playlist_next'))){'click'===t.type&&(t.preventDefault(),t.stopPropagation());const s=b.getElementsByClassName('tf_audio_current')[0];if(s){const i=a.contains('tf_playlist_prev')?s.previousElementSibling:s.nextElementSibling;i&&(x.triggerEvent(i.getElementsByClassName('tf_playlist_caption')[0],k),a.contains('tf_playlist_prev')?(L.classList.remove('tf_play_disabled'),a.toggle('tf_play_disabled',!i.previousElementSibling)):(C.classList.remove('tf_play_disabled'),a.toggle('tf_play_disabled',!i.nextElementSibling)))}}},{passive:'click'!==k}),n.addEventListener('ended',function(){if(L.classList.contains('tf_play_disabled')){if(this.hasAttribute('data-loop')||this.hasAttribute('loop')){const t=b.getElementsByClassName('tf_playlist_caption')[0];t&&(C.classList.add('tf_play_disabled'),L.classList.toggle('tf_play_disabled',b.children.length<=1),x.triggerEvent(t,k))}}else x.triggerEvent(L,k)},{passive:!0}),m.appendChild(C),m.appendChild(v),m.appendChild(L)}else m.appendChild(v);n.parentNode.classList.remove('tf_lazy'),n.parentNode.insertBefore(e,n)}};x.on('tf_audio_init',(t,e)=>{t instanceof jQuery?t=t.get():void 0===t.length&&(t=[t]);var a=t,s=e;for(let e=a.length-1;-1<e;--e){let t=a[e];if(!s){let e=t.parentNode.parentNode;if(e.classList.contains('wp-audio-playlist')){let t=e.getElementsByClassName('tf-playlist-script')[0];(t=t||e.getElementsByClassName('wp-playlist-script')[0])&&'audio'!==(s=JSON.parse(t.textContent)).type&&(s=!1)}}if(!t.hasAttribute('src')&&!t.getElementsByTagName('source')[0]){if(!s||!s.tracks)continue;let a=s.tracks[0].src;if(!a)for(let t=1,e=s.tracks.length;t<e;++t)if(s.tracks[t].src){a=s.tracks[t].src;break}if(!a)continue;t.setAttribute('src',a)}4===t.readyState?i(t,s):x.requestIdleCallback(()=>{t.addEventListener('loadedmetadata',function(){i(this,s)},{passive:!0,once:!0}),t.setAttribute('preload','metadata'),!0===B&&t.load()},200)}})})(Themify,document);