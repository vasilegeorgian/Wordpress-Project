(($,b,C,w)=>{'use strict';let S=null,f=null,y=null,h=!1,c=null;const _=[],v={'list-post':100,'list-large-image':100,'list-thumb-image':100,grid2:48.4,'grid2-thumb':48.4,grid3:31.2,grid4:22.6,grid5:17.44,grid6:14},x={},t=()=>{!0!==h&&(h=!0,null!==f&&cancelAnimationFrame(f),f=requestAnimationFrame(()=>{for(let e=_.length-1;-1<e;--e)try{_[e].element.classList.contains('masonry-done')?!0!==_[e].isWorking&&(_[e].isWorking=!0,_[e].once('layoutComplete',function(){this.isWorking=!1}),_[e].layout()):_.splice(e,1)}catch(t){_.splice(e,1)}h=!1}))};b.on('tf_isotop_init',(o,s)=>{for(let a=(o=void 0===o.length?[o]:o).length-1;-1<a;--a)b.requestIdleCallback(()=>{{var t=o[a],e=s;e&&'object'==typeof e||('0'===(e={layoutMode:t.getAttribute('data-layout'),gutter:t.getAttribute('data-gutter'),columnWidth:t.getAttribute('data-column'),itemSelector:t.getAttribute('data-selector'),fitWidth:'1'===t.getAttribute('data-fit'),percentPosition:'0'!==t.getAttribute('data-percent')}).gutter&&(e.gutter=!1),'0'===e.columnWidth&&(e.columnWidth=!1)),e.layoutMode||(t.classList.contains('packery-gallery')?(e.layoutMode='packery',e.columnWidth=e.gutter=!1):t.classList.contains('masonry-fit-rows')&&(e.layoutMode='fitRows'));const u={originLeft:!b.isRTL,resize:!1,containerStyle:null,onceLayoutComplete:e.onceLayoutComplete,layoutComplete:e.layoutComplete,arrangeComplete:e.arrangeComplete,removeComplete:e.removeComplete,filterCallback:e.filterCallback},g=e.layoutMode||'masonry';u.layoutMode=g,u[g]={},u[g].columnWidth=e.columnWidth,u[g].gutter=e.gutter,e.itemSelector?u.itemSelector=e.itemSelector:u.itemSelector=t.classList.contains('products')?'.products>.product':t.classList.contains('gallery-wrapper')?'.item':'.loops-wrapper > .post',u.stagger=e.stagger||30,!0===e.fitWidth&&(u[g].fitWidth=!0),e.stamp&&(u.stamp=e.stamp),!0===e.fitWidth?u.percentPosition=!1:u.percentPosition=void 0===e.percentPosition||e.percentPosition,b.imagesLoad(t,a=>{const t=a.previousElementSibling;let o='',e=0,s=!1!==u[g].gutter&&!a.classList.contains('no-gutter'),i=a.getElementsByClassName('gutter-sizer')[0];const l=Isotope.data(a),r=()=>{i&&(i.remove(),i=!1)};if(l&&(l.destroy(),r()),a.classList.contains('auto_tiles'))null!==t&&t.classList.contains('post-filter')&&b.trigger('themify_isotop_filter',[t,void 0,u.filterCallback]);else{for(let t=a.classList,e=t.length-1;-1<e;--e)if(void 0!==v[t[e].trim()]){o=t[e].trim();break}if('list-post'===o||'list-large-image'===o||'list-thumb-image'===o){if(null===t||!t.classList.contains('post-filter'))return void r();s=!1}if(!x.masonry_done){x.masonry_done=!0;const d='.masonry>.post,.products.masonry>.product{animation-fill-mode:backwards;transition:none;animation:none;clear:none!important;margin-right:0!important;margin-left:0!important}.masonry-done{opacity:1}';null===S?((S=w.createElement('style')).innerText=d,w.head.prepend(S)):S.innerText+=d}if(!0===s){if(i?e=i:((e=w.createElement('div')).className='gutter-sizer',a.insertBefore(e,a.firstChild)),!a.classList.contains('tf_fluid')){let e='';const p=a.classList.contains('products'),m=a.classList.contains('gutter-narrow')?1.6:3.2;if(!x[m+p]){x[m+p]=!0;let t=p?'.products':'';1.6==m&&(t+='.gutter-narrow'),''!==t&&(t+='>'),e+=t+'.gutter-sizer{width:'+m+'%}'}x.contain||(x.contain=!0,e+='.gutter-sizer{contain:paint style size}@media (max-width:680px){.gutter-sizer{width:0}}'),e&&(S.innerText=e+S.innerText)}}else r();u[g].gutter=e,a.classList.add('masonry-done','tf_rel');const c=new Isotope(a,u);var n;_.push(c),n=a,C.ResizeObserver?(null===y&&(y=new ResizeObserver((a,e)=>{setTimeout(()=>{!0!==h&&(null!==f&&cancelAnimationFrame(f),h=!0,f=requestAnimationFrame(()=>{for(let t=a.length-1;-1<t;--t)if(w.contains(a[t].target)){let e=a[t].target.closest('.masonry-done');if(e){let t=C.Isotope.data(e);t&&!0!==t.isWorking&&(t.isWorking=!0,t.once('layoutComplete',function(){this.isWorking=!1}),t.layout())}}else e.unobserve(a[t].target);h=!1}))},800)})),setTimeout(()=>{y.observe(n)},300)):(y=null===y?new MutationObserver(t=>{if(t[0]&&t[0].target&&t[0].target.nodeType!==Node.TEXT_NODE){const e=t[0].target.closest('.masonry-done');e&&setTimeout(()=>{b.imagesLoad(e,()=>{const t=C.Isotope.data(e);t&&(null!==f&&cancelAnimationFrame(f),f=requestAnimationFrame(()=>{t.layout()}))})},1200)}}):y).observe(n,{attributes:!0,attributeOldValue:!1,characterDataOldValue:!1,childList:!0,subtree:!0,attributeFilter:['data-lazy','src','class']}),null!==t&&t.classList.contains('post-filter')&&b.trigger('themify_isotop_filter',[t,c,u.filterCallback]),c.revealItemElements(c.items),u.onceLayoutComplete&&c.once('layoutComplete',u.onceLayoutComplete),u.layoutComplete&&c.on('layoutComplete',u.layoutComplete),u.arrangeComplete&&c.on('arrangeComplete',u.arrangeComplete),u.removeComplete&&c.on('removeComplete',u.removeComplete),c.layout()}})}},500)}).on('themify_isotop_filter',(f,t,y)=>{if(!f.hasAttribute('data-done')){f.setAttribute('data-done',1);const d=f.children,h=d.length,s=f.nextElementSibling,_=f.hasAttribute('data-ajax'),v=!0===_&&f.hasAttribute('data-sort');let o=0;if(!x.post_filter){x.post_filter=!0;const e='.post-filter{transition:opacity .2s ease-in-out}';null===S?((S=w.createElement('style')).innerText=e,w.head.prepend(S)):S.innerText+=e}if(!1===_)for(let a=h-1;-1<a;--a){let t=d[a].getAttribute('class').replace(/(current-cat)|(cat-item)|(-)|(active)/g,'').replace(' ',''),e=s.querySelector('.cat-'+t);null===e||e.parentNode!==s?(d[a].style.display='none',++o):d[a].style.display=''}if(1<h-o?(f.classList.remove('tf_opacity'),f.style.display=''):f.style.display='none',t||s.classList.contains('auto_tiles')){let c;const L=function(p){p.preventDefault(),f.parentNode.classList.remove('tb_hide_loadmore');const m=p.target.closest('.cat-item');if(m){let d='*';const u=this.nextElementSibling;if(m.classList.contains('active')){if(m.classList.remove('active'),!0===v)return void b.triggerEvent(f.querySelector('.cat-item-all'),'click')}else{const t=this.querySelector('.cat-item.active');if(t&&t.classList.remove('active'),m.classList.contains('cat-item-all')||(d=m.getAttribute('class').replace(/(current-cat)|(cat-item)|(-)|(active)/g,'').replace(' ','')),m.dataset.p||(m.dataset.p=1),!0===_&&(m.dataset.done&&f.parentNode.classList.add('tb_hide_loadmore'),m.dataset.empty?f.parentNode.classList.add('tb_empty_filter'):f.parentNode.classList.remove('tb_empty_filter')),!(!0!==_||m.dataset.done||m.dataset.loading||m.dataset.init)){m.dataset.init=!0,m.dataset.loading=!0,u.parentNode.classList.contains('tf_ajax_filter_loading')?c.abort():u.parentNode.classList.add('tf_ajax_filter_loading'),c=new AbortController;const g=this,e=new FormData;if(e.append('action','themify_ajax_load_more'),e.append('type','module'),e.append('module',f.dataset.el),e.append('id',f.dataset.id),e.append('page',m.dataset.p),'*'!==d&&e.append('tax',d),!0===v){const a=f.querySelector('.tf_ajax_sort_order.active'),o=f.querySelector('.tf_ajax_sort_order_by .active');a&&e.append('order',a.dataset.type),o&&e.append('orderby',o.dataset.orderBy)}return void fetch(themify_vars.ajax_url,{signal:c.signal,headers:new Headers({'X-Requested-With':'XMLHttpRequest'}),method:'POST',body:e}).then(t=>t.text()).then(t=>{const e=(new DOMParser).parseFromString(t,'text/html'),a=e.querySelector('.'+f.dataset.el+' .loops-wrapper'),o=e.querySelector('.load-more-button');let s,i;if(null!==a){s=b.convert(a.children);const l=e.createDocumentFragment(),r=s.length;if(void 0!==s[0]){for(let t=0;t<r;++t)s[t].className+=' tf_opacity',l.appendChild(s[t]);f.dataset.reload&&(i=u.querySelectorAll('.post'),delete f.dataset.reload),u.appendChild(l)}if(null===o)m.dataset.done=!0,f.parentNode.className+=' tb_hide_loadmore';else if('*'===d){const n=u.parentNode.querySelector('.load-more-button');n&&(n.href=n.dataset.url,n.dataset.page=o.dataset.page)}if(0<s.length)m.dataset.p=parseInt(m.dataset.p)+1,b.trigger('tf_isotop_append',[{new:s,remove:i},u,()=>{u.parentNode.classList.remove('tf_ajax_filter_loading'),L.bind(g)(p)}]);else{if(m.dataset.empty=!0,null===u.parentNode.querySelector('.tb_empty_filter_msg')){const c=e.createElement('span');c.className='tb_empty_filter_msg tf_hide',c.innerText=themify_vars.nop,u.parentNode.appendChild(c)}u.parentNode.classList.remove('tf_ajax_filter_loading'),L.bind(g)(p)}}}).catch(t=>{console.warn('Ajx filter error!',t)})}!0===_&&m.dataset.loading&&delete m.dataset.loading,m.className+=' active'}if(null!==u){f.hasAttribute('data-hash')&&(m.classList.contains('active')&&m.dataset.id?location.hash=m.dataset.id:-1<C.location.hash.indexOf(f.dataset.hash)&&(C.history&&C.history.pushState?C.history.pushState('','',C.location.pathname):C.location.href=C.location.href.replace(/#.*$/,'#')));let e=C.Isotope.data(u);if(u.classList.contains('auto_tiles')){const s=u.children;for(let t=s.length-1;-1<t;--t)s[t].classList.contains('post')&&!s[t].style.width&&(s[t].style.width=s[t].offsetWidth+'px',s[t].style.height=s[t].offsetHeight+'px');if(u.classList.add('masonry-done'),!e){let t;b.w<680?t=0:(t=C.getComputedStyle(u).getPropertyValue('grid-row-gap'))?t=parseFloat(t):'0'!=t&&(t=5),e=new Isotope(u,{layoutMode:'packery',packery:{gutter:t},resize:!1})}if('*'===d){const i=function(){this.off('arrangeComplete',i),setTimeout(()=>{if('*'===d){const e=this.element.children;for(let t=e.length-1;-1<t;--t)e[t].classList.contains('post')&&(e[t].style.width=e[t].style.height=e[t].style.position=e[t].style.left=e[t].style.top='');this.element.classList.remove('masonry-done'),this.element.style.height=this.element.style.position=''}},20)};e.once('arrangeComplete',i)}}e&&(d=!0===_?'*'===d?'.initial-cat':'.ajax-cat-'+d:'*'===d?d:'.cat-'+d.trim()+',.cat-all',e.arrange({filter:d}),y&&y.call(e,m,d))}}else if(!0===v){const l=p.target.closest('.tf_ajax_sort_order')||p.target.closest('[data-order-by]')?p.target:null;if(null!==l&&!l.classList.contains('active')){const r=l.parentNode.querySelector('.active');r&&r.classList.remove('active'),l.className+=' active';for(let t=h-1;-1<t;--t)delete d[t].dataset.init,delete d[t].dataset.done,delete d[t].dataset.p;f.dataset.reload=!0;const n=f.querySelector('.cat-item.active')||f.querySelector('.cat-item-all');n&&(n.classList.remove('active'),b.triggerEvent(n,'click'))}}},a=(f.addEventListener('click',L),C.location.hash.replace('#',''));if(''!==a&&'#'!==a){const i=f.querySelector('[data-id="'+a+'"]');i&&i.click()}}}}).on('tf_isotop_layout',t).on('tfsmartresize',t).on('tf_isotop_append',(o,t,s)=>{const i=o.new.length,l=$(t),r=void 0!==C.Isotope?C.Isotope.data(t):null;null===c&&(c=/^((?!chrome|android).)*safari/i.test(navigator.userAgent));let n=0;for(let a=0;a<i;++a)o.new[a].style.display='none',b.imagesLoad(o.new[a],t=>{if(c){const e=t.querySelector('img[srcset]');null!==e&&(e.outerHTML=e.outerHTML)}if(++n,r&&r.appended(t),o.new[a].classList.remove('tf_opacity'),n===i){(r||l[0].classList.contains('auto_tiles'))&&(l[0].classList.contains('auto_tiles')&&b.autoTiles(l[0]),r&&o.remove&&r.remove(o.remove));for(let t=0;t<i;++t)b.lazyScroll(b.convert(b.selectWithParent('[data-lazy]',o.new[t])).reverse(),!0);b.fontAwesome(),s()}})})})(jQuery,Themify,window,document);