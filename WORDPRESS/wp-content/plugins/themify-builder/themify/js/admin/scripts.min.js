'use strict';(function(a){a(function(){function I(){var b=a(".search-setting-holder .clear-search");0>=b.prev().val().length?b.removeClass("show"):b.addClass("show")}function J(){n();var b=w.serialize();a.post(ajaxurl,{action:"themify_save",data:b,nonce:themify_js_vars.nonce},function(){l();a("body").triggerHandler("themify_save")})}function K(b){a('[data-show-if-element="'+b+'"]').each(function(){var c=a(this),d=c.data("show-if-value"),e=a(c.data("show-if-element").toString());0>=e.length||(e=e.is(":checkbox")?
e.is(":checked")?"true":"false":e.is(":radio")?e.filter(":checked").val():e.val().trim(),d=Array.isArray(d)?d:[d.toString()],"undefined"!==typeof e&&-1!==a.inArray(e,d)?c.slideDown({duration:550}):c.slideUp({duration:550}))})}function S(){a.ajax({url:ajaxurl,type:"post",data:{action:"themify_get_builder_posts",from_ajax:!0,nonce:themify_js_vars.nonce},success:function(b){b=JSON.parse(b);if(""==b.posts)alert("No builder data found!"),a("#builder-find-and-replace-btn").removeAttr("disabled").attr("value",
"Replace");else for(var c=a("#original_string").val(),d=a("#replace_string").val(),e=1;e<=b.groups;++e)T({group:e,total:b.groups,originalString:c,replaceString:d})}})}function T(b){a.ajax({url:ajaxurl,type:"post",data:{action:"themify_find_and_replace_ajax",group_number:b.group,total_groups:b.total,original_string:b.originalString,replace_string:b.replaceString,nonce:themify_js_vars.nonce},success:function(c){-1!==c.indexOf("finished-")&&(a("#builder-find-and-replace-btn").removeAttr("disabled").attr("value",
"Replace"),alert("Replace operation was completed successfully. "+c.replace("finished-","")+" strings found and replaced."))}})}function U(b){if(wp&&wp.codeEditor&&themify_js_vars.code_editor){let c=wp.codeEditor.initialize(b,themify_js_vars.code_editor);c.codemirror.on("change",function(){c.codemirror.save()});c.codemirror.refresh()}}function L(b,c){function d(){if(0!==e.length&&!(5<f)){var g=e.shift();++f;a.ajax({url:ajaxurl,dataType:"json",type:"POST",data:g,complete:function(h){--f;d();1>f&&c()}})}}
var e=[],f=0;void 0!==b.data.actions&&a.each(b.data.actions,function(g,h){a.each(h,function(m,r){e.push({action:"themify_import_sample_actions",_action:g,nonce:themify_js_vars.nonce,data:r})})});if(0===e.length)c();else for(b=0;5>b;++b)d()}function n(){a(".tb_alert").addClass("busy").fadeIn(800)}function l(b){"error"===b?(b="error",a(".overlay, .prompt-box").delay(900).fadeIn(500),a(".prompt-box .show-error").show(),a(".prompt-box .show-error p").remove(),a(".prompt-box .error-msg").after('<p class="prompt-error">undefined</p>'),
a(".prompt-box .show-login").hide()):b="done";a(".tb_alert").removeClass("busy").addClass(b).delay(800).fadeOut(800,function(){a(this).removeClass(b)})}function M(b){b.preventDefault();const c=this;b=document.querySelector(".required-addons.themify-modal");let d=!1;if(b)if(c.dataset.id&&b.dataset.skin!==c.dataset.id)b.remove();else if(b.classList.contains("reload"))b.classList.remove("reload"),d=b;else{a(b).fadeIn();v();return}b=new FormData;b.append("action","themify_required_plugins_modal");b.append("nonce",
themify_js_vars.nonce);null===document.getElementById("license-modal")&&b.append("license","1");c.dataset.plugins&&""!==c.dataset.plugins&&b.append("plugins",c.dataset.plugins);c.dataset.id&&""!==c.dataset.id&&b.append("skin",c.dataset.id);a(".tb_alert").addClass("busy").fadeIn(300);fetch(ajaxurl,{method:"POST",headers:new Headers({Accept:"application/json","X-Requested-With":"XMLHttpRequest"}),body:b}).then(e=>e.text()).then(function(e){e=(new DOMParser).parseFromString(e,"text/html").getElementsByClassName("themify-modal")[0];
!1!==d?(d.innerHTML=e.innerHTML,e=d):document.getElementById("themify").appendChild(e);const f=a(e);!1===d&&(f.fadeIn(),v());a(".tb_alert").removeClass("busy").fadeOut(300);e.querySelector(".dismiss-import-notice").addEventListener("click",function(g){g.preventDefault();f.fadeOut(300);v("close")});N(e.getElementsByClassName("license-link"));c.classList.contains("import-sample-content")?V(f,a(c)):c.classList.contains("skin-demo-import")&&W(c,f);f.find(".themify-ajax-installer").on("click",O)})}function v(b=
"open"){"open"===b?document.body.classList.add("themify-modal-active"):document.body.classList.remove("themify-modal-active")}function N(b){var c=b.length;if(0!==c){var d=document.getElementById("license-modal");if(null!==d){for(--c;-1<c;--c)b[c].addEventListener("click",function(e){e.preventDefault();d.dataset.src=this.dataset.src;a(d).fadeIn();v()});d.dataset.init||(d.dataset.init=!0,d.getElementsByClassName("close")[0].addEventListener("click",function(e){e.preventDefault();a(d).fadeOut(300);v("close")}),
d.getElementsByClassName("update-license")[0].addEventListener("click",function(e){e.preventDefault();const f=d.querySelector('[name="themify_username"]').value,g=d.querySelector('[name="updater_licence"]').value,h=e.target.closest(".themify-modal").dataset.src;""===f||""===g?alert(themify_js_vars.empty_li):(e=new FormData,e.append("action","themify_update_license"),e.append("nonce",themify_js_vars.nonce),e.append("src",h),e.append("themify_username",f),e.append("updater_licence",g),a(".tb_alert").addClass("busy").fadeIn(300),
fetch(ajaxurl,{method:"POST",headers:new Headers({Accept:"application/json","X-Requested-With":"XMLHttpRequest"}),body:e}).then(m=>m.json()).then(function(m){if(!0===m.result){if("import"===h){var r=document.getElementsByClassName("required-addons")[0].dataset.skin;document.querySelector('.required-addons.themify-modal[data-skin="'+r+'"]').classList.add("reload");a(""===r?"a.import-sample-content":'.skin-demo-import[data-id="'+r+'"]').trigger("click")}r=document.getElementById("update-main");r.innerHTML=
(new DOMParser).parseFromString(m.html,"text/html").body.innerHTML;P(a(r));ThemifyUpdater.updateThemeBtn();d.remove();"import"!==h&&a(".tb_alert").removeClass("busy").fadeOut(300)}else a(".tb_alert").removeClass("busy").fadeOut(300),alert(m.err)}))}))}}}function V(b,c){const d=function(e,f){a.ajax({url:ajaxurl,dataType:"json",data:{action:"themify_import_sample_content",import_images:e?"yes":"no",clear_old_imports:f?"yes":"no",nonce:themify_js_vars.nonce},type:"POST",success:function(g){const h=function(){c.find("span").text(c.attr("data-success"));
l();window.location=themify_js_vars.admin_url};g.success?L(g,h):(l(),alert(g.data.error))},beforeSend:function(){c.find("span").text(c.attr("data-importing"));n()}})};b.find(".proceed-import").off().on("click",function(e){e.preventDefault();d(a(this).parent().find(".tf_import_images input:checkbox").is(":checked"),a(this).closest("div").find(".erase-demo").is(":checked"))}).end().find("a.external-link").on("click",function(){window.location=a(this).attr("href")})}function W(b,c){const d=a(b).closest(".skin-preview").find(".skin-demo-content").data("skin"),
e=function(f,g){a.ajax({url:ajaxurl,data:{action:"themify_import_sample_content",skin:d,import_images:f?"yes":"no",clear_old_imports:g?"yes":"no",nonce:themify_js_vars.nonce},type:"POST",success:function(h){const m=function(){l();window.location=themify_js_vars.admin_url};h.success?L(h,m):(l(),alert(h.data.error))},beforeSend:function(){n()}})};c.fadeIn().find(".proceed-import").off().on("click",function(f){f.preventDefault();e(a(this).parent().find(".tf_import_images input:checkbox").is(":checked"),
a(this).closest("div").find(".erase-demo").is(":checked"))}).end().find("a.external-link").on("click",function(){window.location=a(this).attr("href");v()})}function O(b){if(!this.dataset.loading){b.preventDefault();var c=this,d=c.classList.contains("themify-updater");c.dataset.loading=!0;!0===d&&(c.dataset.ajax=document.querySelector("#update-main .themify-ajax-installer").dataset.ajax);n();fetch(c.dataset.ajax,{headers:new Headers({"X-Requested-With":"XMLHttpRequest"})}).then(e=>e.text()).then(function(e){delete c.dataset.loading;
c.dataset.required?(e=document.createElement("span"),e.className="ti-check",c.parentNode.replaceChild(e,c)):!0===d?(document.querySelector('.required-addons.themify-modal[data-skin="'+c.dataset.skin+'"]').classList.add("reload"),a(""===c.dataset.skin?"a.import-sample-content":'.skin-demo-import[data-id="'+c.dataset.skin+'"]').trigger("click")):window.location.reload();l("done")}).catch(function(e){l("error");delete c.dataset.loading})}}function P(b){b.find("select").not("[multiple]").wrap('<div class="selectwrapper"></div>');
b.find(".selectwrapper").on("click",function(){a(this).toggleClass("clicked")})}var p=a("body"),w=a("#themify"),t=a("#setting>.subtabnav"),y=a("#themify_404_page_autocomplete"),C;w.find(".maintab").not('[aria-expanded="false"]').each(function(){a(this).find(".subtab").css("minHeight",a(this).find(".subtabnav").outerHeight())});if(0<y.length){var D={},E=y.closest(".themify_404_autocomplete_wrap");y.autocomplete({minLength:2,autoFocus:!0,classes:{"ui-autocomplete":"highlight"},source:function(b,c){var d=
b.term;E.addClass("themify_autocomplete_run");d in D?(c(D[d]),E.removeClass("themify_autocomplete_run")):a.ajax({url:ajaxurl,dataType:"json",type:"POST",data:{term:d,action:"themify_get_404_pages"},success:function(e){for(const m in e){var f=e[m],g=e[m].label,h=document.createElement("textarea");h.innerHTML=g;f.label=h.innerText}D[d]=e;c(e.length?e:[themify_js_vars.page_not_found]);E.removeClass("themify_autocomplete_run")}})},select:function(b,c){b.preventDefault();c.item.value!==themify_js_vars.page_not_found&&
y.val(c.item.label).next('input[type="hidden"]').val(c.item.value)},change:function(b,c){c.item||b.target.value||y.next('input[type="hidden"]').val("")}}).focus(function(){a(this).autocomplete("search")})}0<t.length&&(C=t.offset().top-32);var Q=!1,k=function(b,c){a(".search-setting-holder .clear-search").trigger("click");c="tabscreate"===b.type?window.location:c.newTab.find("a")[0];"replaceState"in history&&history.replaceState(null,null,c.hash||null);"tabscreate"!==b.type||Q||(Q=!0,b=a("#themify div#setting div.subtab"),
b.each(function(){var d=a(this).find("fieldset");2<d.length?d.children(".themify_panel_fieldset_wrap").hide():d.find("legend").addClass("themify_panel_fieldset_nocollapse")}),b.find("legend:not(.themify_panel_fieldset_nocollapse)").on("click",function(){var d=a(this),e=d.children("i");e.hasClass("tf_plus_icon")?d.siblings().slideDown("fast",function(){if(1>this.getElementsByClassName("CodeMirror").length){const f=this.getElementsByClassName("tf_code_editor");for(let g=f.length-1;-1<g;--g)U(f[g])}e.removeClass("tf_plus_icon").addClass("ti-minus")}):
d.siblings().slideUp("fast",function(){e.removeClass("ti-minus").addClass("tf_plus_icon")})}))};a(".maintab, #content").tabs({fx:{opacity:"toggle",duration:200},cache:!0,select:function(){a(this).css({height:a(this).height(),overflow:"hidden"})},show:function(){a(this).css({height:"auto",overflow:"visible"});0<t.length&&(C=t.offset().top-32)},beforeActivate:k,create:k});(k=window.location.hash&&document.querySelector('a[href="'+window.location.hash+'"]'))&&k.closest(".subtabnav")&&(k=k.closest(".maintab").getAttribute("id"))&&
(k=document.getElementById("maintabnav").querySelector('a[href="#'+k+'"]'))&&k.click();if(0<t.length)a(window).on("scroll",function(){a(this).scrollTop()>C?t.hasClass("themify_settings_fixed")||t.addClass("themify_settings_fixed"):t.removeClass("themify_settings_fixed")});var R=function(){var b=a("#search-setting").val();0>=b.length?(I(),a(".subtab","#setting").unmark({done:function(){a(".searching").removeClass("searching");a(".contain-result").removeClass("contain-result");a("#setting").removeClass("not-found")}})):
(b.length&&(a(".search-setting-holder .clear-search").hasClass("show")||I()),a(".subtab","#setting").unmark({done:function(){a(".searching").removeClass("searching");a(".contain-result").removeClass("contain-result");a("#setting").removeClass("not-found");a("*:not(:input):contains('"+b+"')","#setting .subtab").mark(b,{diacritics:!0,separateWordSearch:!0,exclude:["option",".tm-option-title-fw"],filter:function(c,d,e,f){if("#text"===c.nodeName){if("none"===a(c).parent().parent().css("display"))return!1}else if("none"===
a(c).parent().css("display"))return!1;return!0},each:function(c){a(c).closest("fieldset").addClass("contain-result");a(c).closest(".subtab").addClass("contain-result")},done:function(){a("#setting").addClass("searching")},noMatch:function(){a("#setting").addClass("not-found")}})}}))};a("#search-setting").on("input",R);a(".search-setting-holder .clear-search").on("click",function(){a(this).prev().val("");R()});a(".valid_num").on("keyup input paste",function(){for(var b=a(this).val(),c=!0,d,e=0;e<b.length&&
!0===c;e++)d=b.charAt(e),-1===" 0123456789.+-".indexOf(d)&&(c=!1);c||a(this).val(a(this).val().substring(0,a(this).val().length-1))});a(".save-button").on("click",function(b){J();return!1});if(0<w.length)a(document).on("keydown",function(b){83!=b.which||1!=b.ctrlKey&&1!=b.metaKey||(b.preventDefault(),J())});a("#reset-setting").on("click",function(b){b.preventDefault();b="reset-setting"!==a(this).prop("id")?"styling":"settings";confirm(themify_lang["confirm_reset_"+b])&&(n(),a.post(ajaxurl,{action:"themify_reset_"+
b,data:w.serialize(),nonce:themify_js_vars.nonce},function(){l();window.location.reload(!0)}))});(function(){let b=document.getElementById("tf_message"),c=localStorage.getItem("tf_message"),d=localStorage.getItem("tf_message_dismiss"),e=function(){b.className="show";b.innerHTML=c+" ";let f=document.createElement("a");f.href="#";f.textContent=b.dataset.dismiss;f.addEventListener("click",function(g){g.preventDefault();b.style.display="none";localStorage.setItem("tf_message_dismiss",1)});b.appendChild(f)};
b&&!d&&(null===c?a.ajax({url:"https://themify.me/public-api/update-message/index.txt",success:function(f){c=f;localStorage.setItem("tf_message",c);""!==c.trim()&&e()}}):""!==c&&e())})();a(".themify_changelogs").on("click",function(b){b.preventDefault();b=a(this).data("changelog");a(".show-login, .show-error").hide();a(".overlay, .prompt-box").fadeIn(300);a(".prompt-box iframe").remove();a(".tb_alert").addClass("busy").fadeIn(300);a('<iframe src="'+b+'" />').on("load",function(){a(".tb_alert").removeClass("busy").fadeOut(300)}).prependTo(".prompt-box");
a(".prompt-box").addClass("show-changelog")});a(".overlay").on("click",function(){a(this).add(".prompt-box").fadeOut()});a(".feature-box-display").on("click",function(){"images"===a(this).val()?a(this).parent().parent().find(".feature_box_posts").fadeOut(200,function(){a(this).parent().parent().find(".feature_box_images").fadeIn(200)}):a(this).parent().parent().find(".feature_box_images").fadeOut(200,function(){a(this).parent().parent().find(".feature_box_posts").fadeIn(200)})});a(".block-toggle").on("click",
function(){var b=a(this),c=b.val(),d=b.data("hide");b.parent().parent().find(".feature_box_"+d).fadeOut(200,function(){b.parent().parent().find(".feature_box_"+c).fadeIn(200)})});a(".feature_box_enabled_check").on("change",function(){"on"===a(this).val()?a(this).closest("fieldset").find(".feature_box_enabled_display").fadeIn(200):a(this).closest("fieldset").find(".feature_box_enabled_display").fadeOut(200)});k=a(".box_enabled_check");k.on("click",function(){a(this).is(":checked")?a(this).parent().find(".box_enabled_display").fadeIn(200):
a(this).parent().find(".box_enabled_display").fadeOut(200)});k.is(":checked")&&k.parent().find(".box_enabled_display").show();var B=a(".disable_img_php");B.on("click",function(){B.is(":checked")?(a(".show_if_disabled_img_php").fadeIn(200),a(".show_if_enabled_img_php").fadeOut(200)):(a(".show_if_disabled_img_php").fadeOut(200),a(".show_if_enabled_img_php").fadeIn(200))});B.is(":checked")?a(".show_if_disabled_img_php").show():B.not(":checked")&&a(".show_if_enabled_img_php").show();a(".gallery_lightbox_type").on("change",
function(){1!=a(".gallery_lightbox_type").prop("selectedIndex")?a(".show_if_photoswipe_enabled").fadeOut(200):a(".show_if_photoswipe_enabled").fadeIn(200)}).trigger("change");a("#skins .skin-preview").on("click",function(b){a(b.target).parent().hasClass("view-demo")||b.preventDefault();a("#skins .skin-preview").removeClass("selected");a(this).addClass("selected");a("input[name='skin']").val(a(this).attr("data-skin"))});k=a(".featimgcontrol");0<k.length&&0<a(".featimgdropdown").length&&k.each(function(){a(this).append(a(this).next(".featimgdropdown"))});
var F=a("#social-link-type"),u=a("#social-links-wrapper"),z=a("#setting-link_field_ids"),A=a("#setting-link_field_hash");a('input[value="font-icon"]',F).prop("checked")?(a(".image-icon",u).fadeOut(),a(".font-icon",u).fadeIn()):(a(".font-icon",u).fadeOut(),a(".image-icon",u).fadeIn());a("input",F).on("click",function(){var b=a(this);b.prop("checked")&&(a("."+b.data("hide"),u).fadeOut(),a("."+b.val(),u).fadeIn())});u.length&&u.sortable({placeholder:"social-link-placeholder",handle:".social-drag",update:function(){var b=
{};a(".social-link-item").each(function(){b[a(this).attr("id")]=a(this).attr("id")});z.val(JSON.stringify(b))}}).on("click",".remove-item",function(b){b.preventDefault();b=JSON.parse(z.val());var c=a(this).data("removelink");a("#"+c).remove();delete b[c];z.val(JSON.stringify(b))});a(".add-social-link a").on("click",function(b){var c=JSON.parse(z.val()),d=parseInt(A.val()),e="image-icon";b.preventDefault();a("input[value=font-icon]",F).prop("checked")&&(e="font-icon");a.post(ajaxurl,{action:"themify_add_link_field",
nonce:themify_js_vars.nonce,fid:d,type:e},function(f){var g=a("#social-links-wrapper");f=a(f);g.append(f);g=a("#themify-link-"+A.val()+" .plupload-upload-uic");c["themify-link-"+A.val()]="themify-link-"+A.val();z.val(JSON.stringify(c));0<g.length&&themify_create_pluploader(g);window.Themify_Metabox.color_picker(f);A.val(d+1)})});a(".slug-rewrite").each(function(){a(this).on("keypress",function(b){var c=RegExp("^[a-z0-9_-]+$"),d=String.fromCharCode(b.charCode?b.charCode:b.which);if(!c.test(d))return b.preventDefault(),
!1})});var q={target:"",getDocHeight:function(){var b=document;return Math.max(Math.max(b.body.scrollHeight,b.documentElement.scrollHeight),Math.max(b.body.offsetHeight,b.documentElement.offsetHeight),Math.max(b.body.clientHeight,b.documentElement.clientHeight))},showLightbox:function(b){var c=a(document).scrollTop()+80,d=a(".themify-admin-lightbox-"+b);d.length||(a(".themify-admin-lightbox:first").clone().removeClass("themify-admin-lightbox-1").addClass("themify-admin-lightbox-"+b).data("item",b).insertAfter(".themify-admin-lightbox:last"),
1<a(".themify-admin-lightbox").length&&a(".lightbox_container",".themify-admin-lightbox-"+b).html(""),d=a(".themify-admin-lightbox-"+b),d.removeClass("is-loaded"));a("#themify_lightbox_overlay").show();d.hasClass("is-loaded")?(d.show().css("top",q.getDocHeight()).animate({top:c},800),a(".themify-visibility-toggle").html(a(".themify-visibility-toggle").data("text"))):a.ajax({type:"POST",url:ajaxurl,data:{action:"themify_get_visibility_options",selected:q.target.val(),nonce:themify_js_vars.nonce},success:function(e){a(".lightbox_container",
d).append(e);d.show().css("top",q.getDocHeight()).animate({top:c},800);a("#visibility-tabs",d).tabs();a("#visibility-tabs .themify-visibility-inner-tabs",d).tabs();a(".themify-visibility-toggle").html(a(".themify-visibility-toggle").data("text"))}})},closeLightbox:function(b,c){a(".themify-admin-lightbox-"+b).animate({top:q.getDocHeight()},800,function(){a("#themify_lightbox_overlay").hide();a(".themify-admin-lightbox-"+b).hide();"function"===typeof c&&c()}).addClass("is-loaded")},clearOptions:function(){a("#themify_lightbox_visibility").find(".lightbox_container").empty()}};
p.on("click",".themify-visibility-toggle",function(){var b=a(this),c=b.html();b.html('<span class="tb_slider_loader_wrapper"><span class="tb_slider_loader"></span></span>'+c);q.target=a(this).next();q.showLightbox(a(this).data("item"));return!1}).on("click",".themify_lightbox_visibility .close_lightbox, #themify_lightbox_overlay",function(){q.closeLightbox(a(this).parents(".themify_lightbox_visibility").data("item"));return!1});p.on("click",".themify-visibility-pagination a.page-numbers",function(b){b.preventDefault();
b=a(this);var c=b.parents(".themify-visibility-options"),d=b.parents(".themify-visibility-items-inner"),e=a(".themify-visibility-pagination",d),f=parseFloat(a(".themify-visibility-pagination .current",d).text()),g=1;b.hasClass("next")?g=f+1:b.hasClass("prev")?g=f-1:b.hasClass("page-numbers")&&(g=parseFloat(b.text()));var h=a(".themify-visibility-items-inner",c);a.ajax({url:ajaxurl,type:"post",data:{action:"themify_create_page_pagination",current_page:g,num_of_pages:d.data("pages"),nonce:themify_js_vars.nonce},
beforeSend:function(){a(".tb_slider_loader",c).remove();e.hide();h.append('<div class="tb_slider_loader"></div>')},success:function(m){a(".tb_slider_loader",c).remove();a(".themify-visibility-items-page",d).addClass("is-hidden");a(".themify-visibility-items-page-"+g,d).removeClass("is-hidden");e.html(m).show()}})}).on("click","#visibility-tabs .themify-visibility-tab",function(b){b.preventDefault();var c=a(this),d=a("#themify-original-conditions");if(!c.data("active")){b=c.data("type");var e=c.parents("#visibility-tabs").find(".themify-visibility-type-options[data-type="+
b+"]"),f=c.parents(".themify_lightbox_visibility").data("item");f=a("#setting-hooks-"+f+"-visibility").val();a.ajax({url:ajaxurl,type:"post",data:{action:"themify_create_inner_page",type:b,selected:f,nonce:themify_js_vars.nonce,original_values:d.val()},beforeSend:function(){e.html('<div class="tb_slider_loader"></div>')},success:function(g){g=JSON.parse(g);e.html(g.html);c.data("active","on");d.val(g.original_values)}})}}).on("click",".visibility-save",function(){var b=a(this).parents(".themify_lightbox_visibility"),
c=b.data("item"),d=a("form",b).serialize();b=a("#themify-original-conditions",b).val();b=""===b?[]:b.split("&");d=""===d?[]:d.split("&");d=b.concat(d).concat();for(b=0;b<d.length;++b)for(var e=b+1;e<d.length;++e)d[b]===d[e]&&d.splice(e--,1);d=d.join("&");a(".setting-hooks-"+c+"-visibility").val(d);q.target.val(d);q.closeLightbox(a(this).parents(".themify_lightbox_visibility").data("item"));return!1}).on("click",".themify_lightbox_visibility .uncheck-all",function(){a(this).before('<span class="tb_slider_loader_wrapper"><span class="tb_slider_loader"></span></span>');
const b=a(this),c=b.parents(".themify_lightbox_visibility"),d=c.data("item");a("#setting-hooks-"+d+"-visibility").val("");a("#themify-original-conditions",c).val("");a("input:checkbox",c).removeAttr("checked");b.parent().find(".tb_slider_loader_wrapper").remove();return!1});a("#setting-hooks").on("click",".remove-item",function(b){b.preventDefault();const c=JSON.parse(a("#themify-hooks-field-ids").val()),d=a(this).closest(".social-link-item").fadeOut("fast",function(){const e=d.attr("data-id");for(let f in c)c.hasOwnProperty(f)&&
c[f]==e&&c.splice(f,1);a("#themify-hooks-field-ids").val(JSON.stringify(c));a(".themify-admin-lightbox-"+e).removeClass("is-loaded").find(".lightbox_container").html("")})}).on("click",".themify-add-hook a",function(b){b.preventDefault();a(this).before('<span class="tb_slider_loader_wrapper"><span class="tb_slider_loader"></span></span>');let c=JSON.parse(a("#themify-hooks-field-ids").val()),d=1;0<c.length?d=Math.max.apply(null,c)+1:c=[];a.ajax({url:ajaxurl,type:"post",data:{action:"themify_hooks_add_item",
field_id:d,nonce:themify_js_vars.nonce},success:function(e){const f=a("#hook-content-list");c.push(d);a("#themify-hooks-field-ids").val(JSON.stringify(c));a("#setting-hooks .tb_slider_loader_wrapper").remove();f.append(e);a("textarea[name=setting-hooks-"+d+"-code]",f).html("");a("select[name=setting-hooks-"+d+"-location] optgroup:first-child option[value=themify_body_start]",f).attr("selected",!0);1<f.find("li").length&&a(".themify-admin-lightbox:first").clone().removeClass("themify-admin-lightbox-1").addClass("themify-admin-lightbox-"+
d).data("item",d).insertAfter(".themify-admin-lightbox:last");a(".lightbox_container",".themify-admin-lightbox-"+d).html("");a("#setting-hooks-"+d+"-visibility",f).val("");a(".themify-admin-lightbox:last").removeClass("is-loaded")}})});const G=a("#hook-content-list");G.length&&G.sortable({placeholder:"social-link-placeholder",handle:".social-drag",update:function(){var b=[];G.find("li").each(function(){b.push(parseInt(a(this).attr("data-id")))});a("#themify-hooks-field-ids").val(JSON.stringify(b))}});
a("body").on("click",".see-hook-locations",function(b){b.preventDefault();window.tf_hook_target=this.closest("li").querySelector("select");a.magnificPopup.open({items:[this],type:"iframe",iframe:{markup:'<div class="mfp-iframe-scaler" style="max-width: 100% !important; height: 100%;"><div role="button" class="tf_close mfp-close"></div><iframe id="tf_hook_location_iframe" class="mfp-iframe" frameborder="0" allowfullscreen></iframe></div>'}})});a("#setting-editor-gfonts-list").on("change",function(){a(this).next().val(JSON.stringify(a(this).val()))}).trigger("change");
p.on("click","#demo-import-notice .skin-preview",function(b){a(b.target).parent().hasClass("view-demo")||b.preventDefault();a("#demo-import-notice .skin-preview").removeClass("selected");a(this).addClass("selected");a('#skins .skin-preview[data-skin="'+a(this).data("skin")+'"]').trigger("click")});a("#demo-import-notice .skin-demo-import").on("click",function(){a("#skins .skin-preview.selected .skin-demo-import").trigger("click")});p.on("click","#skins .skin-demo-import",M).on("click","#skins .skin-erase-demo",
function(b){b.preventDefault();b=a(this).closest(".skin-demo-content");a.ajax({url:ajaxurl,data:{action:"themify_erase_sample_content",skin:b.data("skin"),nonce:themify_js_vars.nonce},type:"POST",success:function(c){c.success||alert(c.data.error)},beforeSend:function(){n()},complete:function(){l()}})});a("#demo-import-notice .import-sample-content").on("click",function(){a("#demo-import .import-sample-content").trigger("click")});a("#demo-import .import-sample-content").on("click",M);a(".erase-sample-content").on("click",
function(){const b=a(this);if(b.hasClass("disabled"))return!1;b.addClass("disabled");a.ajax({url:ajaxurl,data:{action:"themify_erase_sample_content",nonce:themify_js_vars.nonce},type:"POST",success:function(c){c.success||alert(c.data.error)},beforeSend:function(){b.find("span").text(b.attr("data-erasing"));n()},complete:function(){b.find("span").text(b.attr("data-success"));l()}});return!1});a(".themify-modal .dismiss-import-notice").on("click",function(){a(this).closest(".themify-modal").fadeOut();
v("close");return!1});P(w);(function(b){b=b.find("[data-show-if-element]").map(function(){return a(this).data("show-if-element")}).get().filter(function(c,d,e){return d===e.indexOf(c)});a.each(b,function(c,d){K(d);a(document).on("change",d,function(e){K(d)})})})(a("#themify, .toplevel_page_themify-builder #wpbody-content"));a(".js-clear-cache").on("click",function(b){b.preventDefault();const c=a(this);c.hasClass("disabled")||(c.addClass("disabled"),a.ajax({url:ajaxurl,data:{action:c.data("action"),
data:"all"===c.data("send")?w.serialize():"",nonce:themify_js_vars.nonce},type:"POST",dataType:"json",beforeSend:function(){c.find("span").text(c.data("clearing-text")).end().find("i").removeClass().addClass("tf_loader")},error:function(){c.removeClass("disabled")},success:function(d){d&&d.error&&alert(d.error);c.find("span").text(c.data("done-text")).end().find("i").removeClass();d&&d.remove_after?setTimeout(function(){c.closest(".pushlabel").remove()},3E3):setTimeout(function(){c.find("span").text(c.data("default-text")).end().find("i").removeClass().addClass(c.data("default-icon")).end().removeClass("disabled")},
5E3)}}))});a(".input-range .range-slider").each(function(){let b=a(this),c=b.next(),d=c.data("range")?!0:!1;b.slider({range:d,min:c.data("min"),max:c.data("max"),values:c.val().split("-"),slide:function(e,f){f.values[0]!=f.values[1]&&d?c.val(f.values[0]+"-"+f.values[1]):c.val(f.values[0])}});c.on("keyup",function(){const e=a(this),f=parseInt(e.val());f<parseInt(e.data("default-min"))&&b.slider("option","min",f);f>parseInt(e.data("default-max"))&&b.slider("option","max",f);b.slider("values",[f])})});
void 0!==window.wp&&void 0!==window.wp.media&&"undefined"!==typeof wp.media.featuredImage&&(a("body").on("themify_metabox_lib_selected",function(b,c,d,e){c.data("submit").featured&&wp.media.featuredImage.set(d.id)}).on("themify_plupload_selected",function(b,c,d){c.data("featured")&&wp.media.featuredImage.set(d.id)}).on("themify_wp_media_featured_image_set",function(b,c,d){b=a("#post_image").closest(".themify_field_row");-1==c?b.find(".themify_featimg_remove a").trigger("click"):themifyMediaLib.setPreviewIcon(b,
a(d).find("#set-post-thumbnail img").attr("src"))}),a("#post_image").closest(".themify_field_row").find(".themify_featimg_remove a").on("click",function(){a("#remove-post-thumbnail").trigger("click")}),wp.media.featuredImage.set=function(b){var c=wp.media.view.settings;c.post.featuredImageId=b;wp.media.post("get-post-thumbnail-html",{post_id:c.post.id,thumbnail_id:c.post.featuredImageId,_wpnonce:c.post.nonce}).done(function(d){"0"==d?window.alert(window.setPostThumbnailL10n.error):(a(".inside","#postimagediv").html(d),
a("body").triggerHandler("themify_wp_media_featured_image_set",[b,d]))})});(function(){a("#builder-regenerate-css-files").on("click",function(){const b=a(this).attr({value:"Regenerating ...",disabled:"disabled"});a.ajax({url:ajaxurl,type:"post",data:{action:"themify_regenerate_css_files_ajax",nonce:themify_js_vars.nonce,all:a("#tmp_regenerate_all_css").is(":checked")?1:0},success:function(c){b.removeAttr("disabled").attr("value","Regenerate CSS Files");"finished"!==c&&alert(c)}})})})();(function(){a("#builder-find-and-replace-btn").on("click",
function(){""===a("#original_string").val()?alert("Please fill original value for search!"):confirm("WARNING: This will replace all data in your database. It can not be undone. Please backup your database before proceeding.")&&(a(this).attr({value:"Replacing ...",disabled:"disabled"}),S())})})();(function(){const b=document.getElementById("setting-page_builder_maintenance_page");null!==b&&b.addEventListener("mousedown",function(c){var d=this;a.ajax({url:ajaxurl,type:"POST",data:{action:"themify_load_maintenance_pages",
nonce:themify_js_vars.nonce},success:function(e){d.innerHTML=e;/^((?!chrome|android).)*safari/i.test(navigator.userAgent)&&(d.blur(),d.dispatchEvent(c))}})},{once:!0,passive:!0})})();N(document.getElementsByClassName("license-link"));(p=document.getElementById("tb_option_flush_twitter"))&&p.addEventListener("click",function(b){b.preventDefault();n();a.ajax({url:ajaxurl,type:"POST",data:{action:"themify_twitter_flush",nonce:themify_js_vars.nonce},success:function(){l()}})});const H=document.getElementById("tf_font_import");
if(H){a(H).insertAfter(".wp-header-end");document.getElementById("tf_font_import_submit").addEventListener("click",function(){n();jQuery.ajax({type:"POST",url:ajaxurl,data:{action:"tf_import_font",nonce:themify_js_vars.nonce,font_name:H.querySelector("select").value},success:function(d){l();d.success?location.reload():console.log(d.data)}})});a("#tf_font_size_slider_wrap").appendTo("th#font_preview");let b=document.getElementById("tf_font_preview_style");p=localStorage.getItem("tf_font_preview_size")||
1;let c=function(d){b.innerText=".font_preview span { font-size: "+d+"em; }"};c(p);a("#tf_font_size_slider").slider({value:p,min:.5,max:4,step:.1,slide:function(d,e){c(e.value);localStorage.setItem("tf_font_preview_size",e.value)}})}let x=document.getElementsByClassName("generate-child-theme");for(let b=0;b<x.length;b++)x[b].addEventListener("click",c=>{c.preventDefault();window.confirm(x[b].dataset.confirm)&&(n(),a.ajax({url:ajaxurl,type:"POST",data:{action:"themify_generate_child_theme",nonce:themify_js_vars.nonce,
import_customizer:x[b].closest("div").querySelector('input[type="checkbox"]').checked?1:0},success:d=>{l();d.success?(x[b].classList.add("disabled"),x[b].closest(".tf_generate_child_theme").classList.add("tf_done")):window.alert(d.data[0].message)}}))});a(".themify-ajax-installer").on("click",O);a(function(){const b=a("#themify .preview-icon");b.length&&b.each(function(){var c=a(this),d=c.attr("title");c.removeAttr("title").append('<span class="tm-option-title-fw">'+d+"</span>")})});a("#themify_feed_settings select").on("change",
function(){a(this).next().val(a(this).val().join(","))})})})(jQuery);
